(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{77757:function(e,o,t){Promise.resolve().then(t.bind(t,90216))},90216:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return f}});var r=t(57437),n=t(2265),i=t(1180),a=t(51077),s=t(29162),l=t(53225),d=t(92513),c=t(54817),p=t(24241),x=t(18422),u=t(10883),m=t(39343),h=t(31885),g=t(80537);let b=g.Ry({empresa_id:g.Z_().min(1,"Empresa \xe9 obrigat\xf3ria"),banco_conta_id:g.Z_().min(1,"Conta banc\xe1ria \xe9 obrigat\xf3ria"),tipo_movimento:g.Km(["ENTRADA","SAIDA"],{required_error:"Tipo de movimento \xe9 obrigat\xf3rio"}),data_movimento:g.Z_().min(1,"Data do movimento \xe9 obrigat\xf3ria"),valor:g.Z_().min(1,"Valor \xe9 obrigat\xf3rio"),historico:g.Z_().optional(),documento:g.Z_().optional()});function f(){let[e,o]=(0,n.useState)([]),[t,g]=(0,n.useState)([]),[f,y]=(0,n.useState)([]),[v,j]=(0,n.useState)([]),[_,S]=(0,n.useState)(!0),[C,w]=(0,n.useState)(!1),[T,k]=(0,n.useState)(!1),[z,A]=(0,n.useState)(null),[E,R]=(0,n.useState)(""),[I,D]=(0,n.useState)(""),[B,N]=(0,n.useState)(""),[W,O]=(0,n.useState)(""),[M,Z]=(0,n.useState)(""),[L,F]=(0,n.useState)(""),[q,V]=(0,n.useState)([]),[X,J]=(0,n.useState)(0),[H,P]=(0,n.useState)(0),[Y,G]=(0,n.useState)(!0),[U,K]=(0,n.useState)(0),{register:Q,handleSubmit:$,reset:ee,setValue:eo,formState:{errors:et},watch:er}=(0,m.cI)({resolver:(0,h.F)(b)}),en=er("empresa_id"),[ei,ea]=(0,n.useState)(""),es=e=>{let o=e.replace(/\D/g,"");return o?(parseFloat(o)/100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},el=e=>{let o=e.replace(/\D/g,"");return o?(parseFloat(o)/100).toString():"0"},ed=(e,o)=>{J(e=>e+1);let t={id:X,message:e,type:o};V(e=>[...e,t]),setTimeout(()=>{ec(X)},4e3)},ec=e=>{V(o=>o.filter(o=>o.id!==e))},ep=e=>({success:{borderColor:"#10b981",icon:a.Z,iconColor:"#10b981"},error:{borderColor:"#ef4444",icon:s.Z,iconColor:"#ef4444"},warning:{borderColor:"#eab308",icon:l.Z,iconColor:"#eab308"}})[e];(0,n.useEffect)(()=>{ex(),eh()},[]),(0,n.useEffect)(()=>{I?eu(I):eu(),N("")},[I]),(0,n.useEffect)(()=>{en?em(en):j([]),eo("banco_conta_id","")},[en,eo]);let ex=async()=>{try{let{data:e,error:o}=await i.O.from("empresas").select("id, nome").eq("ativo",!0).order("nome");if(o)throw o;g(e||[])}catch(e){console.error("Erro ao carregar empresas:",e),ed("Erro ao carregar lista de empresas","error")}},eu=async e=>{try{let o=i.O.from("bancos_contas").select("*").eq("ativo",!0).order("banco_nome");e&&(o=o.eq("empresa_id",e));let{data:t,error:r}=await o;if(r)throw r;y(t||[])}catch(e){console.error("Erro ao carregar contas banc\xe1rias:",e),ed("Erro ao carregar contas banc\xe1rias","error")}},em=async e=>{try{let{data:o,error:t}=await i.O.from("bancos_contas").select("\n          *,\n          bancos!bancos_contas_banco_id_fkey (\n            nome\n          )\n        ").eq("ativo",!0).eq("empresa_id",e);if(t)throw t;let r=(o||[]).map(e=>{var o;return{...e,banco_nome_real:(null===(o=e.bancos)||void 0===o?void 0:o.nome)||e.banco_nome,bancos:Array.isArray(e.bancos)?e.bancos.length>0?e.bancos[0]:null:e.bancos}});r.sort((e,o)=>{let t=(e.banco_nome_real||"").toLowerCase(),r=(o.banco_nome_real||"").toLowerCase();if(t!==r)return t.localeCompare(r);let n=(e.agencia||"").toLowerCase(),i=(o.agencia||"").toLowerCase();if(n!==i)return n.localeCompare(i);let a=(e.numero_conta||"").toLowerCase(),s=(o.numero_conta||"").toLowerCase();return a.localeCompare(s)}),j(r)}catch(e){console.error("Erro ao carregar contas banc\xe1rias do modal:",e),ed("Erro ao carregar contas banc\xe1rias","error")}},eh=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{0===e?(S(!0),P(0)):w(!0);let r=100*e,{data:n,error:a,count:s}=await i.O.from("movimentos_bancarios").select("\n          *,\n          bancos_contas!movimentos_bancarios_banco_conta_id_fkey (\n            numero_conta,\n            banco_nome,\n            empresas!bancos_contas_empresa_id_fkey (nome)\n          )\n        ",{count:"exact"}).range(r,r+100-1).order("data_movimento",{ascending:!1}).order("created_at",{ascending:!1});if(a)throw a;let l=(n||[]).map(e=>({...e,bancos_contas:e.bancos_contas?{...e.bancos_contas,empresas:Array.isArray(e.bancos_contas.empresas)?e.bancos_contas.empresas.length>0?e.bancos_contas.empresas[0]:null:e.bancos_contas.empresas}:null}));t?o(e=>[...e,...l]):o(l),K(s||0),G((s||0)>(e+1)*100),P(e)}catch(e){console.error("Erro ao carregar movimentos:",e),ed("Erro ao carregar movimentos banc\xe1rios","error")}finally{S(!1),w(!1)}},eg=async e=>{try{let{data:o,error:t}=await i.O.rpc("obter_ultima_data_fechamento",{p_banco_conta_id:e.banco_conta_id});if(t&&"PGRST116"!==t.code){console.error("Erro ao verificar fechamento:",t),ed("Erro ao verificar data de fechamento","error");return}if(o&&e.data_movimento<=o){ed("N\xe3o \xe9 permitido lan\xe7ar movimentos em data igual ou anterior ao \xfaltimo fechamento (".concat(new Date(o).toLocaleDateString("pt-BR"),")"),"warning");return}let r={banco_conta_id:e.banco_conta_id,tipo_movimento:e.tipo_movimento,data_movimento:e.data_movimento,valor:parseFloat(e.valor),historico:e.historico||null,documento:e.documento||null,conciliado:!1};if(z){let{error:e}=await i.O.from("movimentos_bancarios").update(r).eq("id",z);if(e)throw Error("Erro ao atualizar movimento: ".concat(e.message));ed("Movimento atualizado com sucesso!","success")}else{let{error:e}=await i.O.from("movimentos_bancarios").insert([r]);if(e)throw Error("Erro ao criar movimento: ".concat(e.message));ed("Movimento criado com sucesso!","success")}ey(),eh()}catch(e){console.error("Erro ao salvar movimento:",e),ed(e.message||"Erro desconhecido ao salvar movimento","error")}},eb=e=>{A(e.id);let o=f.find(o=>o.id===e.banco_conta_id);eo("empresa_id",(null==o?void 0:o.empresa_id)||""),eo("banco_conta_id",e.banco_conta_id),eo("tipo_movimento",e.tipo_movimento),eo("data_movimento",e.data_movimento),eo("valor",e.valor.toString()),eo("historico",e.historico||""),eo("documento",e.documento||""),ea(e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),k(!0)},ef=async e=>{if(confirm("Tem certeza que deseja excluir este movimento?"))try{let{data:o,error:t}=await i.O.from("movimentos_bancarios").select("banco_conta_id, data_movimento").eq("id",e).single();if(t)throw t;let{data:r,error:n}=await i.O.rpc("obter_ultima_data_fechamento",{p_banco_conta_id:o.banco_conta_id});if(n&&"PGRST116"!==n.code)throw n;if(r&&o.data_movimento<=r){ed("N\xe3o \xe9 permitido excluir movimentos em data igual ou anterior ao \xfaltimo fechamento (".concat(new Date(r).toLocaleDateString("pt-BR"),")"),"warning");return}let{error:a}=await i.O.from("movimentos_bancarios").delete().eq("id",e);if(a)throw a;ed("Movimento exclu\xeddo com sucesso!","success"),eh()}catch(e){console.error("Erro ao excluir movimento:",e),ed((null==e?void 0:e.message)||"Erro ao excluir movimento banc\xe1rio","error")}},ey=()=>{k(!1),A(null),j([]),ea(""),ee()},ev=e.filter(e=>"ENTRADA"===e.tipo_movimento||"TRANSFERENCIA_RECEBIDA"===e.tipo_movimento).reduce((e,o)=>e+o.valor,0),ej=e.filter(e=>"SAIDA"===e.tipo_movimento||"TRANSFERENCIA_ENVIADA"===e.tipo_movimento).reduce((e,o)=>e+o.valor,0),e_=ev-ej,eS=e.filter(e=>{var o,t,r,n,i,a;let s=f.find(o=>o.id===e.banco_conta_id),l=!I||(null==s?void 0:s.empresa_id)===I,d=!B||e.banco_conta_id===B,c=!W||e.tipo_movimento===W,p=!M||e.data_movimento>=M,x=!L||e.data_movimento<=L,u=!E||(null===(t=e.bancos_contas)||void 0===t?void 0:null===(o=t.empresas)||void 0===o?void 0:o.nome.toLowerCase().includes(E.toLowerCase()))||(null===(r=e.bancos_contas)||void 0===r?void 0:r.banco_nome.toLowerCase().includes(E.toLowerCase()))||(null===(n=e.bancos_contas)||void 0===n?void 0:n.numero_conta.toLowerCase().includes(E.toLowerCase()))||(null===(i=e.historico)||void 0===i?void 0:i.toLowerCase().includes(E.toLowerCase()))||(null===(a=e.documento)||void 0===a?void 0:a.toLowerCase().includes(E.toLowerCase()));return l&&d&&c&&p&&x&&u}),eC=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),ew=e=>new Date(e+"T00:00:00").toLocaleDateString("pt-BR"),eT=e=>{switch(e){case"ENTRADA":return{bg:"#dcfce7",color:"#166534",label:"Entrada"};case"SAIDA":return{bg:"#fee2e2",color:"#991b1b",label:"Sa\xedda"};case"TRANSFERENCIA_ENVIADA":return{bg:"#fef3c7",color:"#92400e",label:"Transf. Enviada"};case"TRANSFERENCIA_RECEBIDA":return{bg:"#dbeafe",color:"#1e40af",label:"Transf. Recebida"};default:return{bg:"#f3f4f6",color:"#374151",label:e}}};return(0,r.jsxs)("div",{style:{padding:"24px",maxWidth:"1400px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#1f2937",marginBottom:"4px"},children:"Movimentos Banc\xe1rios"}),(0,r.jsx)("p",{style:{fontSize:"14px",color:"#6b7280"},children:"Gerencie entradas e sa\xeddas das contas banc\xe1rias"})]}),(0,r.jsxs)("button",{onClick:()=>{A(null),j([]),ea(""),ee({empresa_id:"",banco_conta_id:"",tipo_movimento:"ENTRADA",data_movimento:"",valor:"",historico:"",documento:""}),k(!0)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",backgroundColor:"#1555D6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1044b5",onMouseOut:e=>e.currentTarget.style.backgroundColor="#1555D6",children:[(0,r.jsx)(d.Z,{style:{width:"20px",height:"20px"}}),"Novo Movimento"]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"24px"},children:[(0,r.jsx)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb"},children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"8px"},children:"Total Entradas"}),(0,r.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#10b981"},children:eC(ev)})]}),(0,r.jsx)("div",{style:{width:"48px",height:"48px",backgroundColor:"#dcfce7",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(l.Z,{style:{width:"24px",height:"24px",color:"#10b981"}})})]})}),(0,r.jsx)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb"},children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"8px"},children:"Total Sa\xeddas"}),(0,r.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#ef4444"},children:eC(ej)})]}),(0,r.jsx)("div",{style:{width:"48px",height:"48px",backgroundColor:"#fee2e2",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(s.Z,{style:{width:"24px",height:"24px",color:"#ef4444"}})})]})}),(0,r.jsx)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb"},children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"8px"},children:"Saldo L\xedquido"}),(0,r.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:e_>=0?"#1555D6":"#ef4444"},children:eC(e_)})]}),(0,r.jsx)("div",{style:{width:"48px",height:"48px",backgroundColor:e_>=0?"#dbeafe":"#fee2e2",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(a.Z,{style:{width:"24px",height:"24px",color:e_>=0?"#1555D6":"#ef4444"}})})]})})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb",marginBottom:"16px"},children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Empresa"}),(0,r.jsxs)("select",{value:I,onChange:e=>D(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,r.jsx)("option",{value:"",children:"Todas as empresas"}),t.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Conta Banc\xe1ria"}),(0,r.jsxs)("select",{value:B,onChange:e=>N(e.target.value),disabled:!I,style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:I?"pointer":"not-allowed",opacity:I?1:.6},children:[(0,r.jsx)("option",{value:"",children:I?"Todas as contas":"Selecione uma conta"}),f.filter(e=>!I||e.empresa_id===I).map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.banco_nome||"Banco"," - Ag: ",e.agencia," - Conta: ",e.numero_conta]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Tipo"}),(0,r.jsxs)("select",{value:W,onChange:e=>O(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,r.jsx)("option",{value:"",children:"Todos os tipos"}),(0,r.jsx)("option",{value:"ENTRADA",children:"Entrada"}),(0,r.jsx)("option",{value:"SAIDA",children:"Sa\xedda"}),(0,r.jsx)("option",{value:"TRANSFERENCIA_ENVIADA",children:"Transf. Enviada"}),(0,r.jsx)("option",{value:"TRANSFERENCIA_RECEBIDA",children:"Transf. Recebida"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Data Inicial"}),(0,r.jsx)("input",{type:"date",value:M,onChange:e=>Z(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Data Final"}),(0,r.jsx)("input",{type:"date",value:L,onChange:e=>F(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"}})]})]}),(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)(c.Z,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"20px",color:"#9ca3af"}}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar por empresa, banco, conta, hist\xf3rico ou documento...",value:E,onChange:e=>R(e.target.value),style:{width:"100%",padding:"10px 12px 10px 40px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"}})]})]}),(0,r.jsx)("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden"},children:_?(0,r.jsx)("div",{style:{padding:"60px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f4f6",borderTop:"4px solid #1555D6",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):0===eS.length?(0,r.jsxs)("div",{style:{padding:"60px",textAlign:"center",color:"#6b7280"},children:[(0,r.jsx)("p",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"8px"},children:"Nenhum movimento encontrado"}),(0,r.jsx)("p",{style:{fontSize:"14px"},children:0===e.length?"Comece criando seu primeiro movimento banc\xe1rio":"Tente ajustar os filtros de busca"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{overflowX:"auto"},children:(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{backgroundColor:"#f9fafb"},children:[(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Empresa / Conta"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Tipo"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Valor"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Hist\xf3rico"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Documento"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px",width:"120px"},children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{children:eS.map((e,o)=>{var t,n,i,a;let s=eT(e.tipo_movimento);return(0,r.jsxs)("tr",{style:{borderTop:"1px solid #f3f4f6",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f9fafb",onMouseOut:e=>e.currentTarget.style.backgroundColor="white",children:[(0,r.jsx)("td",{style:{padding:"16px"},children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)(p.Z,{style:{width:"16px",height:"16px",color:"#9ca3af"}}),(0,r.jsx)("span",{style:{fontSize:"14px",color:"#374151"},children:ew(e.data_movimento)})]})}),(0,r.jsx)("td",{style:{padding:"16px"},children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937",marginBottom:"2px"},children:(null===(n=e.bancos_contas)||void 0===n?void 0:null===(t=n.empresas)||void 0===t?void 0:t.nome)||"N/A"}),(0,r.jsxs)("p",{style:{fontSize:"13px",color:"#6b7280"},children:[null===(i=e.bancos_contas)||void 0===i?void 0:i.banco_nome," â€¢ ",null===(a=e.bancos_contas)||void 0===a?void 0:a.numero_conta]})]})}),(0,r.jsx)("td",{style:{padding:"16px"},children:(0,r.jsx)("span",{style:{display:"inline-block",padding:"4px 12px",backgroundColor:s.bg,color:s.color,borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:s.label})}),(0,r.jsx)("td",{style:{padding:"16px",textAlign:"right"},children:(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"600",color:"ENTRADA"===e.tipo_movimento||"TRANSFERENCIA_RECEBIDA"===e.tipo_movimento?"#10b981":"#ef4444"},children:eC(e.valor)})}),(0,r.jsx)("td",{style:{padding:"16px"},children:(0,r.jsx)("span",{style:{fontSize:"14px",color:"#374151",display:"block",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.historico||"-"})}),(0,r.jsx)("td",{style:{padding:"16px"},children:(0,r.jsx)("span",{style:{fontSize:"14px",color:"#374151"},children:e.documento||"-"})}),(0,r.jsx)("td",{style:{padding:"16px"},children:(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[(0,r.jsx)("button",{onClick:()=>eb(e),style:{padding:"8px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#1555D6";let o=e.currentTarget.querySelector("svg");o&&(o.style.color="white")},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#f3f4f6";let o=e.currentTarget.querySelector("svg");o&&(o.style.color="#6b7280")},children:(0,r.jsx)(x.Z,{style:{width:"16px",height:"16px",color:"#6b7280"}})}),(0,r.jsx)("button",{onClick:()=>ef(e.id),style:{padding:"8px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#ef4444";let o=e.currentTarget.querySelector("svg");o&&(o.style.color="white")},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#f3f4f6";let o=e.currentTarget.querySelector("svg");o&&(o.style.color="#6b7280")},children:(0,r.jsx)(u.Z,{style:{width:"16px",height:"16px",color:"#6b7280"}})})]})})]},e.id)})})]})}),Y&&(0,r.jsx)("div",{style:{borderTop:"1px solid #e5e7eb",padding:"20px",textAlign:"center"},children:(0,r.jsx)("button",{onClick:()=>{eh(H+1,!0)},disabled:C,style:{padding:"12px 24px",backgroundColor:C?"#e5e7eb":"#1555D6",color:C?"#9ca3af":"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:C?"not-allowed":"pointer",transition:"all 0.2s",display:"inline-flex",alignItems:"center",gap:"8px"},onMouseOver:e=>{C||(e.currentTarget.style.backgroundColor="#1044b5")},onMouseOut:e=>{C||(e.currentTarget.style.backgroundColor="#1555D6")},children:C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{width:"16px",height:"16px",border:"2px solid #9ca3af",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Carregando..."]}):"Carregar Mais (".concat(e.length," de ").concat(U,")")})}),!Y&&e.length>0&&(0,r.jsxs)("div",{style:{borderTop:"1px solid #e5e7eb",padding:"16px",textAlign:"center",color:"#6b7280",fontSize:"14px"},children:["Todos os ",U," registros foram carregados"]})]})}),T&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:ey,children:(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{style:{padding:"24px",borderBottom:"1px solid #e5e7eb"},children:(0,r.jsx)("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:z?"Editar Movimento":"Novo Movimento"})}),(0,r.jsx)("form",{onSubmit:$(eg),style:{padding:"24px"},children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Empresa *"}),(0,r.jsxs)("select",{...Q("empresa_id"),style:{width:"100%",padding:"10px 12px",border:et.empresa_id?"1px solid #ef4444":"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer",backgroundColor:"white"},children:[(0,r.jsx)("option",{value:"",children:"Selecione uma empresa"}),t.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nome},e.id))]}),et.empresa_id&&(0,r.jsx)("span",{style:{fontSize:"12px",color:"#ef4444",marginTop:"4px",display:"block"},children:et.empresa_id.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Conta Banc\xe1ria *"}),(0,r.jsxs)("select",{...Q("banco_conta_id"),disabled:!en||0===v.length,style:{width:"100%",padding:"10px 12px",border:et.banco_conta_id?"1px solid #ef4444":"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:en&&0!==v.length?"pointer":"not-allowed",backgroundColor:en&&0!==v.length?"white":"#f9fafb",color:en&&0!==v.length?"#374151":"#9ca3af"},children:[(0,r.jsx)("option",{value:"",children:en?0===v.length?"Nenhuma conta dispon\xedvel":"Selecione uma conta":"Selecione uma empresa primeiro"}),v.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.banco_nome_real||e.banco_nome||"Banco"," - Ag: ",e.agencia," - Conta: ",e.numero_conta,e.tipo_conta?" (".concat(e.tipo_conta,")"):""]},e.id))]}),et.banco_conta_id&&(0,r.jsx)("span",{style:{fontSize:"12px",color:"#ef4444",marginTop:"4px",display:"block"},children:et.banco_conta_id.message})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Tipo *"}),(0,r.jsxs)("select",{...Q("tipo_movimento"),style:{width:"100%",padding:"10px 12px",border:et.tipo_movimento?"1px solid #ef4444":"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,r.jsx)("option",{value:"ENTRADA",children:"Entrada"}),(0,r.jsx)("option",{value:"SAIDA",children:"Sa\xedda"})]}),et.tipo_movimento&&(0,r.jsx)("span",{style:{fontSize:"12px",color:"#ef4444",marginTop:"4px",display:"block"},children:et.tipo_movimento.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Data *"}),(0,r.jsx)("input",{type:"date",...Q("data_movimento"),style:{width:"100%",padding:"10px 12px",border:et.data_movimento?"1px solid #ef4444":"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"all 0.2s"},onFocus:e=>{et.data_movimento||(e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)")},onBlur:e=>{e.currentTarget.style.borderColor=et.data_movimento?"#ef4444":"#e5e7eb",e.currentTarget.style.boxShadow="none"}}),et.data_movimento&&(0,r.jsx)("span",{style:{fontSize:"12px",color:"#ef4444",marginTop:"4px",display:"block"},children:et.data_movimento.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Valor *"}),(0,r.jsx)("input",{type:"text",value:ei,onChange:e=>{let o=e.target.value;ea(es(o)),eo("valor",el(o))},placeholder:"0,00",style:{width:"100%",padding:"10px 12px",border:et.valor?"1px solid #ef4444":"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"all 0.2s"},onFocus:e=>{et.valor||(e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)")},onBlur:e=>{e.currentTarget.style.borderColor=et.valor?"#ef4444":"#e5e7eb",e.currentTarget.style.boxShadow="none"}}),(0,r.jsx)("input",{type:"hidden",...Q("valor")}),et.valor&&(0,r.jsx)("span",{style:{fontSize:"12px",color:"#ef4444",marginTop:"4px",display:"block"},children:et.valor.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Hist\xf3rico"}),(0,r.jsx)("textarea",{...Q("historico"),rows:3,placeholder:"Descri\xe7\xe3o do movimento...",style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"all 0.2s",resize:"vertical",fontFamily:"inherit"},onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Documento"}),(0,r.jsx)("input",{...Q("documento"),placeholder:"N\xfamero do documento",style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"all 0.2s"},onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"8px"},children:[(0,r.jsx)("button",{type:"button",onClick:ey,style:{padding:"10px 20px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#e5e7eb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#f3f4f6",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#1555D6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1044b5",onMouseOut:e=>e.currentTarget.style.backgroundColor="#1555D6",children:z?"Atualizar":"Salvar"})]})]})})]})}),(0,r.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999,display:"flex",flexDirection:"column",gap:"12px",pointerEvents:"none"},children:q.map(e=>{let{borderColor:o,icon:t,iconColor:n}=ep(e.type);return(0,r.jsxs)("div",{style:{backgroundColor:"white",borderTop:"4px solid ".concat(o),padding:"16px 20px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",gap:"12px",minWidth:"400px",animation:"scaleIn 0.3s ease-out"},children:[(0,r.jsx)(t,{style:{width:"24px",height:"24px",flexShrink:0,color:n}}),(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",flex:1,color:"#374151"},children:e.message})]},e.id)})}),(0,r.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n        @keyframes scaleIn {\n          from {\n            transform: scale(0.8);\n            opacity: 0;\n          }\n          to {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n      "})]})}},1180:function(e,o,t){"use strict";t.d(o,{O:function(){return r}});let r=(0,t(20046).eI)("https://tkefmbjqiljejkmwrwsw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRrZWZtYmpxaWxqZWprbXdyd3N3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyNzEyODAsImV4cCI6MjA3NTg0NzI4MH0.fwV8APDBs7YTx3ap8km-qnhXOJx0EcXX0P68eLXgEsU",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},db:{schema:"sodcapital"}})},24241:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},51077:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},29162:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},53225:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])}},function(e){e.O(0,[46,589,971,23,744],function(){return e(e.s=77757)}),_N_E=e.O()}]);