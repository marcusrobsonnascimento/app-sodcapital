(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[973],{59988:function(e,t,o){Promise.resolve().then(o.bind(o,34917))},34917:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return S}});var i=o(57437),n=o(2265),a=o(1180),r=o(13231),l=o(40933),s=o(78030);let c=(0,s.Z)("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var d=o(76780),p=o(66706);let x=(0,s.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var u=o(37164),f=o(54817);let h=(0,s.Z)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var g=o(74697);let m=(0,s.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var b=o(71935);let y=e=>{try{let t;let o=e.match(/<BANKID>(\d+)/),i=e.match(/<ACCTID>(\d+)/),n=e.match(/<DTSTART>(\d{8})/),a=e.match(/<DTEND>(\d{8})/),r=e.match(/<BALAMT>([\d.-]+)/),l=o?o[1]:"",s=i?i[1]:"",c=n?v(n[1]):"",d=a?v(a[1]):"",p=r?parseFloat(r[1]):0,x=[],u=/<STMTTRN>([\s\S]*?)<\/STMTTRN>/g;for(;null!==(t=u.exec(e));){let e=t[1],o=e.match(/<TRNTYPE>(\w+)/),i=e.match(/<DTPOSTED>(\d{8})/),n=e.match(/<TRNAMT>([\d.-]+)/),a=e.match(/<FITID>(\S+)/),r=e.match(/<CHECKNUM>(\S+)/),l=e.match(/<MEMO>([^\n<]+)/);o&&i&&n&&a&&x.push({fitid:a[1],data:v(i[1]),tipo:o[1],valor:parseFloat(n[1]),memo:l?l[1].trim():"",checknum:r?r[1]:""})}return{banco:l,conta:s,dataInicio:c,dataFim:d,saldoFinal:p,transacoes:x}}catch(e){return console.error("Erro ao parsear OFX:",e),null}},v=e=>"".concat(e.substring(0,4),"-").concat(e.substring(4,6),"-").concat(e.substring(6,8)),j=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),C=e=>{if(!e)return"-";let[t,o,i]=e.split("-");return"".concat(i,"/").concat(o,"/").concat(t)},_=e=>({"001":"Banco do Brasil","033":"Santander",104:"Caixa Econ\xf4mica",237:"Bradesco",341:"Ita\xfa",356:"Banco Real",389:"Banco Mercantil",399:"HSBC",422:"Safra",453:"Banco Rural",633:"Rendimento",652:"Ita\xfa Unibanco",745:"Citibank","0341":"Ita\xfa"})[e]||"Banco ".concat(e);function S(){let[e,t]=(0,n.useState)([]),[o,s]=(0,n.useState)([]),[v,S]=(0,n.useState)([]),[w,k]=(0,n.useState)([]),[z,I]=(0,n.useState)(""),[E,O]=(0,n.useState)(""),[A,D]=(0,n.useState)(null),[R,N]=(0,n.useState)(null),[T,q]=(0,n.useState)(""),[B,W]=(0,n.useState)(!1),[Z,M]=(0,n.useState)(!1),[L,P]=(0,n.useState)(!1),[F,V]=(0,n.useState)(!1),[X,G]=(0,n.useState)(""),[H,J]=(0,n.useState)(""),[U,Y]=(0,n.useState)(!1),[K,$]=(0,n.useState)(null),[Q,ee]=(0,n.useState)([]),[et,eo]=(0,n.useState)({show:!1,message:"",type:"success"}),[ei,en]=(0,n.useState)(!1),[ea,er]=(0,n.useState)(""),el=async()=>{try{let{data:e,error:o}=await a.O.from("empresas").select("id, nome").eq("ativo",!0).order("nome");if(o)throw o;t(e||[])}catch(e){console.error("Erro ao carregar empresas:",e)}},es=async e=>{try{let{data:t,error:o}=await a.O.from("bancos_contas").select("\n          id,\n          empresa_id,\n          org_id,\n          numero_conta,\n          agencia,\n          tipo_conta,\n          bancos(nome)\n        ").eq("empresa_id",e).eq("ativo",!0).eq("tipo_conta","CC").order("numero_conta");if(o)throw o;let i=(t||[]).map(e=>{var t,o;return{id:e.id,empresa_id:e.empresa_id,org_id:e.org_id,banco_nome:Array.isArray(e.bancos)?null===(t=e.bancos[0])||void 0===t?void 0:t.nome:(null===(o=e.bancos)||void 0===o?void 0:o.nome)||"Banco",numero_conta:e.numero_conta,agencia:e.agencia,tipo_conta:e.tipo_conta}});s(i)}catch(e){console.error("Erro ao carregar contas:",e)}},ec=async e=>{try{M(!0);let{data:t,error:o}=await a.O.from("extratos_bancarios").select("*").eq("banco_conta_id",e).order("data_lancamento",{ascending:!1});if(o)throw o;let i=(t||[]).map(e=>e.id),n=new Map;if(i.length>0){let{data:e}=await a.O.from("conciliacoes").select("*").in("extrato_id",i);null==e||e.forEach(e=>{n.set(e.extrato_id,e)})}let r=(t||[]).map(e=>({...e,conciliacao:n.get(e.id)||null}));S(r)}catch(e){console.error("Erro ao carregar extratos:",e)}finally{M(!1)}},ed=async(e,t,o)=>{try{let i=a.O.from("lancamentos").select("\n          id,\n          tipo,\n          valor_liquido,\n          data_vencimento,\n          data_liquidacao,\n          status,\n          contrapartes(nome)\n        ").eq("banco_conta_id",e).order("data_vencimento",{ascending:!1});t&&(i=i.gte("data_vencimento",t)),o&&(i=i.lte("data_vencimento",o));let{data:n,error:r}=await i;if(r)throw r;let l=(n||[]).map(e=>{var t,o;return{id:e.id,tipo:e.tipo,valor_liquido:e.valor_liquido,data_vencimento:e.data_vencimento,data_liquidacao:e.data_liquidacao,status:e.status,contraparte_nome:Array.isArray(e.contrapartes)?null===(t=e.contrapartes[0])||void 0===t?void 0:t.nome:(null===(o=e.contrapartes)||void 0===o?void 0:o.nome)||""}});k(l)}catch(e){console.error("Erro ao carregar lan\xe7amentos:",e)}};(0,n.useEffect)(()=>{el()},[]),(0,n.useEffect)(()=>{z&&(es(z),O(""),D(null),N(null),S([]))},[z]),(0,n.useEffect)(()=>{E&&(D(o.find(e=>e.id===E)||null),ec(E),ed(E))},[E]);let ep=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";eo({show:!0,message:e,type:t}),setTimeout(()=>eo({show:!1,message:"",type:"success"}),4e3)},ex=e=>{er(e),en(!0)},eu=async e=>{e.preventDefault(),W(!1);let t=e.dataTransfer.files;t.length>0&&await eh(t[0])},ef=async e=>{let t=e.target.files;t&&t.length>0&&await eh(t[0])},eh=async e=>{if(!e.name.toLowerCase().endsWith(".ofx")){ex("Por favor, selecione um arquivo .OFX v\xe1lido");return}if(!E){ex("Selecione uma conta banc\xe1ria antes de importar o arquivo");return}P(!0),q(e.name);try{let t=await e.text(),o=y(t);if(!o){ex("N\xe3o foi poss\xedvel ler o arquivo OFX. Verifique se o formato est\xe1 correto.");return}if(0===o.transacoes.length){ex("Nenhuma transa\xe7\xe3o encontrada no arquivo OFX.");return}N(o),await ed(E,o.dataInicio,o.dataFim),ep("Arquivo processado com sucesso! ".concat(o.transacoes.length," transa\xe7\xf5es encontradas."),"success")}catch(e){console.error("Erro ao processar arquivo:",e),ex("Erro ao processar o arquivo. Tente novamente.")}finally{P(!1)}},eg=async()=>{if(R&&E&&A){V(!0);try{let e=A.org_id;for(let t of R.transacoes.map(t=>({org_id:e,banco_conta_id:E,data_lancamento:t.data,historico:t.memo,valor:t.valor,documento_ref:t.fitid}))){let{data:e}=await a.O.from("extratos_bancarios").select("id").eq("banco_conta_id",t.banco_conta_id).eq("documento_ref",t.documento_ref).single();if(!e){let{error:e}=await a.O.from("extratos_bancarios").insert(t);e&&console.error("Erro ao inserir extrato:",e)}}await em(),await ec(E),ep("Transa\xe7\xf5es importadas e concilia\xe7\xe3o autom\xe1tica realizada!","success"),N(null),q("")}catch(e){console.error("Erro ao importar:",e),ex("Erro ao importar transa\xe7\xf5es: ".concat(e.message))}finally{V(!1)}}},em=async()=>{if(E&&A)try{let{data:e}=await a.O.from("extratos_bancarios").select("*").eq("banco_conta_id",E);if(!e||0===e.length)return;let{data:t}=await a.O.from("conciliacoes").select("extrato_id").eq("banco_conta_id",E),o=new Set((t||[]).map(e=>e.extrato_id)),i=e.filter(e=>!o.has(e.id));if(0===i.length)return;let{data:n}=await a.O.from("lancamentos").select("id, tipo, valor_liquido, data_liquidacao, data_vencimento").eq("banco_conta_id",E).eq("status","PAGO_RECEBIDO");if(!n)return;for(let e of i){let t=Math.abs(e.valor),o=e.valor>0,i=n.find(i=>{let n=Math.abs(i.valor_liquido),a=o&&"Entrada"===i.tipo||!o&&"Saida"===i.tipo,r=i.data_liquidacao===e.data_lancamento||i.data_vencimento===e.data_lancamento;return .01>Math.abs(n-t)&&a&&r});if(i){await a.O.from("conciliacoes").insert({org_id:A.org_id,banco_conta_id:E,extrato_id:e.id,lancamento_id:i.id,status:"CONCILIADO"});continue}let r=new Date(e.data_lancamento),l=n.find(e=>{let i=Math.abs(e.valor_liquido),n=o&&"Entrada"===e.tipo||!o&&"Saida"===e.tipo,a=new Date(e.data_liquidacao||e.data_vencimento),l=Math.abs((r.getTime()-a.getTime())/864e5);return .01>Math.abs(i-t)&&n&&l<=3});l&&await a.O.from("conciliacoes").insert({org_id:A.org_id,banco_conta_id:E,extrato_id:e.id,lancamento_id:l.id,status:"CONCILIADO"})}}catch(e){console.error("Erro na concilia\xe7\xe3o autom\xe1tica:",e)}},eb=e=>{$(e);let t=e.valor>0?"Entrada":"Saida";ee(w.filter(e=>e.tipo===t)),Y(!0)},ey=async e=>{if(K&&A)try{let{data:t}=await a.O.from("conciliacoes").select("id").eq("extrato_id",K.id).single();if(t){let{error:o}=await a.O.from("conciliacoes").update({lancamento_id:e.id,status:"CONCILIADO"}).eq("id",t.id);if(o)throw o}else{let{error:t}=await a.O.from("conciliacoes").insert({org_id:A.org_id,banco_conta_id:E,extrato_id:K.id,lancamento_id:e.id,status:"CONCILIADO"});if(t)throw t}ep("Transa\xe7\xe3o vinculada com sucesso!","success"),Y(!1),await ec(E)}catch(e){ex("Erro ao vincular: ".concat(e.message))}},ev=async e=>{if(A)try{let{data:t}=await a.O.from("conciliacoes").select("id").eq("extrato_id",e.id).single();if(t){let{error:e}=await a.O.from("conciliacoes").update({status:"IGNORADO",lancamento_id:null}).eq("id",t.id);if(e)throw e}else{let{error:t}=await a.O.from("conciliacoes").insert({org_id:A.org_id,banco_conta_id:E,extrato_id:e.id,lancamento_id:null,status:"IGNORADO"});if(t)throw t}ep("Transa\xe7\xe3o marcada como ignorada","success"),await ec(E)}catch(e){ex("Erro ao ignorar: ".concat(e.message))}},ej=async e=>{if(e.conciliacao)try{let{error:t}=await a.O.from("conciliacoes").delete().eq("id",e.conciliacao.id);if(t)throw t;ep("Concilia\xe7\xe3o desfeita","success"),await ec(E)}catch(e){ex("Erro ao desfazer: ".concat(e.message))}},eC=v.filter(e=>{var t,o,i;let n=(null===(t=e.conciliacao)||void 0===t?void 0:t.status)||"PENDENTE";if(X&&n!==X)return!1;if(H){let t=H.toLowerCase();return(null===(o=e.historico)||void 0===o?void 0:o.toLowerCase().includes(t))||(null===(i=e.documento_ref)||void 0===i?void 0:i.toLowerCase().includes(t))}return!0}),e_={total:v.length,conciliados:v.filter(e=>{var t;return(null===(t=e.conciliacao)||void 0===t?void 0:t.status)==="CONCILIADO"}).length,pendentes:v.filter(e=>!e.conciliacao||"PENDENTE"===e.conciliacao.status).length,ignorados:v.filter(e=>{var t;return(null===(t=e.conciliacao)||void 0===t?void 0:t.status)==="IGNORADO"}).length,divergentes:v.filter(e=>{var t;return(null===(t=e.conciliacao)||void 0===t?void 0:t.status)==="DIVERGENTE"}).length},eS=e=>{var t;switch((null===(t=e.conciliacao)||void 0===t?void 0:t.status)||"PENDENTE"){case"CONCILIADO":return{bg:"#dcfce7",color:"#166534",icon:r.Z,label:"Conciliado"};case"PENDENTE":return{bg:"#fef3c7",color:"#92400e",icon:l.Z,label:"Pendente"};case"IGNORADO":return{bg:"#f3f4f6",color:"#6b7280",icon:c,label:"Ignorado"};case"DIVERGENTE":return{bg:"#fee2e2",color:"#991b1b",icon:d.Z,label:"Divergente"};default:return{bg:"#f3f4f6",color:"#374151",icon:l.Z,label:"Pendente"}}};return(0,i.jsxs)("div",{style:{padding:"24px",backgroundColor:"#f8fafc",minHeight:"100vh"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b",marginBottom:"4px"},children:"Concilia\xe7\xe3o Banc\xe1ria"}),(0,i.jsx)("p",{style:{fontSize:"14px",color:"#64748b"},children:"Importe arquivos OFX e concilie com os lan\xe7amentos do sistema"})]}),v.length>0&&(0,i.jsxs)("button",{onClick:()=>ec(E),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#1555D6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[(0,i.jsx)(p.Z,{size:16}),"Atualizar"]})]}),(0,i.jsx)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"6px"},children:"Empresa *"}),(0,i.jsxs)("select",{value:z,onChange:e=>I(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},children:[(0,i.jsx)("option",{value:"",children:"Selecione uma empresa"}),e.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"6px"},children:"Conta Banc\xe1ria *"}),(0,i.jsxs)("select",{value:E,onChange:e=>O(e.target.value),disabled:!z,style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",cursor:z?"pointer":"not-allowed",backgroundColor:z?"white":"#f9fafb"},children:[(0,i.jsx)("option",{value:"",children:"Selecione uma conta"}),o.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.banco_nome," - Ag: ",e.agencia," - CC: ",e.numero_conta]},e.id))]})]})]})}),E&&(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"16px"},children:"Importar Arquivo OFX"}),(0,i.jsxs)("div",{onDragOver:e=>{e.preventDefault(),W(!0)},onDragLeave:e=>{e.preventDefault(),W(!1)},onDrop:eu,style:{border:"2px dashed ".concat(B?"#1555D6":"#d1d5db"),borderRadius:"12px",padding:"40px",textAlign:"center",backgroundColor:B?"#eff6ff":"#f9fafb",transition:"all 0.2s",cursor:"pointer"},onClick:()=>{var e;return null===(e=document.getElementById("fileInput"))||void 0===e?void 0:e.click()},children:[(0,i.jsx)("input",{id:"fileInput",type:"file",accept:".ofx",onChange:ef,style:{display:"none"}}),L?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[(0,i.jsx)(p.Z,{size:40,style:{color:"#1555D6",animation:"spin 1s linear infinite"}}),(0,i.jsx)("p",{style:{fontSize:"14px",color:"#6b7280"},children:"Processando arquivo..."})]}):R?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[(0,i.jsx)(r.Z,{size:40,style:{color:"#10b981"}}),(0,i.jsx)("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:T}),(0,i.jsxs)("p",{style:{fontSize:"13px",color:"#6b7280"},children:[R.transacoes.length," transa\xe7\xf5es • ",_(R.banco)," • Conta: ",R.conta]}),(0,i.jsxs)("p",{style:{fontSize:"13px",color:"#6b7280"},children:["Per\xedodo: ",C(R.dataInicio)," a ",C(R.dataFim)," • Saldo: ",j(R.saldoFinal)]})]}):(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[(0,i.jsx)(x,{size:40,style:{color:"#9ca3af"}}),(0,i.jsxs)("p",{style:{fontSize:"14px",color:"#6b7280"},children:["Arraste o arquivo OFX aqui ou ",(0,i.jsx)("span",{style:{color:"#1555D6",fontWeight:"600"},children:"clique para selecionar"})]}),(0,i.jsx)("p",{style:{fontSize:"12px",color:"#9ca3af"},children:"Formatos aceitos: .OFX (Open Financial Exchange)"})]})]}),R&&(0,i.jsxs)("div",{style:{marginTop:"16px",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[(0,i.jsx)("button",{onClick:()=>{N(null),q("")},style:{padding:"10px 20px",backgroundColor:"white",color:"#6b7280",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Cancelar"}),(0,i.jsx)("button",{onClick:eg,disabled:F,style:{padding:"10px 20px",backgroundColor:F?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:F?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:F?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{size:16,style:{animation:"spin 1s linear infinite"}}),"Importando..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{size:16}),"Importar e Conciliar"]})})]})]}),v.length>0&&(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"16px",marginBottom:"24px"},children:[(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Total Importado"}),(0,i.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:e_.total})]}),(0,i.jsxs)("div",{style:{backgroundColor:"#dcfce7",padding:"16px",borderRadius:"12px"},children:[(0,i.jsx)("p",{style:{fontSize:"12px",color:"#166534",marginBottom:"4px"},children:"Conciliados"}),(0,i.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#166534"},children:e_.conciliados})]}),(0,i.jsxs)("div",{style:{backgroundColor:"#fef3c7",padding:"16px",borderRadius:"12px"},children:[(0,i.jsx)("p",{style:{fontSize:"12px",color:"#92400e",marginBottom:"4px"},children:"Pendentes"}),(0,i.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#92400e"},children:e_.pendentes})]}),(0,i.jsxs)("div",{style:{backgroundColor:"#f3f4f6",padding:"16px",borderRadius:"12px"},children:[(0,i.jsx)("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Ignorados"}),(0,i.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#6b7280"},children:e_.ignorados})]}),(0,i.jsxs)("div",{style:{backgroundColor:"#fee2e2",padding:"16px",borderRadius:"12px"},children:[(0,i.jsx)("p",{style:{fontSize:"12px",color:"#991b1b",marginBottom:"4px"},children:"Divergentes"}),(0,i.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#991b1b"},children:e_.divergentes})]})]}),v.length>0&&(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"16px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"16px",alignItems:"center"},children:[(0,i.jsxs)("div",{style:{position:"relative",flex:1},children:[(0,i.jsx)(f.Z,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),(0,i.jsx)("input",{type:"text",placeholder:"Buscar por descri\xe7\xe3o...",value:H,onChange:e=>J(e.target.value),style:{width:"100%",padding:"10px 12px 10px 40px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}})]}),(0,i.jsxs)("select",{value:X,onChange:e=>G(e.target.value),style:{padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",cursor:"pointer",minWidth:"160px"},children:[(0,i.jsx)("option",{value:"",children:"Todos os Status"}),(0,i.jsx)("option",{value:"CONCILIADO",children:"Conciliados"}),(0,i.jsx)("option",{value:"PENDENTE",children:"Pendentes"}),(0,i.jsx)("option",{value:"IGNORADO",children:"Ignorados"}),(0,i.jsx)("option",{value:"DIVERGENTE",children:"Divergentes"})]})]}),v.length>0&&(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Data"}),(0,i.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Descri\xe7\xe3o"}),(0,i.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Tipo"}),(0,i.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Valor"}),(0,i.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Status"}),(0,i.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"A\xe7\xf5es"})]})}),(0,i.jsx)("tbody",{children:eC.map(e=>{var t;let o=eS(e),n=o.icon,a=e.valor>0,r=(null===(t=e.conciliacao)||void 0===t?void 0:t.status)||"PENDENTE";return(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,i.jsx)("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#374151"},children:C(e.data_lancamento)}),(0,i.jsx)("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#374151",maxWidth:"300px"},children:e.historico||"-"}),(0,i.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(0,i.jsx)("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",backgroundColor:a?"#dcfce7":"#fee2e2",color:a?"#166534":"#991b1b"},children:a?"Cr\xe9dito":"D\xe9bito"})}),(0,i.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontSize:"14px",fontWeight:"600",color:a?"#166534":"#991b1b",whiteSpace:"nowrap"},children:j(Math.abs(e.valor))}),(0,i.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(0,i.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",backgroundColor:o.bg,color:o.color},children:[(0,i.jsx)(n,{size:12}),o.label]})}),(0,i.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(0,i.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:["PENDENTE"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{onClick:()=>eb(e),title:"Vincular manualmente",style:{padding:"6px 10px",backgroundColor:"#1555D6",color:"white",border:"none",borderRadius:"6px",fontSize:"11px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[(0,i.jsx)(h,{size:12}),"Vincular"]}),(0,i.jsxs)("button",{onClick:()=>ev(e),title:"Ignorar transa\xe7\xe3o",style:{padding:"6px 10px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"11px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[(0,i.jsx)(c,{size:12}),"Ignorar"]})]}),("CONCILIADO"===r||"IGNORADO"===r)&&(0,i.jsxs)("button",{onClick:()=>ej(e),title:"Desfazer",style:{padding:"6px 10px",backgroundColor:"#fef3c7",color:"#92400e",border:"1px solid #fcd34d",borderRadius:"6px",fontSize:"11px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[(0,i.jsx)(p.Z,{size:12}),"Desfazer"]})]})})]},e.id)})})]}),0===eC.length&&(0,i.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"Nenhuma transa\xe7\xe3o encontrada com os filtros aplicados"})]}),U&&K&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:()=>Y(!1),children:(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",width:"90%",maxWidth:"800px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,i.jsx)("h2",{style:{fontSize:"18px",fontWeight:"700",color:"#1e293b"},children:"Vincular Transa\xe7\xe3o"}),(0,i.jsx)("button",{onClick:()=>Y(!1),style:{background:"none",border:"none",cursor:"pointer"},children:(0,i.jsx)(g.Z,{size:24,style:{color:"#6b7280"}})})]}),(0,i.jsxs)("div",{style:{backgroundColor:"#f8fafc",padding:"16px",borderRadius:"8px",marginBottom:"20px"},children:[(0,i.jsx)("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Transa\xe7\xe3o do Extrato Banc\xe1rio"}),(0,i.jsx)("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:K.historico||"Sem descri\xe7\xe3o"}),(0,i.jsxs)("div",{style:{display:"flex",gap:"24px"},children:[(0,i.jsxs)("p",{style:{fontSize:"13px",color:"#6b7280"},children:["Data: ",(0,i.jsx)("strong",{children:C(K.data_lancamento)})]}),(0,i.jsxs)("p",{style:{fontSize:"13px",color:K.valor>0?"#166534":"#991b1b"},children:["Valor: ",(0,i.jsx)("strong",{children:j(Math.abs(K.valor))})]})]})]}),(0,i.jsxs)("div",{style:{flex:1,overflow:"auto"},children:[(0,i.jsx)("p",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"12px"},children:"Selecione o lan\xe7amento do sistema para vincular:"}),0===Q.length?(0,i.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"Nenhum lan\xe7amento compat\xedvel encontrado"}):(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{backgroundColor:"#f9fafb"},children:[(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",fontSize:"11px",color:"#6b7280"},children:"Data Venc."}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",fontSize:"11px",color:"#6b7280"},children:"Contraparte"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"right",fontSize:"11px",color:"#6b7280"},children:"Valor"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"center",fontSize:"11px",color:"#6b7280"},children:"Status"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"center",fontSize:"11px",color:"#6b7280"},children:"A\xe7\xe3o"})]})}),(0,i.jsx)("tbody",{children:Q.map(e=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,i.jsx)("td",{style:{padding:"10px",fontSize:"13px"},children:C(e.data_vencimento)}),(0,i.jsx)("td",{style:{padding:"10px",fontSize:"13px",maxWidth:"200px"},children:e.contraparte_nome}),(0,i.jsx)("td",{style:{padding:"10px",fontSize:"13px",textAlign:"right",fontWeight:"600"},children:j(e.valor_liquido)}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"center"},children:(0,i.jsx)("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"600",backgroundColor:"PAGO_RECEBIDO"===e.status?"#dcfce7":"#fef3c7",color:"PAGO_RECEBIDO"===e.status?"#166534":"#92400e"},children:"PAGO_RECEBIDO"===e.status?"Liquidado":"Aberto"})}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"center"},children:(0,i.jsxs)("button",{onClick:()=>ey(e),style:{padding:"6px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[(0,i.jsx)(m,{size:14}),"Vincular"]})})]},e.id))})]})]})]})}),ei&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:()=>en(!1),children:(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",overflow:"hidden",width:"90%",maxWidth:"500px"},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("div",{style:{height:"4px",backgroundColor:"#f59e0b"}}),(0,i.jsxs)("div",{style:{padding:"24px"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px",marginBottom:"24px"},children:[(0,i.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#fef3c7",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,i.jsx)(d.Z,{size:28,style:{color:"#f59e0b"}})}),(0,i.jsx)("p",{style:{fontSize:"16px",lineHeight:"1.6",color:"#374151"},children:ea})]}),(0,i.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,i.jsx)("button",{onClick:()=>en(!1),style:{padding:"10px 24px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"OK"})})]})]})}),et.show&&(0,i.jsxs)("div",{style:{position:"fixed",bottom:"24px",right:"24px",padding:"16px 24px",borderRadius:"8px",backgroundColor:"success"===et.type?"#dcfce7":"error"===et.type?"#fee2e2":"#fef3c7",color:"success"===et.type?"#166534":"error"===et.type?"#991b1b":"#92400e",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",display:"flex",alignItems:"center",gap:"12px",zIndex:9999},children:["success"===et.type?(0,i.jsx)(r.Z,{size:20}):"error"===et.type?(0,i.jsx)(b.Z,{size:20}):(0,i.jsx)(d.Z,{size:20}),(0,i.jsx)("span",{style:{fontWeight:"500"},children:et.message})]}),(0,i.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n          }\n        "}})]})}},1180:function(e,t,o){"use strict";o.d(t,{O:function(){return i}});let i=(0,o(20046).eI)("https://tkefmbjqiljejkmwrwsw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRrZWZtYmpxaWxqZWprbXdyd3N3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyNzEyODAsImV4cCI6MjA3NTg0NzI4MH0.fwV8APDBs7YTx3ap8km-qnhXOJx0EcXX0P68eLXgEsU",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},db:{schema:"sodcapital"}})},78030:function(e,t,o){"use strict";o.d(t,{Z:function(){return p}});var i=o(2265);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase()),r=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.filter((e,t,o)=>!!e&&""!==e.trim()&&o.indexOf(e)===t).join(" ").trim()},s=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,i.forwardRef)((e,t)=>{let{color:o="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:d="",children:p,iconNode:x,...u}=e;return(0,i.createElement)("svg",{ref:t,...c,width:n,height:n,stroke:o,strokeWidth:r?24*Number(a)/Number(n):a,className:l("lucide",d),...!p&&!s(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,o]=e;return(0,i.createElement)(t,o)}),...Array.isArray(p)?p:[p]])}),p=(e,t)=>{let o=(0,i.forwardRef)((o,a)=>{let{className:s,...c}=o;return(0,i.createElement)(d,{ref:a,iconNode:t,className:l("lucide-".concat(n(r(e))),"lucide-".concat(e),s),...c})});return o.displayName=r(e),o}},76780:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});let i=(0,o(78030).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},13231:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});let i=(0,o(78030).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},71935:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});let i=(0,o(78030).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},40933:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});let i=(0,o(78030).Z)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},37164:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});let i=(0,o(78030).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},66706:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});let i=(0,o(78030).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54817:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});let i=(0,o(78030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},74697:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});let i=(0,o(78030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[46,971,23,744],function(){return e(e.s=59988)}),_N_E=e.O()}]);