(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{27203:function(e,t,o){Promise.resolve().then(o.bind(o,83700))},83700:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var n=o(57437),r=o(2265),i=o(1180),a=o(66706),s=o(69003),l=o(51077),d=o(13231),c=o(54817),p=o(76780),x=o(71935),u=o(74697);function m(){let[e,t]=(0,r.useState)([]),[o,m]=(0,r.useState)(new Set),[f,h]=(0,r.useState)(!0),[g,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)([]),[v,_]=(0,r.useState)([]),[S,w]=(0,r.useState)(""),[z,k]=(0,r.useState)(""),[C,W]=(0,r.useState)("Saida"),[A,E]=(0,r.useState)(""),[T,I]=(0,r.useState)(""),[R,Z]=(0,r.useState)(""),[B,O]=(0,r.useState)(!1),[q,N]=(0,r.useState)(""),[M,P]=(0,r.useState)(!1),[L,V]=(0,r.useState)(""),[D,F]=(0,r.useState)([]),[X,H]=(0,r.useState)(0),J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";H(e=>e+1),F(o=>[...o,{id:X,message:e,type:t}]),setTimeout(()=>{F(e=>e.filter(e=>e.id!==X))},5e3)},U=e=>{F(t=>t.filter(t=>t.id!==e))},Y=e=>{V(e),P(!0)},G=async()=>{try{let{data:e,error:t}=await i.O.from("empresas").select("id, nome").eq("ativo",!0).order("nome");if(t)throw t;j(e||[])}catch(e){console.error("Erro ao carregar empresas:",e)}},Q=async()=>{try{let{data:e,error:t}=await i.O.from("contrapartes").select("id, nome").eq("ativo",!0).order("nome");if(t)throw t;_(e||[])}catch(e){console.error("Erro ao carregar contrapartes:",e)}},$=e=>{let t=new Date;t.setHours(0,0,0,0);let o=new Date(e);o.setHours(0,0,0,0);let n=Math.ceil((t.getTime()-o.getTime())/864e5);return n>0?n:0},K=async()=>{try{h(!0);let e=i.O.from("lancamentos").select("\n          id,\n          tipo,\n          empresa_id,\n          valor_bruto,\n          valor_liquido,\n          data_vencimento,\n          data_previsao_pagamento,\n          documento_tipo,\n          documento_numero,\n          pagamento_terceiro,\n          empresas!lancamentos_empresa_id_fkey(nome),\n          empresa_pagadora:empresas!lancamentos_empresa_pagadora_id_fkey(nome),\n          projeto:projetos!projeto_id(nome),\n          contrapartes(nome)\n        ").eq("status","ABERTO").order("data_vencimento",{ascending:!0});S&&(e=e.eq("empresa_id",S)),z&&(e=e.eq("contraparte_id",z)),"Todos"!==C&&(e=e.eq("tipo",C)),A&&(e=e.gte("data_vencimento",A)),T&&(e=e.lte("data_vencimento",T));let{data:o,error:n}=await e;if(n)throw n;let r=(o||[]).map(e=>{var t,o,n,r,i,a,s;return{id:e.id,tipo:e.tipo,empresa_id:e.empresa_id,empresa_nome:Array.isArray(e.empresas)?null===(t=e.empresas[0])||void 0===t?void 0:t.nome:null===(o=e.empresas)||void 0===o?void 0:o.nome,projeto_nome:(null===(n=e.projeto)||void 0===n?void 0:n.nome)||null,contraparte_nome:Array.isArray(e.contrapartes)?null===(r=e.contrapartes[0])||void 0===r?void 0:r.nome:null===(i=e.contrapartes)||void 0===i?void 0:i.nome,valor_bruto:e.valor_bruto,valor_liquido:e.valor_liquido,data_vencimento:e.data_vencimento,data_previsao_pagamento:e.data_previsao_pagamento,documento_tipo:e.documento_tipo,documento_numero:e.documento_numero,pagamento_terceiro:e.pagamento_terceiro||!1,empresa_pagadora_nome:Array.isArray(e.empresa_pagadora)?null===(a=e.empresa_pagadora[0])||void 0===a?void 0:a.nome:null===(s=e.empresa_pagadora)||void 0===s?void 0:s.nome,dias_atraso:$(e.data_vencimento)}});t(r)}catch(e){console.error("Erro ao carregar lan\xe7amentos pendentes:",e),J("Erro ao carregar lan\xe7amentos pendentes. Verifique sua conex\xe3o","error")}finally{h(!1)}};(0,r.useEffect)(()=>{G(),Q(),K()},[]),(0,r.useEffect)(()=>{K()},[S,z,C,A,T]);let ee=e=>{let t=new Set(o);t.has(e)?t.delete(e):t.add(e),m(t)},et=async()=>{if(0===o.size){J("Selecione ao menos um lan\xe7amento","warning");return}if(!q){J("Informe a data de liquida\xe7\xe3o","warning");return}b(!0);try{var e,t,n,r,a;let s=Array.from(o),{data:l,error:d}=await i.O.from("lancamentos").select("\n          id,\n          tipo,\n          empresa_id,\n          banco_conta_id,\n          contraparte_id,\n          projeto_id,\n          subprojeto_id,\n          plano_conta_id,\n          valor_liquido,\n          pagamento_terceiro,\n          empresa_pagadora_id,\n          contrapartes(nome),\n          projeto:projetos!projeto_id(nome),\n          subprojeto:projetos!subprojeto_id(nome)\n        ").in("id",s);if(d){console.error("Erro ao buscar lan\xe7amentos:",d),Y("Erro ao buscar dados dos lan\xe7amentos. Verifique sua conex\xe3o e tente novamente");return}if(!l||0===l.length){J("Nenhum lan\xe7amento encontrado para processar.","warning");return}let c=new Set;l.forEach(e=>{e.empresa_id&&c.add(e.empresa_id),e.pagamento_terceiro&&e.empresa_pagadora_id&&c.add(e.empresa_pagadora_id)});let p=Array.from(c),x=new Map;if(p.length>0){let{data:e}=await i.O.from("empresas").select("id, nome").in("id",p);null==e||e.forEach(e=>{x.set(e.id,e.nome)})}let u=new Set;l.forEach(e=>{e.plano_conta_id&&u.add(e.plano_conta_id)});let f=Array.from(u),h=new Map;if(f.length>0){let{data:e}=await i.O.from("plano_contas_fluxo").select("id, categoria, subcategoria").in("id",f);null==e||e.forEach(e=>{h.set(e.id,e)})}let g=new Set;for(let e of(null==l||l.forEach(e=>{e.banco_conta_id&&g.add(e.banco_conta_id)}),Array.from(g))){let{data:t,error:o}=await i.O.from("fechamento_bancarios").select("data_fechamento").eq("banco_conta_id",e).order("data_fechamento",{ascending:!1}).limit(1);if(o){console.error("Erro ao verificar fechamento:",o);continue}if(t&&t.length>0){let e=t[0].data_fechamento;if(q<=e){let[t,o,n]=e.split("-");Y("N\xe3o \xe9 poss\xedvel baixar lan\xe7amentos na data informada. O per\xedodo est\xe1 fechado at\xe9 ".concat(n,"/").concat(o,"/").concat(t));return}}}let b=[];for(let o of l||[]){let i=h.get(o.plano_conta_id),a="Saida"===o.tipo?"Pagamento":"Recebimento",s="".concat(a," --> ");if(o.pagamento_terceiro&&o.empresa_id){let e=x.get(o.empresa_id);e&&(s+="Por conta e ordem da ".concat(e))}(null===(e=o.projeto)||void 0===e?void 0:e.nome)&&(s.endsWith(" --> ")||(s+=" - "),s+=o.projeto.nome),(null===(t=o.subprojeto)||void 0===t?void 0:t.nome)&&(s.endsWith(" --> ")||(s+=" - "),s+=o.subprojeto.nome),(null==i?void 0:i.categoria)&&(s.endsWith(" --> ")||(s+=" - "),s+=i.categoria),(null==i?void 0:i.subcategoria)&&(s.endsWith(" --> ")||(s+=" - "),s+=i.subcategoria);let l=Array.isArray(o.contrapartes)?null===(n=o.contrapartes[0])||void 0===n?void 0:n.nome:null===(r=o.contrapartes)||void 0===r?void 0:r.nome;if(l&&(s.endsWith(" --> ")||(s+=" - "),s+=l),!o.banco_conta_id){console.warn("Lan\xe7amento ".concat(o.id," n\xe3o possui banco_conta_id"));continue}if(!o.valor_liquido||o.valor_liquido<=0){console.warn("Lan\xe7amento ".concat(o.id," possui valor inv\xe1lido"));continue}b.push({tipo_movimento:"Saida"===o.tipo?"SAIDA":"ENTRADA",lancamento_id:o.id,banco_conta_id:o.banco_conta_id,data_movimento:q,valor:o.valor_liquido,historico:s})}if(0===b.length){J("Nenhum movimento v\xe1lido para registrar. Verifique se os lan\xe7amentos possuem conta banc\xe1ria","error");return}let{error:y}=await i.O.from("movimentos_bancarios").insert(b);if(y){console.error("Erro ao inserir movimentos:",y);let e=y.message||"",t=e.replace(/(\d{4})-(\d{2})-(\d{2})/g,(e,t,o,n)=>"".concat(n,"/").concat(o,"/").concat(t)),o=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();(null===(a=y.message)||void 0===a?void 0:a.includes("column"))||"42703"===y.code?Y("Estrutura da tabela movimentos_bancarios est? incorreta. Verifique se todas as colunas necess?rias existem (tipo_movimento, lancamento_id, banco_conta_id, data_movimento, valor, historico)"):"23503"===y.code?Y("Refer?ncia inv?lida. Verifique se o banco_conta_id est? correto"):"23505"===y.code?Y("Movimento banc?rio j? existe para este lan?amento"):o.includes("ultimo fechamento")?Y(t):Y("Erro ao registrar movimentos banc?rios: ".concat(t||"Verifique os dados e tente novamente"));return}let j=s.map(e=>i.O.from("lancamentos").update({status:"PAGO_RECEBIDO",data_liquidacao:q}).eq("id",e)),v=(await Promise.all(j)).filter(e=>e.error);if(v.length>0){console.error("Erros ao atualizar lan\xe7amentos:",v),Y("Erro ao atualizar ".concat(v.length," lan\xe7amento(s). Os movimentos foram registrados mas o status n\xe3o foi atualizado. Verifique as permiss\xf5es"));return}J("".concat(o.size," lan\xe7amento(s) baixado(s) com sucesso!"),"success"),m(new Set),O(!1),N(""),K()}catch(e){console.error("Erro ao processar baixa:",e),Y("Falha ao processar baixa de pagamentos: ".concat((null==e?void 0:e.message)||"Erro desconhecido",". Por favor, tente novamente"))}finally{b(!1)}},eo=e.filter(e=>{var t,o,n,r;if(!R)return!0;let i=R.toLowerCase();return(null===(t=e.empresa_nome)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(o=e.contraparte_nome)||void 0===o?void 0:o.toLowerCase().includes(i))||(null===(n=e.projeto_nome)||void 0===n?void 0:n.toLowerCase().includes(i))||(null===(r=e.documento_numero)||void 0===r?void 0:r.toLowerCase().includes(i))}),en=Array.from(o).reduce((t,o)=>{let n=e.find(e=>e.id===o);return t+((null==n?void 0:n.valor_liquido)||0)},0),er=eo.reduce((e,t)=>e+t.valor_liquido,0),ei=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),ea=e=>{if(!e)return"-";let[t,o,n]=e.split("-");return"".concat(n,"/").concat(o,"/").concat(t)},es=e=>0===e?{bg:"#dcfce7",text:"#166534",label:"No prazo"}:e<=7?{bg:"#fef3c7",text:"#92400e",label:"".concat(e,"d atraso")}:{bg:"#fee2e2",text:"#991b1b",label:"".concat(e,"d atraso")};return(0,n.jsxs)("div",{style:{padding:"24px",backgroundColor:"#f9fafb",minHeight:"100vh"},children:[(0,n.jsxs)("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"8px"},children:"Baixar Pagamentos"}),(0,n.jsx)("p",{style:{fontSize:"14px",color:"#6b7280"},children:"Gerencie e processe baixas de pagamentos e recebimentos em lote"})]}),(0,n.jsxs)("button",{onClick:K,disabled:f,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#1555D6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:f?"not-allowed":"pointer",opacity:f?.6:1},children:[(0,n.jsx)(a.Z,{size:18,style:{animation:f?"spin 1s linear infinite":"none"}}),"Atualizar"]})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{fontSize:"13px",color:"#6b7280",fontWeight:"500"},children:"Total Pendente"}),(0,n.jsx)(s.Z,{size:20,style:{color:"#1555D6"}})]}),(0,n.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#111827"},children:eo.length}),(0,n.jsx)("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"lan\xe7amentos"})]}),(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{fontSize:"13px",color:"#6b7280",fontWeight:"500"},children:"Valor Total"}),(0,n.jsx)(l.Z,{size:20,style:{color:"#059669"}})]}),(0,n.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#111827"},children:ei(er)}),(0,n.jsx)("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"a liquidar"})]}),(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{fontSize:"13px",color:"#6b7280",fontWeight:"500"},children:"Selecionados"}),(0,n.jsx)(d.Z,{size:20,style:{color:"#0284c7"}})]}),(0,n.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#111827"},children:o.size}),(0,n.jsx)("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"lan\xe7amentos"})]}),(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{fontSize:"13px",color:"#6b7280",fontWeight:"500"},children:"Valor Selecionado"}),(0,n.jsx)(l.Z,{size:20,style:{color:"#7c3aed"}})]}),(0,n.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#111827"},children:ei(en)}),(0,n.jsx)("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"para baixar"})]})]}),(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"12px",marginBottom:"16px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"6px"},children:"Tipo"}),(0,n.jsxs)("select",{value:C,onChange:e=>W(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:"pointer"},children:[(0,n.jsx)("option",{value:"Todos",children:"Todos"}),(0,n.jsx)("option",{value:"Saida",children:"Pagamentos"}),(0,n.jsx)("option",{value:"Entrada",children:"Recebimentos"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"6px"},children:"Empresa"}),(0,n.jsxs)("select",{value:S,onChange:e=>w(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:"pointer"},children:[(0,n.jsx)("option",{value:"",children:"Todas"}),y.map(e=>(0,n.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"6px"},children:"Contraparte"}),(0,n.jsxs)("select",{value:z,onChange:e=>k(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:"pointer"},children:[(0,n.jsx)("option",{value:"",children:"Todas"}),v.map(e=>(0,n.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"6px"},children:"Venc. In\xedcio"}),(0,n.jsx)("input",{type:"date",value:A,onChange:e=>E(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"13px",outline:"none"}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"6px"},children:"Venc. Fim"}),(0,n.jsx)("input",{type:"date",value:T,onChange:e=>I(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"13px",outline:"none"}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"6px"},children:"Buscar"}),(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)(c.Z,{size:16,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),(0,n.jsx)("input",{type:"text",placeholder:"Buscar...",value:R,onChange:e=>Z(e.target.value),style:{width:"100%",padding:"8px 10px 8px 36px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"13px",outline:"none"}})]})]})]}),o.size>0&&(0,n.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:(0,n.jsxs)("button",{onClick:()=>O(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#047857",onMouseOut:e=>e.currentTarget.style.backgroundColor="#059669",children:[(0,n.jsx)(d.Z,{size:18}),"Baixar ",o.size," Lan\xe7amento(s)"]})})]}),(0,n.jsx)("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:f?(0,n.jsx)("div",{style:{padding:"60px",textAlign:"center",color:"#6b7280"},children:"Carregando lan\xe7amentos pendentes..."}):0===eo.length?(0,n.jsxs)("div",{style:{padding:"60px",textAlign:"center",color:"#6b7280"},children:[(0,n.jsx)(s.Z,{size:48,style:{color:"#d1d5db",margin:"0 auto 16px"}}),(0,n.jsx)("p",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"Nenhum lan\xe7amento pendente"}),(0,n.jsx)("p",{style:{fontSize:"14px"},children:"N\xe3o h\xe1 pagamentos ou recebimentos pendentes no momento"})]}):(0,n.jsx)("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[(0,n.jsx)("th",{style:{padding:"12px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px",width:"50px"},children:(0,n.jsx)("input",{type:"checkbox",checked:o.size===eo.length&&eo.length>0,onChange:()=>{o.size===eo.length?m(new Set):m(new Set(eo.map(e=>e.id)))},style:{width:"16px",height:"16px",cursor:"pointer"}})}),(0,n.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"TIPO"}),(0,n.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"EMPRESA"}),(0,n.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"CONTRAPARTE"}),(0,n.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"PROJETO"}),(0,n.jsx)("th",{style:{padding:"12px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"VENCIMENTO"}),(0,n.jsx)("th",{style:{padding:"12px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"STATUS"}),(0,n.jsx)("th",{style:{padding:"12px",textAlign:"right",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"VALOR L\xcdQUIDO"}),(0,n.jsx)("th",{style:{padding:"12px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"PGTO TERC"}),(0,n.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:"DOCUMENTO"})]})}),(0,n.jsx)("tbody",{children:eo.map(e=>{let t=es(e.dias_atraso),r=o.has(e.id);return(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6",backgroundColor:r?"#eff6ff":"white",transition:"background-color 0.2s"},onMouseOver:e=>{r||(e.currentTarget.style.backgroundColor="#f9fafb")},onMouseOut:e=>{r||(e.currentTarget.style.backgroundColor="white")},children:[(0,n.jsx)("td",{style:{padding:"12px",textAlign:"center"},children:(0,n.jsx)("input",{type:"checkbox",checked:r,onChange:()=>ee(e.id),style:{width:"16px",height:"16px",cursor:"pointer"}})}),(0,n.jsx)("td",{style:{padding:"12px"},children:(0,n.jsx)("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",backgroundColor:"Entrada"===e.tipo?"#d1fae5":"#fee2e2",color:"Entrada"===e.tipo?"#065f46":"#991b1b"},children:"Entrada"===e.tipo?"Recebimento":"Pagamento"})}),(0,n.jsx)("td",{style:{padding:"12px",fontSize:"13px",color:"#1f2937",fontWeight:"500"},children:e.empresa_nome}),(0,n.jsx)("td",{style:{padding:"12px",fontSize:"13px",color:"#4b5563"},children:e.contraparte_nome}),(0,n.jsx)("td",{style:{padding:"12px",fontSize:"13px",color:"#6b7280"},children:e.projeto_nome||"-"}),(0,n.jsx)("td",{style:{padding:"12px",textAlign:"center",fontSize:"13px",color:"#374151",fontWeight:"500"},children:ea(e.data_vencimento)}),(0,n.jsx)("td",{style:{padding:"12px",textAlign:"center"},children:(0,n.jsx)("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",backgroundColor:t.bg,color:t.text},children:t.label})}),(0,n.jsx)("td",{style:{padding:"12px",textAlign:"right",fontSize:"14px",color:"#111827",fontWeight:"600"},children:ei(e.valor_liquido)}),(0,n.jsx)("td",{style:{padding:"12px",textAlign:"center"},children:e.pagamento_terceiro?(0,n.jsx)("div",{style:{position:"relative",display:"inline-block"},children:(0,n.jsx)("span",{title:"Pago por: ".concat(e.empresa_pagadora_nome||"N/A"),style:{display:"inline-block",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",backgroundColor:"#dbeafe",color:"#1e40af",cursor:"help"},children:"SIM"})}):(0,n.jsx)("span",{style:{fontSize:"11px",color:"#9ca3af",fontWeight:"500"},children:"N\xc3O"})}),(0,n.jsx)("td",{style:{padding:"12px",fontSize:"13px",color:"#6b7280"},children:e.documento_numero?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{fontSize:"11px",color:"#9ca3af",marginBottom:"2px"},children:e.documento_tipo||"Doc"}),e.documento_numero]}):"-"})]},e.id)})})]})})}),B&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:()=>O(!1),children:(0,n.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",padding:"24px",width:"90%",maxWidth:"500px",margin:"16px"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[(0,n.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#dcfce7",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(d.Z,{size:24,style:{color:"#059669"}})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{fontSize:"18px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:"Confirmar Baixa de Pagamentos"}),(0,n.jsxs)("p",{style:{fontSize:"14px",color:"#6b7280"},children:[o.size," lan\xe7amento(s) selecionado(s)"]})]})]}),(0,n.jsxs)("div",{style:{backgroundColor:"#f9fafb",padding:"16px",borderRadius:"8px",marginBottom:"20px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{fontSize:"13px",color:"#6b7280"},children:"Quantidade:"}),(0,n.jsxs)("span",{style:{fontSize:"14px",fontWeight:"600",color:"#111827"},children:[o.size," lan\xe7amento(s)"]})]}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)("span",{style:{fontSize:"13px",color:"#6b7280"},children:"Valor Total:"}),(0,n.jsx)("span",{style:{fontSize:"16px",fontWeight:"700",color:"#059669"},children:ei(en)})]})]}),(0,n.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Data de Liquida\xe7\xe3o *"}),(0,n.jsx)("input",{type:"date",value:q,onChange:e=>N(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none"}})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,n.jsx)("button",{onClick:()=>O(!1),disabled:g,style:{padding:"10px 20px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:g?"not-allowed":"pointer",opacity:g?.6:1},children:"Cancelar"}),(0,n.jsx)("button",{onClick:et,disabled:g||!q,style:{padding:"10px 20px",backgroundColor:g||!q?"#9ca3af":"#059669",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:g||!q?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{size:16,style:{animation:"spin 1s linear infinite"}}),"Processando..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{size:16}),"Confirmar Baixa"]})})]})]})}),M&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:()=>P(!1),children:(0,n.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",padding:"0",width:"90%",maxWidth:"540px",margin:"16px",overflow:"hidden"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("div",{style:{height:"4px",backgroundColor:"#f59e0b",width:"100%"}}),(0,n.jsxs)("div",{style:{padding:"24px"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px",marginBottom:"24px"},children:[(0,n.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#fef3c7",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,n.jsx)(p.Z,{size:28,style:{color:"#f59e0b"}})}),(0,n.jsx)("div",{style:{flex:1},children:(0,n.jsx)("p",{style:{fontSize:"16px",lineHeight:"1.6",color:"#374151",margin:0},children:L})})]}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,n.jsx)("button",{onClick:()=>P(!1),style:{padding:"10px 24px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"OK"})})]})]})}),(0,n.jsx)("div",{style:{position:"fixed",top:"24px",right:"24px",zIndex:9999,display:"flex",flexDirection:"column",gap:"12px",pointerEvents:"none"},children:D.map(e=>{let t={success:{bg:"#dcfce7",border:"#86efac",icon:d.Z,iconColor:"#059669"},warning:{bg:"#fef3c7",border:"#fcd34d",icon:p.Z,iconColor:"#d97706"},error:{bg:"#fee2e2",border:"#fca5a5",icon:x.Z,iconColor:"#dc2626"}}[e.type],o=t.icon;return(0,n.jsxs)("div",{style:{backgroundColor:t.bg,border:"1px solid ".concat(t.border),borderRadius:"8px",padding:"12px 16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",gap:"12px",minWidth:"320px",maxWidth:"480px",pointerEvents:"auto",animation:"slideIn 0.3s ease-out"},children:[(0,n.jsx)(o,{size:20,style:{color:t.iconColor,flexShrink:0}}),(0,n.jsx)("p",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"500",flex:1},children:e.message}),(0,n.jsx)("button",{onClick:()=>U(e.id),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(u.Z,{size:16,style:{color:"#6b7280"}})})]},e.id)})}),(0,n.jsx)("style",{children:"\n        @keyframes slideIn {\n          from {\n            opacity: 0;\n            transform: translateX(100%);\n          }\n          to {\n            opacity: 1;\n            transform: translateX(0);\n          }\n        }\n\n        @keyframes spin {\n          from {\n            transform: rotate(0deg);\n          }\n          to {\n            transform: rotate(360deg);\n          }\n        }\n      "})]})}},1180:function(e,t,o){"use strict";o.d(t,{O:function(){return n}});let n=(0,o(20046).eI)("https://tkefmbjqiljejkmwrwsw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRrZWZtYmpxaWxqZWprbXdyd3N3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyNzEyODAsImV4cCI6MjA3NTg0NzI4MH0.fwV8APDBs7YTx3ap8km-qnhXOJx0EcXX0P68eLXgEsU",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},db:{schema:"sodcapital"}})},78030:function(e,t,o){"use strict";o.d(t,{Z:function(){return p}});var n=o(2265);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase()),a=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.filter((e,t,o)=>!!e&&""!==e.trim()&&o.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.forwardRef)((e,t)=>{let{color:o="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:p,iconNode:x,...u}=e;return(0,n.createElement)("svg",{ref:t,...d,width:r,height:r,stroke:o,strokeWidth:a?24*Number(i)/Number(r):i,className:s("lucide",c),...!p&&!l(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,o]=e;return(0,n.createElement)(t,o)}),...Array.isArray(p)?p:[p]])}),p=(e,t)=>{let o=(0,n.forwardRef)((o,i)=>{let{className:l,...d}=o;return(0,n.createElement)(c,{ref:i,iconNode:t,className:s("lucide-".concat(r(a(e))),"lucide-".concat(e),l),...d})});return o.displayName=a(e),o}},76780:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});let n=(0,o(78030).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},13231:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});let n=(0,o(78030).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},71935:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});let n=(0,o(78030).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},51077:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});let n=(0,o(78030).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},69003:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});let n=(0,o(78030).Z)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},66706:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});let n=(0,o(78030).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54817:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});let n=(0,o(78030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},74697:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});let n=(0,o(78030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[46,971,23,744],function(){return e(e.s=27203)}),_N_E=e.O()}]);