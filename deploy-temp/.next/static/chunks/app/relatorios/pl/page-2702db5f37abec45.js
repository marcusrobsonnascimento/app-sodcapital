(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[646],{40161:function(e,o,t){Promise.resolve().then(t.bind(t,14451))},14451:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return P}});var r=t(57437),a=t(2265),n=t(1180),i=t(16463),s=t(51077),l=t(29162),d=t(53225),c=t(37164),p=t(65607),x=t(74697),u=t(95737),g=t(45190),h=t(62476),m=t(35231),b=t(23909),f=t(85369),y=t(68295),j=t(85475),v=t(20153),_=t(92566),S=t(54142),w=t(2842),E=t(9542),C=t(16638);let k=["#1555D6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316","#6366f1","#84cc16"],A=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),R=e=>e?new Date(e).toLocaleDateString("pt-BR"):"",z=e=>new Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(e/100);function P(){let e=(0,i.useRouter)(),o=(0,i.useSearchParams)(),[t,P]=(0,a.useState)(!1),[B,I]=(0,a.useState)([]),[W,T]=(0,a.useState)([]),[O,q]=(0,a.useState)(0),[D,M]=(0,a.useState)(0),[Z,L]=(0,a.useState)(0),[F,N]=(0,a.useState)(0),[J,Y]=(0,a.useState)([]),[V,X]=(0,a.useState)([]),[U,K]=(0,a.useState)([]),[G,H]=(0,a.useState)([]),[$,Q]=(0,a.useState)(new Date().getFullYear()),[ee,eo]=(0,a.useState)(""),[et,er]=(0,a.useState)(""),[ea,en]=(0,a.useState)("EMPRESA"),[ei,es]=(0,a.useState)([]),[el,ed]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=o.get("ano"),t=o.get("empresa"),r=o.get("projeto"),a=o.get("agrupamento");e&&Q(parseInt(e)),t&&eo(t),r&&er(r),a&&en(a)},[o]),(0,a.useEffect)(()=>{eu()},[]),(0,a.useEffect)(()=>{ee?eg(ee):(T([]),er(""))},[ee]),(0,a.useEffect)(()=>{B.length>0&&eh()},[$,ee,et,ea,B]);let ec=(e,o)=>{ed(el+1);let t={id:el,message:e,type:o};es(e=>[...e,t]),setTimeout(()=>ep(el),3e3)},ep=e=>{es(o=>o.filter(o=>o.id!==e))},ex=e=>({success:{borderColor:"#10b981",icon:s.Z,iconColor:"#10b981"},error:{borderColor:"#ef4444",icon:l.Z,iconColor:"#ef4444"},warning:{borderColor:"#eab308",icon:d.Z,iconColor:"#eab308"}})[e],eu=async()=>{try{console.log("Carregando empresas...");let{data:e,error:o}=await n.O.from("empresas").select("id, nome").order("nome",{ascending:!0});if(o)throw o;console.log("Empresas carregadas:",null==e?void 0:e.length),I(e||[])}catch(e){console.error("Erro ao carregar empresas:",e),ec("Erro ao carregar empresas","error")}},eg=async e=>{try{console.log("Carregando projetos da empresa:",e);let{data:o,error:t}=await n.O.from("projetos").select("id, empresa_id, nome").eq("empresa_id",e).order("nome",{ascending:!0});if(t)throw t;console.log("Projetos carregados:",null==o?void 0:o.length),T(o||[])}catch(e){console.error("Erro ao carregar projetos:",e),ec("Erro ao carregar projetos","error")}},eh=async()=>{try{console.log("=== Iniciando carregamento do painel ==="),console.log("Ano:",$),console.log("Empresa:",ee||"Todas"),console.log("Projeto:",et||"Todos"),console.log("Agrupamento:",ea),P(!0),await Promise.all([em(),eb(),ef(),ey(),ej()]),console.log("=== Carregamento conclu\xeddo ===")}catch(e){console.error("Erro geral ao carregar dados do painel:",e),ec("Erro ao carregar dados do painel","error")}finally{P(!1)}},em=async()=>{try{console.log("Carregando KPIs...");let e=n.O.from("lancamentos").select("tipo, valor_liquido, valor_bruto, status").eq("status","PAGO_RECEBIDO").gte("data_liquidacao","".concat($,"-01-01")).lte("data_liquidacao","".concat($,"-12-31"));ee&&(e=e.eq("empresa_id",ee)),et&&(e=e.eq("projeto_id",et));let{data:o,error:t}=await e;if(t)throw t;console.log("Lan\xe7amentos encontrados:",null==o?void 0:o.length);let r=0,a=0;null==o||o.forEach(e=>{let o=e.valor_liquido||e.valor_bruto||0;"RECEITA"===e.tipo?r+=o:"DESPESA"===e.tipo&&(a+=o)});let i=n.O.from("saldos_diarios").select("banco_conta_id, saldo_final, data").order("data",{ascending:!1}).limit(100),{data:s,error:l}=await i;l&&console.error("Erro ao buscar saldos:",l);let d=new Map;null==s||s.forEach(e=>{d.has(e.banco_conta_id)||d.set(e.banco_conta_id,e.saldo_final||0)});let c=Array.from(d.values()).reduce((e,o)=>e+o,0),p=c+r-a;console.log("KPIs calculados:",{caixa:c,receitas:r,despesas:a,pl:p}),q(c),M(r),L(a),N(p)}catch(e){console.error("Erro ao carregar KPIs:",e),q(0),M(0),L(0),N(0)}},eb=async()=>{try{console.log("Carregando composi\xe7\xe3o...");let e=n.O.from("lancamentos").select("\n          id,\n          tipo,\n          valor_liquido,\n          valor_bruto,\n          empresa_id,\n          projeto_id,\n          subcategoria_id,\n          empresas:empresa_id(id, nome),\n          projetos:projeto_id(id, nome),\n          pc_subcategorias:subcategoria_id(id, nome)\n        ").eq("status","PAGO_RECEBIDO").gte("data_liquidacao","".concat($,"-01-01")).lte("data_liquidacao","".concat($,"-12-31"));ee&&(e=e.eq("empresa_id",ee)),et&&(e=e.eq("projeto_id",et));let{data:o,error:t}=await e;if(t)throw t;console.log("Lan\xe7amentos para composi\xe7\xe3o:",null==o?void 0:o.length);let r={};null==o||o.forEach(e=>{var o,t,a;let n="",i="";"EMPRESA"===ea?(n=e.empresa_id||"sem_empresa",i=(null===(o=e.empresas)||void 0===o?void 0:o.nome)||"Sem Empresa"):"PROJETO"===ea?(n=e.projeto_id||"sem_projeto",i=(null===(t=e.projetos)||void 0===t?void 0:t.nome)||"Sem Projeto"):(n=e.subcategoria_id||"sem_subcategoria",i=(null===(a=e.pc_subcategorias)||void 0===a?void 0:a.nome)||"Sem Subcategoria"),r[n]||(r[n]={nome:i,receitas:0,despesas:0});let s=e.valor_liquido||e.valor_bruto||0;"RECEITA"===e.tipo?r[n].receitas+=s:r[n].despesas+=s});let a=Object.entries(r).map(e=>{let[o,t]=e,r=t.receitas-t.despesas;return{chave:o,nome:t.nome,valor:r,percentual:0}}),i=a.reduce((e,o)=>e+Math.abs(o.valor),0);a.forEach(e=>{e.percentual=i>0?Math.abs(e.valor)/i*100:0});let s=a.sort((e,o)=>Math.abs(o.valor)-Math.abs(e.valor)),l=s.slice(0,8),d=s.slice(8),c=[...l];if(d.length>0){let e=d.reduce((e,o)=>e+o.valor,0),o=i>0?Math.abs(e)/i*100:0;c.push({chave:"outros",nome:"Outros",valor:e,percentual:o})}console.log("Composi\xe7\xe3o calculada:",c.length,"itens"),Y(c)}catch(e){console.error("Erro ao carregar composi\xe7\xe3o:",e),Y([])}},ef=async()=>{try{console.log("Carregando evolu\xe7\xe3o...");let e=[];for(let o of[{num:1,nome:"Jan"},{num:2,nome:"Fev"},{num:3,nome:"Mar"},{num:4,nome:"Abr"},{num:5,nome:"Mai"},{num:6,nome:"Jun"},{num:7,nome:"Jul"},{num:8,nome:"Ago"},{num:9,nome:"Set"},{num:10,nome:"Out"},{num:11,nome:"Nov"},{num:12,nome:"Dez"}]){let t=n.O.from("lancamentos").select("tipo, valor_liquido, valor_bruto").eq("status","PAGO_RECEBIDO").gte("data_liquidacao","".concat($,"-01-01")).lte("data_liquidacao","".concat($,"-").concat(String(o.num).padStart(2,"0"),"-31"));ee&&(t=t.eq("empresa_id",ee)),et&&(t=t.eq("projeto_id",et));let{data:r,error:a}=await t;if(a)throw a;let i=0,s=0;null==r||r.forEach(e=>{let o=e.valor_liquido||e.valor_bruto||0;"RECEITA"===e.tipo?i+=o:s+=o});let l=O+i-s;e.push({mes:o.nome,pl:l})}console.log("Evolu\xe7\xe3o calculada:",e.length,"meses"),X(e)}catch(e){console.error("Erro ao carregar evolu\xe7\xe3o:",e),X([])}},ey=async()=>{try{console.log("Carregando breakdown...");let e=n.O.from("lancamentos").select("\n          id,\n          tipo,\n          valor_liquido,\n          valor_bruto,\n          empresa_id,\n          projeto_id,\n          subcategoria_id,\n          empresas:empresa_id(id, nome),\n          projetos:projeto_id(id, nome),\n          pc_subcategorias:subcategoria_id(id, nome)\n        ").eq("status","PAGO_RECEBIDO").gte("data_liquidacao","".concat($,"-01-01")).lte("data_liquidacao","".concat($,"-12-31"));ee&&(e=e.eq("empresa_id",ee)),et&&(e=e.eq("projeto_id",et));let{data:o,error:t}=await e;if(t)throw t;console.log("Lan\xe7amentos para breakdown:",null==o?void 0:o.length);let r={};null==o||o.forEach(e=>{var o,t,a;let n="",i="";"EMPRESA"===ea?(n=e.empresa_id||"sem_empresa",i=(null===(o=e.empresas)||void 0===o?void 0:o.nome)||"Sem Empresa"):"PROJETO"===ea?(n=e.projeto_id||"sem_projeto",i=(null===(t=e.projetos)||void 0===t?void 0:t.nome)||"Sem Projeto"):(n=e.subcategoria_id||"sem_subcategoria",i=(null===(a=e.pc_subcategorias)||void 0===a?void 0:a.nome)||"Sem Subcategoria"),r[n]||(r[n]={nome:i,receitas_ytd:0,despesas_ytd:0});let s=e.valor_liquido||e.valor_bruto||0;"RECEITA"===e.tipo?r[n].receitas_ytd+=s:r[n].despesas_ytd+=s});let a=Object.entries(r).map(e=>{let[o,t]=e,r=t.receitas_ytd-t.despesas_ytd;return{chave:o,nome:t.nome,receitas_ytd:t.receitas_ytd,despesas_ytd:t.despesas_ytd,resultado_ytd:r,percentual_pl:0}}),i=F||1;a.forEach(e=>{e.percentual_pl=e.resultado_ytd/i*100}),a.sort((e,o)=>Math.abs(o.resultado_ytd)-Math.abs(e.resultado_ytd)),console.log("Breakdown calculado:",a.length,"itens"),K(a)}catch(e){console.error("Erro ao carregar breakdown:",e),K([])}},ej=async()=>{try{console.log("Carregando movimentos relevantes...");let e=n.O.from("lancamentos").select("\n          data_liquidacao,\n          tipo,\n          valor_liquido,\n          valor_bruto,\n          empresas:empresa_id(nome),\n          projetos:projeto_id(nome),\n          pc_subcategorias:subcategoria_id(nome),\n          contrapartes:contraparte_id(nome)\n        ").eq("status","PAGO_RECEBIDO").gte("data_liquidacao","".concat($,"-01-01")).lte("data_liquidacao","".concat($,"-12-31")).order("valor_bruto",{ascending:!1}).limit(20);ee&&(e=e.eq("empresa_id",ee)),et&&(e=e.eq("projeto_id",et));let{data:o,error:t}=await e;if(t)throw t;let r=(o||[]).map(e=>{var o,t,r,a;return{data:e.data_liquidacao,tipo:e.tipo,empresa:(null===(o=e.empresas)||void 0===o?void 0:o.nome)||"-",projeto:(null===(t=e.projetos)||void 0===t?void 0:t.nome)||"-",subcategoria:(null===(r=e.pc_subcategorias)||void 0===r?void 0:r.nome)||"-",contraparte:(null===(a=e.contrapartes)||void 0===a?void 0:a.nome)||"-",valor:e.valor_liquido||e.valor_bruto||0}});console.log("Movimentos carregados:",r.length),H(r)}catch(e){console.error("Erro ao carregar movimentos:",e),H([])}};return t?(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:[(0,r.jsx)("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#1555D6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,r.jsx)("style",{children:"\n          @keyframes spin {\n            to { transform: rotate(360deg); }\n          }\n        "})]}):(0,r.jsxs)("div",{style:{padding:"24px",maxWidth:"1800px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:"Painel de PL"}),(0,r.jsx)("p",{style:{fontSize:"14px",color:"#6b7280"},children:"Patrim\xf4nio L\xedquido Aproximado e An\xe1lises Consolidadas"})]}),(0,r.jsxs)("button",{onClick:()=>{try{if(0===U.length){ec("N\xe3o h\xe1 dados para exportar","warning");return}let e=U.map(e=>[ea,e.nome,e.receitas_ytd.toFixed(2),e.despesas_ytd.toFixed(2),e.resultado_ytd.toFixed(2),e.percentual_pl.toFixed(2)]),o=["Agrupamento,Nome,Receitas YTD,Despesas YTD,Resultado YTD,Percentual PL",...e.map(e=>e.join(","))].join("\n"),t=new Blob([o],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download="PL_Breakdown_".concat(ea,"_").concat($,".csv"),r.click(),ec("CSV exportado com sucesso!","success")}catch(e){console.error("Erro ao exportar CSV:",e),ec("Erro ao exportar CSV","error")}},disabled:0===U.length,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:0===U.length?"#e5e7eb":"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:0===U.length?"not-allowed":"pointer",transition:"all 0.2s"},onMouseOver:e=>U.length>0&&(e.currentTarget.style.backgroundColor="#059669"),onMouseOut:e=>U.length>0&&(e.currentTarget.style.backgroundColor="#10b981"),children:[(0,r.jsx)(c.Z,{size:18}),"Exportar CSV"]})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[(0,r.jsx)(p.Z,{size:20,color:"#1555D6"}),(0,r.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"#374151"},children:"Filtros"})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Ano de Refer\xeancia"}),(0,r.jsx)("input",{type:"number",min:"2000",max:"2100",value:$,onChange:e=>Q(parseInt(e.target.value)||new Date().getFullYear()),style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Empresa"}),(0,r.jsxs)("select",{value:ee,onChange:e=>{eo(e.target.value),er("")},style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,r.jsx)("option",{value:"",children:"Todas"}),B.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Projeto"}),(0,r.jsxs)("select",{value:et,onChange:e=>er(e.target.value),disabled:!ee,style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:ee?"pointer":"not-allowed",backgroundColor:ee?"white":"#f9fafb"},children:[(0,r.jsx)("option",{value:"",children:"Todos"}),W.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Agrupamento"}),(0,r.jsxs)("select",{value:ea,onChange:e=>en(e.target.value),style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,r.jsx)("option",{value:"EMPRESA",children:"Por Empresa"}),(0,r.jsx)("option",{value:"PROJETO",children:"Por Projeto"}),(0,r.jsx)("option",{value:"SUBCATEGORIA",children:"Por Subcategoria"})]})]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,r.jsx)("button",{onClick:()=>{let o=new URLSearchParams;o.set("ano",$.toString()),o.set("agrupamento",ea),ee&&o.set("empresa",ee),et&&o.set("projeto",et),e.push("/relatorios/pl?".concat(o.toString()))},style:{padding:"10px 24px",backgroundColor:"#1555D6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1044b5",onMouseOut:e=>e.currentTarget.style.backgroundColor="#1555D6",children:"Aplicar Filtros"}),(0,r.jsxs)("button",{onClick:()=>{Q(new Date().getFullYear()),eo(""),er(""),en("EMPRESA"),e.push("/relatorios/pl")},style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 24px",backgroundColor:"white",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f9fafb",onMouseOut:e=>e.currentTarget.style.backgroundColor="white",children:[(0,r.jsx)(x.Z,{size:16}),"Limpar"]})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginBottom:"24px"},children:[(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #1555D6"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},children:"PL Aproximado"}),(0,r.jsx)(u.Z,{size:24,color:"#1555D6"})]}),(0,r.jsx)("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1555D6"},children:A(F)})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #6b7280"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},children:"Caixa Consolidado"}),(0,r.jsx)(s.Z,{size:24,color:"#6b7280"})]}),(0,r.jsx)("div",{style:{fontSize:"32px",fontWeight:"700",color:"#374151"},children:A(O)})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #10b981"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},children:"Receitas YTD"}),(0,r.jsx)(g.Z,{size:24,color:"#10b981"})]}),(0,r.jsx)("div",{style:{fontSize:"32px",fontWeight:"700",color:"#059669"},children:A(D)})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #ef4444"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},children:"Despesas YTD"}),(0,r.jsx)(h.Z,{size:24,color:"#ef4444"})]}),(0,r.jsx)("div",{style:{fontSize:"32px",fontWeight:"700",color:"#dc2626"},children:A(Z)})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(500px, 1fr))",gap:"24px",marginBottom:"24px"},children:[(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"4px"},children:"Composi\xe7\xe3o do PL"}),(0,r.jsxs)("p",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"20px"},children:["Distribui\xe7\xe3o ","EMPRESA"===ea?"por Empresa":"PROJETO"===ea?"por Projeto":"por Subcategoria"]}),0===J.length?(0,r.jsxs)("div",{style:{padding:"48px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:["Sem dados para exibir no ano ",$]}):(0,r.jsx)(m.h,{width:"100%",height:400,children:(0,r.jsxs)(b.u,{children:[(0,r.jsx)(f.b,{data:J,cx:"50%",cy:"50%",innerRadius:80,outerRadius:140,paddingAngle:2,dataKey:"valor",label:e=>{let{nome:o,percentual:t}=e;return"".concat(o,": ").concat(t.toFixed(1),"%")},children:J.map((e,o)=>(0,r.jsx)(y.b,{fill:k[o%k.length]},"cell-".concat(o)))}),(0,r.jsx)(j.u,{formatter:e=>A(e),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px"}}),(0,r.jsx)(v.D,{verticalAlign:"bottom",height:36,wrapperStyle:{fontSize:"12px"},formatter:(e,o)=>"".concat(o.payload.nome," (").concat(o.payload.percentual.toFixed(1),"%)")})]})})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"4px"},children:"Evolu\xe7\xe3o do PL"}),(0,r.jsx)("p",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"20px"},children:"Patrim\xf4nio L\xedquido mensal acumulado"}),0===V.length?(0,r.jsxs)("div",{style:{padding:"48px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:["Sem dados para exibir no ano ",$]}):(0,r.jsx)(m.h,{width:"100%",height:400,children:(0,r.jsxs)(_.w,{data:V,children:[(0,r.jsx)(S.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,r.jsx)(w.K,{dataKey:"mes",stroke:"#6b7280",style:{fontSize:"12px"}}),(0,r.jsx)(E.B,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:e=>e>=1e6?"R$ ".concat((e/1e6).toFixed(1),"M"):e>=1e3?"R$ ".concat((e/1e3).toFixed(0),"K"):A(e)}),(0,r.jsx)(j.u,{formatter:e=>[A(e),"PL"],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px"}}),(0,r.jsx)(v.D,{wrapperStyle:{fontSize:"13px",paddingTop:"16px"}}),(0,r.jsx)(C.x,{type:"monotone",dataKey:"pl",stroke:"#1555D6",strokeWidth:3,dot:{fill:"#1555D6",r:4},activeDot:{r:6},name:"PL"})]})})]})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"16px"},children:"Breakdown Consolidado"}),0===U.length?(0,r.jsx)("div",{style:{padding:"48px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:"Sem dados para o per\xedodo selecionado"}):(0,r.jsx)("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},children:(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{backgroundColor:"#f9fafb"},children:[(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"EMPRESA"===ea?"Empresa":"PROJETO"===ea?"Projeto":"Subcategoria"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Receitas YTD"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Despesas YTD"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Resultado YTD"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"% do PL"})]})}),(0,r.jsx)("tbody",{children:U.map((e,o)=>(0,r.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.nome}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#059669"},children:A(e.receitas_ytd)}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#dc2626"},children:A(e.despesas_ytd)}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:e.resultado_ytd>=0?"#059669":"#dc2626"},children:A(e.resultado_ytd)}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",color:"#374151"},children:z(e.percentual_pl)})]},o))}),(0,r.jsx)("tfoot",{children:(0,r.jsxs)("tr",{style:{backgroundColor:"#f9fafb",borderTop:"2px solid #e5e7eb"},children:[(0,r.jsx)("td",{style:{padding:"12px 16px",fontWeight:"700",color:"#374151"},children:"TOTAL"}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"700",color:"#059669"},children:A(U.reduce((e,o)=>e+o.receitas_ytd,0))}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"700",color:"#dc2626"},children:A(U.reduce((e,o)=>e+o.despesas_ytd,0))}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"700",color:U.reduce((e,o)=>e+o.resultado_ytd,0)>=0?"#059669":"#dc2626"},children:A(U.reduce((e,o)=>e+o.resultado_ytd,0))}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"700",color:"#374151"},children:z(100)})]})})]})})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"16px"},children:"Top 20 Maiores Movimentos"}),0===G.length?(0,r.jsx)("div",{style:{padding:"48px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:"Sem movimentos para o per\xedodo selecionado"}):(0,r.jsx)("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},children:(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{backgroundColor:"#f9fafb"},children:[(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Data"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Tipo"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Empresa"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Projeto"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Subcategoria"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Contraparte"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Valor"})]})}),(0,r.jsx)("tbody",{children:G.map((e,o)=>(0,r.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:R(e.data)}),(0,r.jsx)("td",{style:{padding:"12px 16px"},children:(0,r.jsx)("span",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",backgroundColor:"RECEITA"===e.tipo?"#d1fae5":"#fee2e2",color:"RECEITA"===e.tipo?"#065f46":"#991b1b"},children:"RECEITA"===e.tipo?"Receita":"Despesa"})}),(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.empresa}),(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.projeto}),(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.subcategoria}),(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.contraparte}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"RECEITA"===e.tipo?"#059669":"#dc2626"},children:A(e.valor)})]},o))})]})})]}),(0,r.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999,display:"flex",flexDirection:"column",gap:"12px",pointerEvents:"none"},children:ei.map(e=>{let{borderColor:o,icon:t,iconColor:a}=ex(e.type);return(0,r.jsxs)("div",{style:{backgroundColor:"white",borderTop:"4px solid ".concat(o),padding:"16px 20px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",gap:"12px",minWidth:"400px",animation:"scaleIn 0.3s ease-out"},children:[(0,r.jsx)(t,{style:{width:"24px",height:"24px",flexShrink:0,color:a}}),(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",flex:1,color:"#374151"},children:e.message})]},e.id)})}),(0,r.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n        @keyframes scaleIn {\n          from {\n            transform: scale(0.8);\n            opacity: 0;\n          }\n          to {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n      "})]})}},1180:function(e,o,t){"use strict";t.d(o,{O:function(){return r}});let r=(0,t(20046).eI)("https://tkefmbjqiljejkmwrwsw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRrZWZtYmpxaWxqZWprbXdyd3N3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyNzEyODAsImV4cCI6MjA3NTg0NzI4MH0.fwV8APDBs7YTx3ap8km-qnhXOJx0EcXX0P68eLXgEsU",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},db:{schema:"sodcapital"}})},78030:function(e,o,t){"use strict";t.d(o,{Z:function(){return p}});var r=t(2265);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,o,t)=>t?t.toUpperCase():o.toLowerCase()),i=e=>{let o=n(e);return o.charAt(0).toUpperCase()+o.slice(1)},s=function(){for(var e=arguments.length,o=Array(e),t=0;t<e;t++)o[t]=arguments[t];return o.filter((e,o,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===o).join(" ").trim()},l=e=>{for(let o in e)if(o.startsWith("aria-")||"role"===o||"title"===o)return!0};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,r.forwardRef)((e,o)=>{let{color:t="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:c="",children:p,iconNode:x,...u}=e;return(0,r.createElement)("svg",{ref:o,...d,width:a,height:a,stroke:t,strokeWidth:i?24*Number(n)/Number(a):n,className:s("lucide",c),...!p&&!l(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[o,t]=e;return(0,r.createElement)(o,t)}),...Array.isArray(p)?p:[p]])}),p=(e,o)=>{let t=(0,r.forwardRef)((t,n)=>{let{className:l,...d}=t;return(0,r.createElement)(c,{ref:n,iconNode:o,className:s("lucide-".concat(a(i(e))),"lucide-".concat(e),l),...d})});return t.displayName=i(e),t}},62476:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]])},45190:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]])},37164:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},65607:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},29162:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},95737:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},74697:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});let r=(0,t(78030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},16463:function(e,o,t){"use strict";var r=t(71169);t.o(r,"usePathname")&&t.d(o,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(o,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(o,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[46,612,909,566,971,23,744],function(){return e(e.s=40161)}),_N_E=e.O()}]);