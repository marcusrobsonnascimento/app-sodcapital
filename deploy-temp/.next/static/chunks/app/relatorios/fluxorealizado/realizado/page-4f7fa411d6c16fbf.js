(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[946],{2947:function(e,t,o){Promise.resolve().then(o.bind(o,59769))},59769:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return W}});var a=o(57437),r=o(2265),i=o(1180),n=o(16463),l=o(51077),s=o(29162),d=o(53225),c=o(37164),p=o(65607),x=o(45190),u=o(62476),h=o(69003),f=o(42421),g=o(87592),m=o(35231),b=o(25974),y=o(54142),j=o(2842),v=o(9542),w=o(85475),S=o(20153),k=o(45745);let C=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),_=e=>e?new Date(e).toLocaleDateString("pt-BR"):"",z=e=>e.toISOString().split("T")[0],E=[{label:"2025",ano:2025},{label:"2024",ano:2024},{label:"2023",ano:2023},{label:"Este Ano",tipo:"ano_atual"},{label:"\xdaltimos 12 meses",tipo:"ultimos_12_meses"},{label:"Personalizado",tipo:"custom"}];function W(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[o,W]=(0,r.useState)(!0),[R,q]=(0,r.useState)([]),[A,T]=(0,r.useState)([]),[B,D]=(0,r.useState)([]),[I,L]=(0,r.useState)([]),[Z,M]=(0,r.useState)([]),[O,N]=(0,r.useState)([]),[F,P]=(0,r.useState)([]),[U,X]=(0,r.useState)(new Set),[J,Y]=(0,r.useState)(new Set),[G,V]=(0,r.useState)(null),[K,H]=(0,r.useState)("ano_atual"),[$,Q]=(0,r.useState)(""),[ee,et]=(0,r.useState)(""),[eo,ea]=(0,r.useState)(""),[er,ei]=(0,r.useState)(""),[en,el]=(0,r.useState)(""),[es,ed]=(0,r.useState)(""),[ec,ep]=(0,r.useState)(""),[ex,eu]=(0,r.useState)("classificacao"),[eh,ef]=(0,r.useState)(0),[eg,em]=(0,r.useState)(0),[eb,ey]=(0,r.useState)(0),[ej,ev]=(0,r.useState)(0),[ew,eS]=(0,r.useState)([]),[ek,eC]=(0,r.useState)(0),e_=(0,r.useRef)(!0);(0,r.useEffect)(()=>{eT();let e=new Date;Q(z(new Date(e.getFullYear(),0,1))),et(z(e)),eA(),eB()},[]),(0,r.useEffect)(()=>{$&&ee&&e_.current&&(e_.current=!1,eL())},[$,ee]),(0,r.useEffect)(()=>{let e=t.get("preset"),o=t.get("dataInicial"),a=t.get("dataFinal"),r=t.get("empresa"),i=t.get("projeto"),n=t.get("subprojeto"),l=t.get("bancoConta"),s=t.get("contraparte");e&&H(e),o&&Q(o),a&&et(a),r&&ea(r),i&&ei(i),n&&el(n),l&&ed(l),s&&ep(s)},[]),(0,r.useEffect)(()=>{eo?(eB(eo),eD(eo)):(eB(),L([]),ed(""))},[eo]),(0,r.useEffect)(()=>{er?eI(er):(D([]),el(""))},[er]),(0,r.useEffect)(()=>{$&&ee&&eL()},[ex]);let ez=(e,t)=>{eC(ek+1);let o={id:ek,message:e,type:t};eS(e=>[...e,o]),setTimeout(()=>eE(ek),3e3)},eE=e=>{eS(t=>t.filter(t=>t.id!==e))},eW=e=>({success:{borderColor:"#10b981",icon:l.Z,iconColor:"#10b981"},error:{borderColor:"#ef4444",icon:s.Z,iconColor:"#ef4444"},warning:{borderColor:"#eab308",icon:d.Z,iconColor:"#eab308"}})[e],eR=e=>{X(t=>{let o=new Set(t);return o.has(e)?o.delete(e):o.add(e),o})},eq=e=>{Y(t=>{let o=new Set(t);return o.has(e)?o.delete(e):o.add(e),o})},eA=async()=>{try{let{data:e,error:t}=await i.O.from("empresas").select("id, nome").order("nome",{ascending:!0});if(t)throw t;q(e||[])}catch(e){console.error("Erro ao carregar empresas:",e),ez("Erro ao carregar empresas","error")}},eT=async()=>{try{let{data:e,error:t}=await i.O.from("bancos_contas").select("saldo_inicial").eq("ativo",!0);if(t)throw t;let o=(e||[]).reduce((e,t)=>e+(t.saldo_inicial||0),0);ef(o)}catch(e){console.error("Erro ao carregar saldo inicial:",e),ef(0)}},eB=async e=>{try{let t=i.O.from("projetos").select("id, empresa_id, nome").is("projeto_pai_id",null).order("nome",{ascending:!0});e&&(t=t.eq("empresa_id",e));let{data:o,error:a}=await t;if(a)throw a;T(o||[])}catch(e){console.error("Erro ao carregar projetos:",e),ez("Erro ao carregar projetos","error")}},eD=async e=>{try{let{data:t,error:o}=await i.O.from("bancos_contas").select("id, empresa_id, banco_nome, numero_conta").eq("empresa_id",e).order("banco_nome",{ascending:!0});if(o)throw o;L(t||[])}catch(e){console.error("Erro ao carregar contas banc\xe1rias:",e),ez("Erro ao carregar contas banc\xe1rias","error")}},eI=async e=>{try{let{data:t,error:o}=await i.O.from("projetos").select("id, empresa_id, nome").eq("projeto_pai_id",e).order("nome",{ascending:!0});if(o)throw o;D(t||[])}catch(e){console.error("Erro ao carregar subprojetos:",e),ez("Erro ao carregar subprojetos","error")}},eL=async()=>{try{W(!0);let e=[],t=0,o=!0;for(;o;){let a=i.O.from("lancamentos").select("\n            id,\n            tipo,\n            sentido,\n            valor_bruto,\n            valor_liquido,\n            data_liquidacao,\n            observacoes,\n            empresa_id,\n            projeto_id,\n            banco_conta_id,\n            contraparte_id,\n            plano_conta_id,\n            documento_numero\n          ").eq("status","PAGO_RECEBIDO").gte("data_liquidacao",$).lte("data_liquidacao",ee).not("data_liquidacao","is",null).range(t,t+1e3-1);eo&&(a=a.eq("empresa_id",eo)),er&&(a=a.eq("projeto_id",er)),en&&(a=a.eq("subprojeto_id",en)),es&&(a=a.eq("banco_conta_id",es)),ec&&(a=a.eq("contraparte_id",ec));let{data:r,error:n}=await a;if(n)throw n;r&&r.length>0?(e=[...e,...r],r.length<1e3?o=!1:t+=1e3):o=!1}let a=e,{data:r}=await i.O.from("empresas").select("id, nome"),{data:n}=await i.O.from("projetos").select("id, nome"),l=Array.from(new Set(a.map(e=>e.contraparte_id).filter(e=>null!=e))),s=[];if(l.length>0){let{data:e}=await i.O.from("contrapartes").select("id, nome").in("id",l).order("nome",{ascending:!0});s=e||[]}M(s);let{data:d}=await i.O.from("contrapartes").select("id, nome"),{data:c}=await i.O.from("plano_contas_fluxo").select("id, classificacao, tipo_fluxo, grupo, categoria, subcategoria"),p=new Map;null==a||a.forEach(e=>{let t=null==c?void 0:c.find(t=>t.id===e.plano_conta_id);if(!t)return;let o=null==r?void 0:r.find(t=>t.id===e.empresa_id),a=null==n?void 0:n.find(t=>t.id===e.projeto_id),i=null==d?void 0:d.find(t=>t.id===e.contraparte_id),l=e.valor_liquido||e.valor_bruto,s="Entrada"===e.sentido,x="classificacao"===ex?t.classificacao||"N\xe3o Classificado":t.tipo_fluxo||"N\xe3o Classificado",u=t.grupo||"",h=t.categoria||"",f=t.subcategoria||"";p.has(x)||p.set(x,{nome:x,nivel:1,entradas:0,saidas:0,liquido:0,filhos:[],tipo:"grupo"});let g=p.get(x);if(s?g.entradas+=l:g.saidas+=l,g.liquido=g.entradas-g.saidas,u){let t=g.filhos.find(e=>e.nome===u);if(t||(t={nome:u,nivel:2,entradas:0,saidas:0,liquido:0,filhos:[],tipo:"categoria"},g.filhos.push(t)),s?t.entradas+=l:t.saidas+=l,t.liquido=t.entradas-t.saidas,h){let r=t.filhos.find(e=>e.nome===h);if(r||(r={nome:h,nivel:3,entradas:0,saidas:0,liquido:0,filhos:[],tipo:"subcategoria"},t.filhos.push(r)),s?r.entradas+=l:r.saidas+=l,r.liquido=r.entradas-r.saidas,f){let t=r.filhos.find(e=>e.nome===f);t||(t={nome:f,nivel:4,entradas:0,saidas:0,liquido:0,filhos:[],tipo:"item",lancamentos:[]},r.filhos.push(t)),s?t.entradas+=l:t.saidas+=l,t.liquido=t.entradas-t.saidas,t.lancamentos||(t.lancamentos=[]),t.lancamentos.push({id:e.id,data_liquidacao:e.data_liquidacao,empresa_nome:(null==o?void 0:o.nome)||"N/A",projeto_nome:(null==a?void 0:a.nome)||"N/A",contraparte_nome:(null==i?void 0:i.nome)||"N/A",valor_liquido:e.valor_liquido||e.valor_bruto,valor_bruto:e.valor_bruto,sentido:e.sentido,observacoes:e.observacoes||"",documento_numero:e.documento_numero||""})}}}});let x=Array.from(p.values()),u=e=>{e.filhos.sort((e,t)=>e.nome.localeCompare(t.nome)),e.filhos.forEach(u)};x.forEach(u),x.sort((e,t)=>e.nome.localeCompare(t.nome)),P(x);let h=x.reduce((e,t)=>e+t.entradas,0),f=x.reduce((e,t)=>e+t.saidas,0);em(h),ey(f);let{data:g}=await i.O.from("bancos_contas").select("saldo_inicial").eq("ativo",!0),m=(g||[]).reduce((e,t)=>e+(t.saldo_inicial||0),0);er?ev(h-f):ev(m+h-f)}catch(e){console.error("Erro ao carregar dados realizados:",e),ez("Erro ao carregar dados","error"),P([])}finally{W(!1)}},eZ=(e,t,o)=>{H(e);let a=new Date;if(t){let e=new Date(t,0,1),o=new Date(t,11,31);Q(z(e)),et(z(o))}else"ano_atual"===o?(Q(z(new Date(a.getFullYear(),0,1))),et(z(a))):"ultimos_12_meses"===o&&(Q(z(new Date(a.getFullYear(),a.getMonth()-11,1))),et(z(a)))},eM=async()=>{if(!$||!ee){ez("Informe a data inicial e final","warning");return}if(new Date(ee)<new Date($)){ez("Data final deve ser maior ou igual \xe0 data inicial","warning");return}o||await eL()},eO=e=>e.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2});if(o)return(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:(0,a.jsx)("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#1555D6",borderRadius:"50%",animation:"spin 1s linear infinite"}})});let eN=F.map(e=>({classificacao:e.nome.length>20?e.nome.substring(0,20)+"...":e.nome,entradas:e.entradas,saidas:e.saidas,liquido:e.liquido}));return(0,a.jsxs)("div",{style:{padding:"24px",maxWidth:"1800px",margin:"0 auto"},children:[(0,a.jsxs)("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:"Fluxo de Caixa Realizado"}),(0,a.jsx)("p",{style:{fontSize:"14px",color:"#6b7280"},children:"Entradas e sa\xeddas efetivadas (Pagos/Recebidos)"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{try{let e=(t,o)=>{let a="  ".repeat(t.nivel-1);o.push(["".concat(a).concat(t.nome),t.nivel.toString(),eO(t.entradas),eO(t.saidas),eO(t.liquido)]),t.filhos.forEach(t=>e(t,o))},t=[];F.forEach(o=>e(o,t));let o='<html xmlns:x="urn:schemas-microsoft-com:office:excel">';o+='<head><meta charset="UTF-8"><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Fluxo de Caixa</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml></head><body><table border="1"><thead><tr style="background-color: #f0f0f0; font-weight: bold;"><th style="text-align: left; padding: 8px;">R\xf3tulo de Linha</th><th style="text-align: center; padding: 8px;">N\xedvel</th><th style="text-align: right; padding: 8px;">Entradas</th><th style="text-align: right; padding: 8px;">Sa\xeddas</th><th style="text-align: right; padding: 8px;">L\xedquido</th></tr></thead><tbody>',t.forEach(e=>{o+="<tr>"+'<td style="text-align: left; padding: 5px;">'.concat(e[0],"</td>")+'<td style="text-align: center; padding: 5px;">'.concat(e[1],"</td>")+'<td style="text-align: right; padding: 5px;">'.concat(e[2],"</td>")+'<td style="text-align: right; padding: 5px;">'.concat(e[3],"</td>")+'<td style="text-align: right; padding: 5px;">'.concat(e[4],"</td>")+"</tr>"}),o+="</tbody></table></body></html>";let a=new Blob(["\uFEFF"+o],{type:"application/vnd.ms-excel;charset=utf-8"}),r=document.createElement("a");r.href=URL.createObjectURL(a),r.download="FluxoCaixaRealizado_".concat($,"_").concat(ee,".xls"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href),ez("Excel exportado com sucesso!","success")}catch(e){console.error("Erro ao exportar Excel:",e),ez("Erro ao exportar Excel","error")}},disabled:0===F.length,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:0===F.length?"#e5e7eb":"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:0===F.length?"not-allowed":"pointer",transition:"all 0.2s"},onMouseEnter:e=>F.length>0&&(e.currentTarget.style.backgroundColor="#059669"),onMouseLeave:e=>F.length>0&&(e.currentTarget.style.backgroundColor="#10b981"),children:[(0,a.jsx)(c.Z,{size:18}),"Exportar Excel"]})]}),(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[(0,a.jsx)(p.Z,{size:20,color:"#1555D6"}),(0,a.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"#374151"},children:"Filtros"})]}),(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Agrupamento"}),(0,a.jsxs)("select",{value:ex,onChange:e=>eu(e.target.value),style:{width:"250px",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer",backgroundColor:"white"},children:[(0,a.jsx)("option",{value:"classificacao",children:"Por Classifica\xe7\xe3o"}),(0,a.jsx)("option",{value:"tipo_fluxo",children:"Por Tipo de Fluxo"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Per\xedodo"}),(0,a.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:E.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>eZ(e.label.toLowerCase().replace(/\s/g,"_"),e.ano,e.tipo),style:{padding:"8px 16px",backgroundColor:K===e.label.toLowerCase().replace(/\s/g,"_")?"#1555D6":"white",color:K===e.label.toLowerCase().replace(/\s/g,"_")?"white":"#374151",border:"1px solid ".concat(K===e.label.toLowerCase().replace(/\s/g,"_")?"#1555D6":"#e5e7eb"),borderRadius:"8px",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:t=>{K!==e.label.toLowerCase().replace(/\s/g,"_")&&(t.currentTarget.style.backgroundColor="#f3f4f6")},onMouseLeave:t=>{K!==e.label.toLowerCase().replace(/\s/g,"_")&&(t.currentTarget.style.backgroundColor="white")},children:e.label},e.label))})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"16px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Data Inicial *"}),(0,a.jsx)("input",{type:"date",value:$,onChange:e=>{Q(e.target.value),H("personalizado")},style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Data Final *"}),(0,a.jsx)("input",{type:"date",value:ee,onChange:e=>{et(e.target.value),H("personalizado")},min:$,style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Empresa"}),(0,a.jsxs)("select",{value:eo,onChange:e=>{ea(e.target.value),ei(""),ed("")},style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"",children:"Todas"}),R.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Projeto"}),(0,a.jsxs)("select",{value:er,onChange:e=>{ei(e.target.value),el("")},style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer",backgroundColor:"white"},children:[(0,a.jsx)("option",{value:"",children:"Todos"}),A.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Subprojeto"}),(0,a.jsxs)("select",{value:en,onChange:e=>el(e.target.value),disabled:!er,style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:er?"pointer":"not-allowed",backgroundColor:er?"white":"#f9fafb"},children:[(0,a.jsx)("option",{value:"",children:"Todos"}),B.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Conta Banc\xe1ria"}),(0,a.jsxs)("select",{value:es,onChange:e=>ed(e.target.value),disabled:!eo,style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:eo?"pointer":"not-allowed",backgroundColor:eo?"white":"#f9fafb"},children:[(0,a.jsx)("option",{value:"",children:"Todas"}),I.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.banco_nome," - ",e.numero_conta]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Contraparte"}),(0,a.jsxs)("select",{value:ec,onChange:e=>ep(e.target.value),style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer",backgroundColor:"white"},children:[(0,a.jsx)("option",{value:"",children:"Todas"}),Z.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nome},e.id))]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,a.jsx)("div",{role:"button",tabIndex:0,onClick:e=>{e.preventDefault(),e.stopPropagation(),o||eM()},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o||eM())},style:{padding:"10px 24px",backgroundColor:o?"#9ca3af":"#1555D6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:o?"not-allowed":"pointer",transition:"all 0.2s",opacity:o?.6:1,userSelect:"none",pointerEvents:o?"none":"auto"},onMouseEnter:e=>!o&&(e.currentTarget.style.backgroundColor="#1044b5"),onMouseLeave:e=>!o&&(e.currentTarget.style.backgroundColor="#1555D6"),children:o?"Carregando...":"Aplicar"}),(0,a.jsx)("button",{type:"button",onClick:()=>{let t=new Date,o=new Date(t.getFullYear(),0,1);H("ano_atual"),Q(z(o)),et(z(t)),ea(""),ei(""),el(""),ed(""),ep(""),e.push("/relatorios/fluxorealizado/realizado"),eL()},style:{padding:"10px 24px",backgroundColor:"white",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f9fafb",onMouseLeave:e=>e.currentTarget.style.backgroundColor="white",children:"Limpar"})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"20px",marginBottom:"24px"},children:[!er&&(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #6366f1"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,a.jsx)("span",{style:{fontSize:"13px",fontWeight:"500",color:"#6b7280"},children:"Saldo Banc\xe1rio Inicial"}),(0,a.jsx)(l.Z,{size:20,color:"#6366f1"})]}),(0,a.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#111827",margin:"8px 0"},children:C(eh)})]}),(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #10b981"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,a.jsx)("span",{style:{fontSize:"13px",fontWeight:"500",color:"#6b7280"},children:"Total de Entradas"}),(0,a.jsx)(x.Z,{size:20,color:"#10b981"})]}),(0,a.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#111827",margin:"8px 0"},children:C(eg)})]}),(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #ef4444"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,a.jsx)("span",{style:{fontSize:"13px",fontWeight:"500",color:"#6b7280"},children:"Total de Sa\xeddas"}),(0,a.jsx)(u.Z,{size:20,color:"#ef4444"})]}),(0,a.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#111827",margin:"8px 0"},children:C(eb)})]}),(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid ".concat(ej>=0?"#1555D6":"#ef4444")},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,a.jsx)("span",{style:{fontSize:"13px",fontWeight:"500",color:"#6b7280"},children:er?"Resultado L\xedquido":"Saldo Final"}),(0,a.jsx)(h.Z,{size:20,color:ej>=0?"#1555D6":"#ef4444"})]}),(0,a.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:ej>=0?"#1555D6":"#ef4444",margin:"8px 0"},children:C(ej)}),!er&&(0,a.jsx)("p",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"4px"},children:"Saldo Inicial + Entradas - Sa\xeddas"})]})]}),(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,a.jsxs)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"20px"},children:["Detalhamento por ","classificacao"===ex?"Classifica\xe7\xe3o":"Tipo de Fluxo"]}),0===F.length?(0,a.jsx)("div",{style:{padding:"48px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:"Nenhum dado encontrado para o per\xedodo selecionado"}):(0,a.jsx)("div",{style:{overflowX:"auto"},children:(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[(0,a.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"R\xf3tulo de Linha"}),(0,a.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#374151"},children:"Entradas"}),(0,a.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#374151"},children:"Sa\xeddas"}),(0,a.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#374151"},children:"L\xedquido"})]})}),(0,a.jsxs)("tbody",{children:[(()=>{let e=(t,o,r)=>{var i;let n="".concat(t.nome,"-").concat(t.nivel),l=U.has(n),s=t.filhos.length>0,d=t.lancamentos&&t.lancamentos.length>0,c=J.has(n),p={1:{bg:"#f0f9ff",text:"#1e40af",border:"#bfdbfe"},2:{bg:"#fef3c7",text:"#92400e",border:"#fde68a"},3:{bg:"#fce7f3",text:"#831843",border:"#fbcfe8"},4:{bg:"#f3e8ff",text:"#6b21a8",border:"#e9d5ff"}},x=p[t.nivel]||p[1],u=20*t.nivel,h=[];return h.push((0,a.jsxs)("tr",{style:{backgroundColor:x.bg,borderLeft:"4px solid ".concat(x.border),borderBottom:o!==r-1||l?"1px solid #f3f4f6":"none",cursor:s||d?"pointer":"default"},onClick:()=>{s?eR(n):d&&eq(n)},children:[(0,a.jsxs)("td",{style:{padding:"12px 16px",paddingLeft:"".concat(16+u,"px"),fontWeight:1===t.nivel?"700":2===t.nivel?"600":"500",color:x.text,display:"flex",alignItems:"center",gap:"8px"},children:[(s||d)&&(l||c?(0,a.jsx)(f.Z,{size:16,color:x.text}):(0,a.jsx)(g.Z,{size:16,color:x.text})),t.nome,d&&(0,a.jsx)("span",{style:{backgroundColor:"#e0e7ff",color:"#4338ca",padding:"2px 6px",borderRadius:"10px",fontSize:"11px",fontWeight:"500",marginLeft:"6px"},children:null===(i=t.lancamentos)||void 0===i?void 0:i.length})]}),(0,a.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",color:"#059669",fontWeight:t.nivel<=2?"600":"500"},children:C(t.entradas)}),(0,a.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",color:"#dc2626",fontWeight:t.nivel<=2?"600":"500"},children:C(t.saidas)}),(0,a.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",color:t.liquido>=0?"#1555D6":"#dc2626",fontWeight:t.nivel<=2?"700":"600"},children:C(t.liquido)})]},n)),l&&s&&t.filhos.forEach((o,a)=>{h.push(...e(o,a,t.filhos.length))}),c&&d&&t.lancamentos&&[...t.lancamentos].sort((e,t)=>new Date(t.data_liquidacao).getTime()-new Date(e.data_liquidacao).getTime()).forEach((e,t)=>{h.push((0,a.jsxs)("tr",{style:{backgroundColor:"#fafafa",borderLeft:"4px solid #e5e7eb"},children:[(0,a.jsx)("td",{style:{padding:"10px 16px",paddingLeft:"".concat(36+u,"px"),borderBottom:"1px solid #f3f4f6"},children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:"500",color:"#374151"},children:[(0,a.jsx)("span",{children:_(e.data_liquidacao)}),e.documento_numero&&(0,a.jsx)("span",{style:{backgroundColor:"#e0e7ff",color:"#4338ca",padding:"2px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"500"},children:e.documento_numero})]}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:"#9ca3af"},children:[(0,a.jsx)("span",{children:e.empresa_nome}),"N/A"!==e.projeto_nome&&(0,a.jsxs)("span",{children:[" • ",e.projeto_nome]}),(0,a.jsxs)("span",{children:[" • ",e.contraparte_nome]})]}),e.observacoes&&(0,a.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",fontStyle:"italic",marginTop:"2px"},children:e.observacoes})]})}),(0,a.jsx)("td",{style:{padding:"10px 16px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"Entrada"===e.sentido?"#059669":"#9ca3af"},children:"Entrada"===e.sentido?C(e.valor_liquido):"-"}),(0,a.jsx)("td",{style:{padding:"10px 16px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"Saida"===e.sentido?"#dc2626":"#9ca3af"},children:"Saida"===e.sentido?C(e.valor_liquido):"-"}),(0,a.jsxs)("td",{style:{padding:"10px 16px",textAlign:"right",fontSize:"12px",fontWeight:"600",color:"Entrada"===e.sentido?"#1555D6":"#dc2626"},children:["Entrada"===e.sentido?"+":"-",C(Math.abs(e.valor_liquido))]})]},"".concat(n,"-lanc-").concat(t)))}),h};return F.flatMap((t,o)=>e(t,o,F.length))})(),(0,a.jsxs)("tr",{style:{backgroundColor:"#e0f2fe",borderTop:"2px solid #1555D6",fontWeight:"700"},children:[(0,a.jsx)("td",{style:{padding:"14px 16px",color:"#374151",fontSize:"14px"},children:"TOTAL GERAL"}),(0,a.jsx)("td",{style:{padding:"14px 16px",textAlign:"right",color:"#059669",fontSize:"14px"},children:C(eg)}),(0,a.jsx)("td",{style:{padding:"14px 16px",textAlign:"right",color:"#dc2626",fontSize:"14px"},children:C(eb)}),(0,a.jsx)("td",{style:{padding:"14px 16px",textAlign:"right",color:ej>=0?"#1555D6":"#dc2626",fontSize:"15px"},children:C(ej)})]})]})]})})]}),(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,a.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"24px"},children:"Entradas e Sa\xeddas por Classifica\xe7\xe3o"}),0===eN.length?(0,a.jsx)("div",{style:{padding:"48px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:"Sem dados para exibir"}):(0,a.jsx)(m.h,{width:"100%",height:500,children:(0,a.jsxs)(b.v,{data:eN,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},barGap:8,barCategoryGap:"15%",children:[(0,a.jsx)(y.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,a.jsx)(j.K,{type:"number",stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:e=>C(e)}),(0,a.jsx)(v.B,{type:"category",dataKey:"classificacao",stroke:"#6b7280",style:{fontSize:"12px"},width:150}),(0,a.jsx)(w.u,{content:(0,a.jsx)(e=>{let{active:t,payload:o}=e;if(!t||!o||0===o.length)return null;let r=o[0].payload,i=r.classificacao,n=r.entradas||0,l=r.saidas||0,s=n-l;return"entradas"===G?(0,a.jsxs)("div",{style:{backgroundColor:"white",border:"3px solid #10b981",borderRadius:"8px",padding:"12px 16px",fontSize:"13px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[(0,a.jsx)("p",{style:{fontWeight:"700",marginBottom:"6px",color:"#374151",fontSize:"12px"},children:i}),(0,a.jsxs)("p",{style:{color:"#10b981",margin:"0",fontWeight:"700",fontSize:"15px"},children:["Entradas: ",C(n)]})]}):"saidas"===G?(0,a.jsxs)("div",{style:{backgroundColor:"white",border:"3px solid #ef4444",borderRadius:"8px",padding:"12px 16px",fontSize:"13px",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)"},children:[(0,a.jsx)("p",{style:{fontWeight:"700",marginBottom:"6px",color:"#374151",fontSize:"12px"},children:i}),(0,a.jsxs)("p",{style:{color:"#ef4444",margin:"0",fontWeight:"700",fontSize:"15px"},children:["Sa\xeddas: ",C(l)]})]}):(0,a.jsxs)("div",{style:{backgroundColor:"white",border:"3px solid #9ca3af",borderRadius:"8px",padding:"12px 16px",fontSize:"13px",boxShadow:"0 4px 12px rgba(156, 163, 175, 0.3)"},children:[(0,a.jsx)("p",{style:{fontWeight:"700",marginBottom:"10px",color:"#374151",fontSize:"13px"},children:i}),(0,a.jsxs)("p",{style:{color:"#10b981",margin:"0 0 6px 0",fontSize:"13px",fontWeight:"600"},children:["Entradas: ",C(n)]}),(0,a.jsxs)("p",{style:{color:"#ef4444",margin:"0 0 8px 0",fontSize:"13px",fontWeight:"600"},children:["Sa\xeddas: ",C(l)]}),(0,a.jsxs)("p",{style:{color:s>=0?"#1555D6":"#ef4444",margin:"0",fontWeight:"700",borderTop:"2px solid #e5e7eb",paddingTop:"8px",fontSize:"14px"},children:["Resultado L\xedquido: ",C(s)]})]})},{}),cursor:!1,isAnimationActive:!1,allowEscapeViewBox:{x:!0,y:!0}}),(0,a.jsx)(S.D,{wrapperStyle:{fontSize:"13px",paddingTop:"16px"},formatter:e=>"entradas"===e?"Entradas":"Sa\xeddas"}),(0,a.jsx)(k.$,{dataKey:"entradas",fill:"#10b981",radius:[0,8,8,0],name:"entradas",barSize:20,onMouseEnter:()=>V("entradas"),onMouseLeave:()=>V(null)}),(0,a.jsx)(k.$,{dataKey:"saidas",fill:"#ef4444",radius:[0,8,8,0],name:"saidas",barSize:20,onMouseEnter:()=>V("saidas"),onMouseLeave:()=>V(null)})]})})]}),(0,a.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999,display:"flex",flexDirection:"column",gap:"12px",pointerEvents:"none"},children:ew.map(e=>{let{borderColor:t,icon:o,iconColor:r}=eW(e.type);return(0,a.jsxs)("div",{style:{backgroundColor:"white",borderTop:"4px solid ".concat(t),padding:"16px 20px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",gap:"12px",minWidth:"400px",animation:"scaleIn 0.3s ease-out"},children:[(0,a.jsx)(o,{style:{width:"24px",height:"24px",flexShrink:0,color:r}}),(0,a.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",flex:1,color:"#374151"},children:e.message})]},e.id)})}),(0,a.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n        @keyframes scaleIn {\n          from {\n            transform: scale(0.8);\n            opacity: 0;\n          }\n          to {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n      "})]})}},1180:function(e,t,o){"use strict";o.d(t,{O:function(){return a}});let a=(0,o(20046).eI)("https://tkefmbjqiljejkmwrwsw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRrZWZtYmpxaWxqZWprbXdyd3N3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyNzEyODAsImV4cCI6MjA3NTg0NzI4MH0.fwV8APDBs7YTx3ap8km-qnhXOJx0EcXX0P68eLXgEsU",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},db:{schema:"sodcapital"}})},78030:function(e,t,o){"use strict";o.d(t,{Z:function(){return p}});var a=o(2265);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.filter((e,t,o)=>!!e&&""!==e.trim()&&o.indexOf(e)===t).join(" ").trim()},s=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.forwardRef)((e,t)=>{let{color:o="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:c="",children:p,iconNode:x,...u}=e;return(0,a.createElement)("svg",{ref:t,...d,width:r,height:r,stroke:o,strokeWidth:n?24*Number(i)/Number(r):i,className:l("lucide",c),...!p&&!s(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,o]=e;return(0,a.createElement)(t,o)}),...Array.isArray(p)?p:[p]])}),p=(e,t)=>{let o=(0,a.forwardRef)((o,i)=>{let{className:s,...d}=o;return(0,a.createElement)(c,{ref:i,iconNode:t,className:l("lucide-".concat(r(n(e))),"lucide-".concat(e),s),...d})});return o.displayName=n(e),o}},42421:function(e,t,o){"use strict";o.d(t,{Z:function(){return a}});let a=(0,o(78030).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},87592:function(e,t,o){"use strict";o.d(t,{Z:function(){return a}});let a=(0,o(78030).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},62476:function(e,t,o){"use strict";o.d(t,{Z:function(){return a}});let a=(0,o(78030).Z)("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]])},45190:function(e,t,o){"use strict";o.d(t,{Z:function(){return a}});let a=(0,o(78030).Z)("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]])},37164:function(e,t,o){"use strict";o.d(t,{Z:function(){return a}});let a=(0,o(78030).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},65607:function(e,t,o){"use strict";o.d(t,{Z:function(){return a}});let a=(0,o(78030).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},69003:function(e,t,o){"use strict";o.d(t,{Z:function(){return a}});let a=(0,o(78030).Z)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},29162:function(e,t,o){"use strict";o.d(t,{Z:function(){return a}});let a=(0,o(78030).Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},16463:function(e,t,o){"use strict";var a=o(71169);o.o(a,"usePathname")&&o.d(t,{usePathname:function(){return a.usePathname}}),o.o(a,"useRouter")&&o.d(t,{useRouter:function(){return a.useRouter}}),o.o(a,"useSearchParams")&&o.d(t,{useSearchParams:function(){return a.useSearchParams}})},25974:function(e,t,o){"use strict";o.d(t,{v:function(){return s}});var a=o(84478),r=o(45745),i=o(2842),n=o(9542),l=o(3956),s=(0,a.z)({chartName:"BarChart",GraphicalChild:r.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:i.K},{axisType:"yAxis",AxisComp:n.B}],formatAxisMap:l.t9})}},function(e){e.O(0,[46,612,971,23,744],function(){return e(e.s=2947)}),_N_E=e.O()}]);