(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{18064:function(e,t,o){Promise.resolve().then(o.bind(o,82209))},82209:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return R}});var r=o(57437),a=o(2265),i=o(1180),n=o(16463),s=o(51077),l=o(29162),d=o(53225),p=o(37164),c=o(65607),x=o(95737),h=o(45190),u=o(62476),f=o(35231),g=o(92566),b=o(54142),m=o(2842),y=o(9542),j=o(85475),v=o(20153),S=o(16638),w=o(25974),C=o(45745);let k=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),z=e=>e?new Date(e).toLocaleDateString("pt-BR"):"",E=e=>e.toISOString().split("T")[0],B=(e,t)=>{let o=new Date(e);return o.setDate(o.getDate()+t),o},A=[{label:"Pr\xf3x. 7 dias",dias:7},{label:"Pr\xf3x. 30 dias",dias:30},{label:"Pr\xf3x. 60 dias",dias:60},{label:"Pr\xf3x. 90 dias",dias:90},{label:"Pr\xf3x. 180 dias",dias:180},{label:"Personalizado",dias:0}];function R(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[o,R]=(0,a.useState)(!0),[T,W]=(0,a.useState)([]),[_,I]=(0,a.useState)([]),[D,O]=(0,a.useState)([]),[P,M]=(0,a.useState)([]),[Z,q]=(0,a.useState)([]),[N,F]=(0,a.useState)([]),[L,V]=(0,a.useState)([]),[U,X]=(0,a.useState)(30),[J,K]=(0,a.useState)(""),[H,$]=(0,a.useState)(""),[Y,G]=(0,a.useState)("AMBOS"),[Q,ee]=(0,a.useState)(""),[et,eo]=(0,a.useState)(""),[er,ea]=(0,a.useState)(""),[ei,en]=(0,a.useState)(!0),[es,el]=(0,a.useState)(0),[ed,ep]=(0,a.useState)(0),[ec,ex]=(0,a.useState)(0),[eh,eu]=(0,a.useState)(0),[ef,eg]=(0,a.useState)({}),[eb,em]=(0,a.useState)([]),[ey,ej]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=new Date,t=B(e,30);K(E(e)),$(E(t))},[]),(0,a.useEffect)(()=>{let e=t.get("preset"),o=t.get("dataInicial"),r=t.get("dataFinal"),a=t.get("natureza"),i=t.get("empresa"),n=t.get("projeto"),s=t.get("bancoConta"),l=t.get("somenteAbertos");e&&X(parseInt(e)),o&&K(o),r&&$(r),a&&G(a),i&&ee(i),n&&eo(n),s&&ea(s),null!==l&&en("true"===l)},[]),(0,a.useEffect)(()=>{eC()},[]),(0,a.useEffect)(()=>{Q?(ek(Q),ez(Q)):(I([]),O([]),eo(""),ea(""))},[Q]),(0,a.useEffect)(()=>{J&&H&&eE()},[J,H,Y,Q,et,er,ei]);let ev=(e,t)=>{ej(ey+1);let o={id:ey,message:e,type:t};em(e=>[...e,o]),setTimeout(()=>eS(ey),3e3)},eS=e=>{em(t=>t.filter(t=>t.id!==e))},ew=e=>({success:{borderColor:"#10b981",icon:s.Z,iconColor:"#10b981"},error:{borderColor:"#ef4444",icon:l.Z,iconColor:"#ef4444"},warning:{borderColor:"#eab308",icon:d.Z,iconColor:"#eab308"}})[e],eC=async()=>{try{let{data:e,error:t}=await i.O.from("empresas").select("id, nome").order("nome",{ascending:!0});if(t)throw t;W(e||[])}catch(e){console.error("Erro ao carregar empresas:",e),ev("Erro ao carregar empresas","error")}},ek=async e=>{try{let{data:t,error:o}=await i.O.from("projetos").select("id, empresa_id, nome").eq("empresa_id",e).order("nome",{ascending:!0});if(o)throw o;I(t||[])}catch(e){console.error("Erro ao carregar projetos:",e),ev("Erro ao carregar projetos","error")}},ez=async e=>{try{let{data:t,error:o}=await i.O.from("bancos_contas").select("id, empresa_id, banco_nome, numero_conta").eq("empresa_id",e).order("banco_nome",{ascending:!0});if(o)throw o;O(t||[])}catch(e){console.error("Erro ao carregar contas banc\xe1rias:",e),ev("Erro ao carregar contas banc\xe1rias","error")}},eE=async()=>{try{R(!0),await eB();let e=await eA();eR(e)}catch(e){console.error("Erro ao carregar fluxo de caixa:",e),ev("Erro ao carregar dados do fluxo","error")}finally{R(!1)}},eB=async()=>{try{let e=i.O.from("saldos_diarios").select("banco_conta_id, saldo_final, data").lte("data",J).order("data",{ascending:!1});er&&(e=e.eq("banco_conta_id",er));let{data:t,error:o}=await e;if(o)throw o;let r=new Map;null==t||t.forEach(e=>{r.has(e.banco_conta_id)||r.set(e.banco_conta_id,e.saldo_final)});let a=Array.from(r.values()).reduce((e,t)=>e+t,0);el(a)}catch(e){console.error("Erro ao carregar saldo inicial:",e),el(0)}},eA=async()=>{try{let e=i.O.from("lancamentos").select("\n          id,\n          tipo,\n          valor_bruto,\n          valor_liquido,\n          status,\n          data_liquidacao,\n          data_vencimento,\n          empresa_id,\n          projeto_id,\n          banco_conta_id,\n          contraparte_id,\n          subcategoria_id\n        ");e=ei?e.eq("status","ABERTO"):e.in("status",["ABERTO","PAGO_RECEBIDO"]),"AMBOS"!==Y&&(e=e.eq("tipo",Y)),Q&&(e=e.eq("empresa_id",Q)),et&&(e=e.eq("projeto_id",et)),er&&(e=e.eq("banco_conta_id",er));let{data:t,error:o}=await e;if(o)throw o;let{data:r}=await i.O.from("empresas").select("id, nome"),{data:a}=await i.O.from("projetos").select("id, nome"),{data:n}=await i.O.from("contrapartes").select("id, nome"),{data:s}=await i.O.from("pc_subcategorias").select("id, nome"),l=[],d=new Map,p=[],c=[];null==t||t.forEach(e=>{let t;if(!(t=ei||"ABERTO"===e.status?e.data_vencimento:e.data_liquidacao||e.data_vencimento)||t<J||t>H)return;let o=null==r?void 0:r.find(t=>t.id===e.empresa_id),i=null==a?void 0:a.find(t=>t.id===e.projeto_id),x=null==n?void 0:n.find(t=>t.id===e.contraparte_id),h=null==s?void 0:s.find(t=>t.id===e.subcategoria_id),u=e.valor_liquido||e.valor_bruto;l.push({data:t,tipo:e.tipo,empresa:(null==o?void 0:o.nome)||"-",projeto:(null==i?void 0:i.nome)||"-",subcategoria:(null==h?void 0:h.nome)||"-",contraparte:(null==x?void 0:x.nome)||"-",valor:u,status:e.status}),d.has(t)||d.set(t,{entradas:0,saidas:0});let f=d.get(t);"RECEITA"===e.tipo?f.entradas+=u:f.saidas+=u;let g=(null==h?void 0:h.nome)||"N\xe3o classificado",b=p.findIndex(e=>e.nome===g);b>=0?p[b].valor+=Math.abs(u):p.push({nome:g,valor:Math.abs(u),percentual:0});let m=(null==x?void 0:x.nome)||"N\xe3o informado",y=c.findIndex(e=>e.nome===m);y>=0?c[y].valor+=Math.abs(u):c.push({nome:m,valor:Math.abs(u),percentual:0})}),l.sort((e,t)=>e.data.localeCompare(t.data)),M(l);let x=[],h=es,u=new Date(J),f=new Date(H);for(let e=new Date(u);e<=f;e.setDate(e.getDate()+1)){let t=E(e),o=d.get(t)||{entradas:0,saidas:0};h+=o.entradas-o.saidas,x.push({data:t,saldo:h,entradas:o.entradas,saidas:o.saidas})}q(x);let g=l.filter(e=>"RECEITA"===e.tipo).reduce((e,t)=>e+t.valor,0),b=l.filter(e=>"DESPESA"===e.tipo).reduce((e,t)=>e+t.valor,0);ep(g),ex(b),eu(es+g-b);let m=p.reduce((e,t)=>e+t.valor,0);p.forEach(e=>{e.percentual=m>0?e.valor/m*100:0}),p.sort((e,t)=>t.valor-e.valor),F([...p.slice(0,10)]);let y=c.reduce((e,t)=>e+t.valor,0);return c.forEach(e=>{e.percentual=y>0?e.valor/y*100:0}),c.sort((e,t)=>t.valor-e.valor),V([...c.slice(0,10)]),l}catch(e){return console.error("Erro ao carregar agenda:",e),M([]),q([]),[]}},eR=e=>{let t=new Date,o={};for(let r of[7,30,60,90,180]){let a=E(B(t,r)),i=e.filter(e=>e.data>=E(t)&&e.data<=a),n=i.filter(e=>"RECEITA"===e.tipo).reduce((e,t)=>e+t.valor,0),s=i.filter(e=>"DESPESA"===e.tipo).reduce((e,t)=>e+t.valor,0);o[r]={entradas:n,saidas:s,liquido:n-s}}eg(o)},eT=e=>{if(X(e),e>0){let t=new Date,o=B(t,e);K(E(t)),$(E(o))}};return o?(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:(0,r.jsx)("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#1555D6",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):(0,r.jsxs)("div",{style:{padding:"24px",maxWidth:"1800px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#111827",marginBottom:"4px"},children:"Fluxo de Caixa"}),(0,r.jsx)("p",{style:{fontSize:"14px",color:"#6b7280"},children:"Proje\xe7\xe3o e an\xe1lise de entradas e sa\xeddas"})]}),(0,r.jsxs)("button",{onClick:()=>{try{let e=P.map(e=>[z(e.data),"RECEITA"===e.tipo?"Receita":"Despesa",e.empresa,e.projeto,e.subcategoria,e.contraparte,e.valor.toFixed(2),e.status]),t=["Data,Tipo,Empresa,Projeto,Subcategoria,Contraparte,Valor,Status",...e.map(e=>e.join(","))].join("\n"),o=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(o),r.download="FluxoCaixa_".concat(J,"_").concat(H,".csv"),r.click(),ev("CSV exportado com sucesso!","success")}catch(e){console.error("Erro ao exportar CSV:",e),ev("Erro ao exportar CSV","error")}},disabled:0===P.length,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:0===P.length?"#e5e7eb":"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:0===P.length?"not-allowed":"pointer",transition:"all 0.2s"},onMouseOver:e=>P.length>0&&(e.currentTarget.style.backgroundColor="#059669"),onMouseOut:e=>P.length>0&&(e.currentTarget.style.backgroundColor="#10b981"),children:[(0,r.jsx)(p.Z,{size:18}),"Exportar CSV"]})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[(0,r.jsx)(c.Z,{size:20,color:"#1555D6"}),(0,r.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"#374151"},children:"Filtros"})]}),(0,r.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Per\xedodo"}),(0,r.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:A.map(e=>(0,r.jsx)("button",{onClick:()=>eT(e.dias),style:{padding:"8px 16px",backgroundColor:U===e.dias?"#1555D6":"white",color:U===e.dias?"white":"#374151",border:"1px solid ".concat(U===e.dias?"#1555D6":"#e5e7eb"),borderRadius:"8px",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:t=>{U!==e.dias&&(t.currentTarget.style.backgroundColor="#f3f4f6")},onMouseOut:t=>{U!==e.dias&&(t.currentTarget.style.backgroundColor="white")},children:e.label},e.dias))})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Data Inicial *"}),(0,r.jsx)("input",{type:"date",value:J,onChange:e=>{K(e.target.value),X(0)},style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Data Final *"}),(0,r.jsx)("input",{type:"date",value:H,onChange:e=>{$(e.target.value),X(0)},min:J,style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Natureza"}),(0,r.jsxs)("select",{value:Y,onChange:e=>G(e.target.value),style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,r.jsx)("option",{value:"AMBOS",children:"Ambos"}),(0,r.jsx)("option",{value:"RECEITA",children:"Receitas"}),(0,r.jsx)("option",{value:"DESPESA",children:"Despesas"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Empresa"}),(0,r.jsxs)("select",{value:Q,onChange:e=>{ee(e.target.value),eo(""),ea("")},style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,r.jsx)("option",{value:"",children:"Todas"}),T.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Projeto"}),(0,r.jsxs)("select",{value:et,onChange:e=>eo(e.target.value),disabled:!Q,style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:Q?"pointer":"not-allowed",backgroundColor:Q?"white":"#f9fafb"},children:[(0,r.jsx)("option",{value:"",children:"Todos"}),_.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Conta Banc\xe1ria"}),(0,r.jsxs)("select",{value:er,onChange:e=>ea(e.target.value),disabled:!Q,style:{width:"100%",padding:"9px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:Q?"pointer":"not-allowed",backgroundColor:Q?"white":"#f9fafb"},children:[(0,r.jsx)("option",{value:"",children:"Todas"}),D.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.banco_nome," - ",e.numero_conta]},e.id))]})]})]}),(0,r.jsx)("div",{style:{marginBottom:"16px"},children:(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"14px",color:"#374151"},children:[(0,r.jsx)("input",{type:"checkbox",checked:ei,onChange:e=>en(e.target.checked),style:{cursor:"pointer"}}),"Somente t\xedtulos em aberto"]})}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,r.jsx)("button",{onClick:()=>{if(!J||!H){ev("Informe a data inicial e final","warning");return}if(new Date(H)<new Date(J)){ev("Data final deve ser maior ou igual \xe0 data inicial","warning");return}let t=new URLSearchParams;t.set("preset",U.toString()),t.set("dataInicial",J),t.set("dataFinal",H),t.set("natureza",Y),t.set("somenteAbertos",ei.toString()),Q&&t.set("empresa",Q),et&&t.set("projeto",et),er&&t.set("bancoConta",er),e.push("/relatorios/fluxo?".concat(t.toString())),eE()},style:{padding:"10px 24px",backgroundColor:"#1555D6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1044b5",onMouseOut:e=>e.currentTarget.style.backgroundColor="#1555D6",children:"Aplicar"}),(0,r.jsx)("button",{onClick:()=>{let t=new Date,o=B(t,30);X(30),K(E(t)),$(E(o)),G("AMBOS"),ee(""),eo(""),ea(""),en(!0),e.push("/relatorios/fluxo"),eE()},style:{padding:"10px 24px",backgroundColor:"white",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f9fafb",onMouseOut:e=>e.currentTarget.style.backgroundColor="white",children:"Limpar"})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginBottom:"24px"},children:[(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #6b7280"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},children:"Saldo Inicial"}),(0,r.jsx)(x.Z,{size:24,color:"#6b7280"})]}),(0,r.jsx)("div",{style:{fontSize:"32px",fontWeight:"700",color:"#374151"},children:k(es)})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #10b981"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},children:"Entradas (Per\xedodo)"}),(0,r.jsx)(h.Z,{size:24,color:"#10b981"})]}),(0,r.jsx)("div",{style:{fontSize:"32px",fontWeight:"700",color:"#059669"},children:k(ed)})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid #ef4444"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},children:"Sa\xeddas (Per\xedodo)"}),(0,r.jsx)(u.Z,{size:24,color:"#ef4444"})]}),(0,r.jsx)("div",{style:{fontSize:"32px",fontWeight:"700",color:"#dc2626"},children:k(ec)})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderTop:"4px solid ".concat(eh>=0?"#1555D6":"#ef4444")},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},children:"Saldo Projetado"}),(0,r.jsx)(s.Z,{size:24,color:eh>=0?"#1555D6":"#ef4444"})]}),(0,r.jsx)("div",{style:{fontSize:"32px",fontWeight:"700",color:eh>=0?"#1555D6":"#dc2626"},children:k(eh)})]})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"24px"},children:"Evolu\xe7\xe3o do Saldo"}),0===Z.length?(0,r.jsx)("div",{style:{padding:"48px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:"Sem dados para exibir"}):(0,r.jsx)(f.h,{width:"100%",height:400,children:(0,r.jsxs)(g.w,{data:Z,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,r.jsx)(m.K,{dataKey:"data",tickFormatter:e=>z(e),stroke:"#6b7280",style:{fontSize:"12px"}}),(0,r.jsx)(y.B,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:e=>k(e)}),(0,r.jsx)(j.u,{formatter:(e,t)=>[k(e),{saldo:"Saldo",entradas:"Entradas",saidas:"Sa\xeddas"}[t]||t],labelFormatter:e=>z(e),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px"}}),(0,r.jsx)(v.D,{wrapperStyle:{fontSize:"13px",paddingTop:"16px"},formatter:e=>({saldo:"Saldo",entradas:"Entradas",saidas:"Sa\xeddas"})[e]||e}),(0,r.jsx)(S.x,{type:"monotone",dataKey:"saldo",stroke:"#1555D6",strokeWidth:3,dot:{fill:"#1555D6",r:4},activeDot:{r:6},name:"saldo"})]})})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"24px"},children:"Entradas e Sa\xeddas Di\xe1rias"}),0===Z.length?(0,r.jsx)("div",{style:{padding:"48px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:"Sem dados para exibir"}):(0,r.jsx)(f.h,{width:"100%",height:400,children:(0,r.jsxs)(w.v,{data:Z,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,r.jsx)(m.K,{dataKey:"data",tickFormatter:e=>z(e),stroke:"#6b7280",style:{fontSize:"12px"}}),(0,r.jsx)(y.B,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:e=>k(e)}),(0,r.jsx)(j.u,{formatter:e=>k(e),labelFormatter:e=>z(e),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px"}}),(0,r.jsx)(v.D,{wrapperStyle:{fontSize:"13px",paddingTop:"16px"},formatter:e=>"entradas"===e?"Entradas":"Sa\xeddas"}),(0,r.jsx)(C.$,{dataKey:"entradas",fill:"#10b981",radius:[8,8,0,0],name:"entradas"}),(0,r.jsx)(C.$,{dataKey:"saidas",fill:"#ef4444",radius:[8,8,0,0],name:"saidas"})]})})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"20px"},children:"Horizontes de Planejamento"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[7,30,60,90,180].map(e=>{let t=ef[e]||{entradas:0,saidas:0,liquido:0};return(0,r.jsxs)("div",{style:{padding:"16px",border:"1px solid #e5e7eb",borderRadius:"12px",backgroundColor:"#fafafa"},children:[(0,r.jsxs)("div",{style:{fontSize:"12px",fontWeight:"600",color:"#6b7280",marginBottom:"12px"},children:["Pr\xf3ximos ",e," dias"]}),(0,r.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,r.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginBottom:"2px"},children:"Entradas"}),(0,r.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#059669"},children:k(t.entradas)})]}),(0,r.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,r.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginBottom:"2px"},children:"Sa\xeddas"}),(0,r.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#dc2626"},children:k(t.saidas)})]}),(0,r.jsxs)("div",{style:{paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[(0,r.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginBottom:"2px"},children:"L\xedquido"}),(0,r.jsx)("div",{style:{fontSize:"18px",fontWeight:"700",color:t.liquido>=0?"#1555D6":"#dc2626"},children:k(t.liquido)})]})]},e)})})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"16px"},children:"Agenda Di\xe1ria"}),0===P.length?(0,r.jsx)("div",{style:{padding:"48px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:"Sem lan\xe7amentos para o per\xedodo selecionado"}):(0,r.jsxs)("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},children:[(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{backgroundColor:"#f9fafb"},children:[(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Data"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Tipo"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Empresa"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Projeto"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Subcategoria"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Contraparte"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Valor"}),(0,r.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:"600",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Status"})]})}),(0,r.jsx)("tbody",{children:P.slice(0,50).map((e,t)=>(0,r.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:z(e.data)}),(0,r.jsx)("td",{style:{padding:"12px 16px"},children:(0,r.jsx)("span",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",backgroundColor:"RECEITA"===e.tipo?"#d1fae5":"#fee2e2",color:"RECEITA"===e.tipo?"#065f46":"#991b1b"},children:"RECEITA"===e.tipo?"Receita":"Despesa"})}),(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.empresa}),(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.projeto}),(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.subcategoria}),(0,r.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.contraparte}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:"RECEITA"===e.tipo?"#059669":"#dc2626"},children:k(e.valor)}),(0,r.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(0,r.jsx)("span",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"500",backgroundColor:"ABERTO"===e.status?"#fef3c7":"#d1fae5",color:"ABERTO"===e.status?"#92400e":"#065f46"},children:"ABERTO"===e.status?"Aberto":"Pago/Recebido"})})]},t))})]}),P.length>50&&(0,r.jsxs)("div",{style:{padding:"12px 16px",textAlign:"center",fontSize:"13px",color:"#6b7280",backgroundColor:"#f9fafb",borderTop:"1px solid #e5e7eb"},children:["Mostrando 50 de ",P.length," registros. Use o CSV para ver todos."]})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"24px"},children:[(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"16px"},children:"Top 10 Subcategorias"}),0===N.length?(0,r.jsx)("div",{style:{padding:"24px",textAlign:"center",color:"#9ca3af",fontSize:"13px"},children:"Sem dados"}):(0,r.jsx)("div",{children:N.map((e,t)=>(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 0",borderBottom:t<N.length-1?"1px solid #f3f4f6":"none"},children:[(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontSize:"14px",color:"#374151",marginBottom:"2px"},children:e.nome}),(0,r.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280"},children:[e.percentual.toFixed(2),"%"]})]}),(0,r.jsx)("div",{style:{fontSize:"15px",fontWeight:"600",color:"#374151"},children:k(e.valor)})]},t))})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"16px"},children:"Top 10 Contrapartes"}),0===L.length?(0,r.jsx)("div",{style:{padding:"24px",textAlign:"center",color:"#9ca3af",fontSize:"13px"},children:"Sem dados"}):(0,r.jsx)("div",{children:L.map((e,t)=>(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 0",borderBottom:t<L.length-1?"1px solid #f3f4f6":"none"},children:[(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontSize:"14px",color:"#374151",marginBottom:"2px"},children:e.nome}),(0,r.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280"},children:[e.percentual.toFixed(2),"%"]})]}),(0,r.jsx)("div",{style:{fontSize:"15px",fontWeight:"600",color:"#374151"},children:k(e.valor)})]},t))})]})]}),(0,r.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999,display:"flex",flexDirection:"column",gap:"12px",pointerEvents:"none"},children:eb.map(e=>{let{borderColor:t,icon:o,iconColor:a}=ew(e.type);return(0,r.jsxs)("div",{style:{backgroundColor:"white",borderTop:"4px solid ".concat(t),padding:"16px 20px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",gap:"12px",minWidth:"400px",animation:"scaleIn 0.3s ease-out"},children:[(0,r.jsx)(o,{style:{width:"24px",height:"24px",flexShrink:0,color:a}}),(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",flex:1,color:"#374151"},children:e.message})]},e.id)})}),(0,r.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n        @keyframes scaleIn {\n          from {\n            transform: scale(0.8);\n            opacity: 0;\n          }\n          to {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n      "})]})}},1180:function(e,t,o){"use strict";o.d(t,{O:function(){return r}});let r=(0,o(20046).eI)("https://tkefmbjqiljejkmwrwsw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRrZWZtYmpxaWxqZWprbXdyd3N3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyNzEyODAsImV4cCI6MjA3NTg0NzI4MH0.fwV8APDBs7YTx3ap8km-qnhXOJx0EcXX0P68eLXgEsU",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},db:{schema:"sodcapital"}})},78030:function(e,t,o){"use strict";o.d(t,{Z:function(){return c}});var r=o(2265);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.filter((e,t,o)=>!!e&&""!==e.trim()&&o.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,r.forwardRef)((e,t)=>{let{color:o="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:p="",children:c,iconNode:x,...h}=e;return(0,r.createElement)("svg",{ref:t,...d,width:a,height:a,stroke:o,strokeWidth:n?24*Number(i)/Number(a):i,className:s("lucide",p),...!c&&!l(h)&&{"aria-hidden":"true"},...h},[...x.map(e=>{let[t,o]=e;return(0,r.createElement)(t,o)}),...Array.isArray(c)?c:[c]])}),c=(e,t)=>{let o=(0,r.forwardRef)((o,i)=>{let{className:l,...d}=o;return(0,r.createElement)(p,{ref:i,iconNode:t,className:s("lucide-".concat(a(n(e))),"lucide-".concat(e),l),...d})});return o.displayName=n(e),o}},62476:function(e,t,o){"use strict";o.d(t,{Z:function(){return r}});let r=(0,o(78030).Z)("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]])},45190:function(e,t,o){"use strict";o.d(t,{Z:function(){return r}});let r=(0,o(78030).Z)("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]])},37164:function(e,t,o){"use strict";o.d(t,{Z:function(){return r}});let r=(0,o(78030).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},65607:function(e,t,o){"use strict";o.d(t,{Z:function(){return r}});let r=(0,o(78030).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},29162:function(e,t,o){"use strict";o.d(t,{Z:function(){return r}});let r=(0,o(78030).Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},95737:function(e,t,o){"use strict";o.d(t,{Z:function(){return r}});let r=(0,o(78030).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},16463:function(e,t,o){"use strict";var r=o(71169);o.o(r,"usePathname")&&o.d(t,{usePathname:function(){return r.usePathname}}),o.o(r,"useRouter")&&o.d(t,{useRouter:function(){return r.useRouter}}),o.o(r,"useSearchParams")&&o.d(t,{useSearchParams:function(){return r.useSearchParams}})},25974:function(e,t,o){"use strict";o.d(t,{v:function(){return l}});var r=o(84478),a=o(45745),i=o(2842),n=o(9542),s=o(3956),l=(0,r.z)({chartName:"BarChart",GraphicalChild:a.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:i.K},{axisType:"yAxis",AxisComp:n.B}],formatAxisMap:s.t9})}},function(e){e.O(0,[46,612,566,971,23,744],function(){return e(e.s=18064)}),_N_E=e.O()}]);