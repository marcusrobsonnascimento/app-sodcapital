(()=>{var e={};e.id=114,e.ids=[114],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},90504:(e,o,t)=>{"use strict";t.r(o),t.d(o,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d}),t(26609),t(1246),t(35866);var r=t(23191),n=t(88716),a=t(37922),i=t.n(a),l=t(95231),s={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>l[e]);t.d(o,s);let d=["",{children:["financeiro",{children:["lancamentos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,26609)),"C:\\Projetos\\app-sodcapital\\app\\financeiro\\lancamentos\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1246)),"C:\\Projetos\\app-sodcapital\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Projetos\\app-sodcapital\\app\\financeiro\\lancamentos\\page.tsx"],p="/financeiro/lancamentos/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/financeiro/lancamentos/page",pathname:"/financeiro/lancamentos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63723:(e,o,t)=>{Promise.resolve().then(t.bind(t,1101))},1101:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>S});var r=t(10326),n=t(17577),a=t(25472),i=t(30361),l=t(50949),s=t(69669),d=t(83855),c=t(88307),p=t(94019),x=t(44389),u=t(98091),g=t(74723),b=t(68284),h=t(770);function f({value:e,onChange:o,sentidoFilter:t,error:a}){let[i,l]=(0,n.useState)([]),[s,d]=(0,n.useState)(!0),[c,p]=(0,n.useState)(""),[x,u]=(0,n.useState)(""),[g,b]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),[m,y]=(0,n.useState)([]),[j,C]=(0,n.useState)([]),[v,_]=(0,n.useState)([]),[S,w]=(0,n.useState)([]),T=e=>{if(p(e),u(""),b(""),f(""),o(""),!e){C([]),_([]),w([]);return}let r=i.filter(o=>o.tipo_fluxo===e);t&&(r=r.filter(e=>e.sentido===t)),C(Array.from(new Set(r.map(e=>e.grupo))).sort()),_([]),w([])},k=e=>{if(u(e),b(""),f(""),o(""),!e){_([]),w([]);return}let r=i.filter(o=>o.tipo_fluxo===c&&o.grupo===e);t&&(r=r.filter(e=>e.sentido===t)),_(Array.from(new Set(r.map(e=>e.categoria))).sort()),w([])},z=e=>{if(b(e),f(""),o(""),!e){w([]);return}let r=i.filter(o=>o.tipo_fluxo===c&&o.grupo===x&&o.categoria===e);t&&(r=r.filter(e=>e.sentido===t)),w(Array.from(new Set(r.map(e=>e.subcategoria))).sort())},D=e=>{if(f(e),!e){o("");return}let r=i.find(o=>o.tipo_fluxo===c&&o.grupo===x&&o.categoria===g&&o.subcategoria===e);t&&r&&(r=i.find(o=>o.tipo_fluxo===c&&o.grupo===x&&o.categoria===g&&o.subcategoria===e&&o.sentido===t)),r&&o(r.id)};if(s)return r.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280"},children:"Carregando plano de contas..."});let B={width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:"pointer",backgroundColor:"white"},O={...B,backgroundColor:"#f9fafb",cursor:"not-allowed",opacity:.6};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Tipo de Fluxo"}),(0,r.jsxs)("select",{value:c,onChange:e=>T(e.target.value),style:B,onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"",children:"Selecione"}),m.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Grupo"}),(0,r.jsxs)("select",{value:x,onChange:e=>k(e.target.value),disabled:!c,style:c?B:O,onFocus:e=>{c&&(e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)")},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"",children:"Selecione"}),j.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Categoria"}),(0,r.jsxs)("select",{value:g,onChange:e=>z(e.target.value),disabled:!x,style:x?B:O,onFocus:e=>{x&&(e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)")},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"",children:"Selecione"}),v.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Subcategoria"}),(0,r.jsxs)("select",{value:h,onChange:e=>D(e.target.value),disabled:!g,style:g?B:O,onFocus:e=>{g&&(e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)")},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"",children:"Selecione"}),S.map(e=>r.jsx("option",{value:e,children:e},e))]})]})]}),e&&(0,r.jsxs)("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#f0f9ff",border:"1px solid #bfdbfe",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{style:{fontSize:"12px",fontWeight:"500",color:"#1e40af"},children:["C\xf3digo Financeiro:"," "]}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:"#1e3a8a",fontFamily:"monospace"},children:i.find(o=>o.id===e)?.codigo_conta})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{style:{fontSize:"12px",fontWeight:"500",color:"#1e40af"},children:["Plano Cont\xe1bil:"," "]}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:"#1e3a8a",fontFamily:"monospace"},children:i.find(o=>o.id===e)?.cod_cont||"1.00.000.001"}),(0,r.jsxs)("span",{style:{fontSize:"12px",fontWeight:"500",color:"#1e40af"},children:[" ","- ",i.find(o=>o.id===e)?.conta_cont||"Em Desenvolvimento"]})]})]}),a&&r.jsx("p",{style:{marginTop:"6px",fontSize:"12px",color:"#ef4444",fontWeight:"500"},children:a})]})}let m=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),y=e=>{let o=e.replace(/\D/g,"");if(!o)return"";let t=parseInt(o,10)/100;return new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},j=e=>e&&parseFloat(e.replace(/\./g,"").replace(",","."))||0,C=e=>e?e.split("T")[0]:"",v=h.Ry({tipo:h.Km(["Entrada","Saida"],{required_error:"Tipo \xe9 obrigat\xf3rio"}),empresa_id:h.Z_().min(1,"Empresa \xe9 obrigat\xf3ria"),projeto_id:h.Z_().min(1,"Projeto \xe9 obrigat\xf3rio"),subprojeto_id:h.Z_().optional(),banco_conta_id:h.Z_().min(1,"Conta banc\xe1ria \xe9 obrigat\xf3ria"),contraparte_id:h.Z_().min(1,"Contraparte \xe9 obrigat\xf3ria"),plano_conta_id:h.Z_().min(1,"Plano de conta \xe9 obrigat\xf3rio"),valor_bruto:h.oQ.number().min(.01,"Valor bruto \xe9 obrigat\xf3rio"),data_emissao:h.Z_().min(1,"Data de emiss\xe3o \xe9 obrigat\xf3ria"),data_vencimento:h.Z_().min(1,"Data de vencimento \xe9 obrigat\xf3ria"),data_previsao_pagamento:h.Z_().optional(),documento_tipo:h.Z_().optional(),documento_numero:h.Z_().optional(),observacoes:h.Z_().optional()}),_=[{value:"IRRF",label:"IRRF"},{value:"INSS",label:"INSS"},{value:"ISSQN",label:"ISSQN"},{value:"PIS",label:"PIS"},{value:"COFINS",label:"COFINS"},{value:"CSLL",label:"CSLL"},{value:"OUTRO",label:"Outro"}];function S(){let[e,o]=(0,n.useState)([]),[t,h]=(0,n.useState)([]),[S,w]=(0,n.useState)([]),[T,k]=(0,n.useState)([]),[z,D]=(0,n.useState)([]),[B,O]=(0,n.useState)([]),[R,W]=(0,n.useState)(!0),[E,A]=(0,n.useState)(!1),[I,q]=(0,n.useState)(null),[F,P]=(0,n.useState)(!1),[M,L]=(0,n.useState)(0),[Z,N]=(0,n.useState)(!0),[$,G]=(0,n.useState)(!1),[V,H]=(0,n.useState)(""),[Q,Y]=(0,n.useState)(""),[K,X]=(0,n.useState)(""),[U,J]=(0,n.useState)(""),[ee,eo]=(0,n.useState)(""),[et,er]=(0,n.useState)(""),[en,ea]=(0,n.useState)(""),[ei,el]=(0,n.useState)(""),[es,ed]=(0,n.useState)([]),[ec,ep]=(0,n.useState)(0),[ex,eu]=(0,n.useState)(""),[eg,eb]=(0,n.useState)(0),[eh,ef]=(0,n.useState)([]),[em,ey]=(0,n.useState)(0),[ej,eC]=(0,n.useState)({show:!1,id:null}),[ev,e_]=(0,n.useState)({show:!1,id:null}),[eS,ew]=(0,n.useState)(""),{register:eT,handleSubmit:ek,reset:ez,formState:{errors:eD},setValue:eB,watch:eO}=(0,g.cI)({resolver:(0,b.F)(v),defaultValues:{tipo:"Saida",empresa_id:"",projeto_id:"",subprojeto_id:"",banco_conta_id:"",contraparte_id:"",plano_conta_id:"",valor_bruto:0,data_emissao:"",data_vencimento:"",data_previsao_pagamento:"",documento_tipo:"",documento_numero:"",observacoes:""}}),eR=eO("empresa_id"),eW=eO("projeto_id"),eE=eO("tipo"),eA=(e,o)=>{ey(e=>e+1);let t={id:em,message:e,type:o};ef(e=>[...e,t]),setTimeout(()=>{ef(e=>e.filter(e=>e.id!==em))},"warning"===o?2e3:3e3)},eI=(e,o)=>{ey(e=>e+1);let t={id:em,message:e,type:o,requiresConfirmation:!0};ef(e=>[...e,t])},eq=e=>{ef(o=>o.filter(o=>o.id!==e))},eF=e=>{switch(e){case"success":return{borderColor:"#10b981",icon:i.Z,iconColor:"#10b981"};case"warning":return{borderColor:"#eab308",icon:l.Z,iconColor:"#eab308"};case"error":return{borderColor:"#ef4444",icon:s.Z,iconColor:"#ef4444"}}},eP=async e=>{try{console.log("\uD83D\uDD0D Carregando projetos para empresa:",e);let{data:o,error:t}=await a.O.from("projetos").select("id, empresa_id, nome, projeto_pai_id").eq("empresa_id",e).eq("ativo",!0).is("projeto_pai_id",null).order("nome",{ascending:!0});if(t)throw t;w(o||[]),console.log("âœ… Projetos carregados:",o?.length)}catch(e){console.error("âŒ Erro ao carregar projetos:",e),eA("Erro ao carregar projetos","error")}},eM=async e=>{try{let{data:o,error:t}=await a.O.from("projetos").select("id, empresa_id, nome, projeto_pai_id").eq("projeto_pai_id",e).order("nome",{ascending:!0});if(t)throw t;k(o||[])}catch(e){console.error("Erro ao carregar subprojetos:",e),eA("Erro ao carregar subprojetos","error")}},eL=async e=>{try{let{data:o,error:t}=await a.O.from("bancos_contas").select(`
          id, 
          empresa_id, 
          banco_nome, 
          agencia, 
          numero_conta, 
          tipo_conta,
          bancos(nome)
        `).eq("empresa_id",e).eq("tipo_conta","CC").eq("ativo",!0);if(t)throw t;let r=(o||[]).map(e=>({...e,nome_banco:e.bancos?.nome||e.banco_nome||""})).filter((e,o,t)=>o===t.findIndex(o=>o.id===e.id));D(r)}catch(e){console.error("Erro ao carregar contas banc\xe1rias:",e),eA("Erro ao carregar contas banc\xe1rias","error")}},eZ=async(t=!1)=>{let r=t?0:M;t?(W(!0),o([]),L(0)):G(!0);try{let{data:n}=await a.O.from("empresas").select("id, nome"),{data:i}=await a.O.from("projetos").select("id, nome"),l=[],s=0,d=!0;for(console.log("\uD83D\uDCE6 [LANCAMENTOS] Carregando todas contrapartes em lotes...");d;){let{data:e}=await a.O.from("contrapartes").select("id, nome, apelido").range(s,s+1e3-1);if(e&&e.length>0?(l=[...l,...e],s+=1e3,d=1e3===e.length,console.log(`ðŸ“¦ [LANCAMENTOS] Lote: ${e.length} (total: ${l.length})`)):d=!1,s>=2e4)break}let{data:c}=await a.O.from("plano_contas_fluxo").select("id, codigo_conta, categoria, subcategoria, tipo_fluxo, sentido"),p=a.O.from("lancamentos").select("*",{count:"exact"}).order("data_vencimento",{ascending:!1}).order("created_at",{ascending:!1}),x=en||ei;if(x)en&&(p=p.gte("data_vencimento",en)),ei&&(p=p.lte("data_vencimento",ei)),console.log(`ðŸ“… [FILTRO DATA] Carregando todos os registros do per\xedodo`);else{let e=50*r,o=e+50-1;p=p.range(e,o),console.log(`ðŸ“„ [PAGINA\xc7\xc3O] Carregando registros ${e} a ${o}`)}let{data:u,error:g,count:b}=await p;if(g)throw g;if(x)N(!1);else{let o=t?u?.length||0:e.length+(u?.length||0);N(!!b&&o<b),console.log(`ðŸ“Š Total carregado: ${o} de ${b} | Tem mais? ${o<(b||0)}`)}let h=(u||[]).map(e=>e.id),{data:f}=await a.O.from("lancamento_retencoes").select("*").in("lancamento_id",h);console.log(`âœ… Total de contrapartes carregadas para mapeamento: ${l.length}`);let m=(u||[]).map(e=>{let o=n?.find(o=>o.id===e.empresa_id),t=i?.find(o=>o.id===e.projeto_id),r=i?.find(o=>o.id===e.subprojeto_id),a=l?.find(o=>o.id===e.contraparte_id);e.contraparte_id&&!a&&console.warn(`âš ï¸ Contraparte n\xe3o encontrada: ${e.contraparte_id}`);let s=c?.find(o=>o.id===e.plano_conta_id),d=f?.filter(o=>o.lancamento_id===e.id)||[];return{...e,empresa_nome:o?.nome||"Sem empresa",projeto_nome:t?.nome||"",subprojeto_nome:r?.nome||"",contraparte_nome:a?.nome||"",plano_conta:s||null,retencoes:d}});t?o(m):(o(e=>[...e,...m]),L(r+1))}catch(e){console.error("Erro ao carregar lan\xe7amentos:",e),eA("Erro ao carregar lan\xe7amentos","error")}finally{W(!1),G(!1)}},eN=async e=>{try{if(es.length>0){let e=es.map(e=>e.imposto),o=new Set(e);if(e.length!==o.size){let o=[];e.forEach((t,r)=>{e.indexOf(t)===r||o.includes(t)||o.push(t)});let t=o.join(", ");eI(`N\xe3o \xe9 permitido adicionar reten\xe7\xf5es duplicadas. Imposto(s) duplicado(s): ${t}`,"warning");return}}let o="ABERTO";if(I&&F){let{data:e}=await a.O.from("lancamentos").select("status").eq("id",I).single();e&&"PAGO_RECEBIDO"===e.status&&(o="PAGO_RECEBIDO")}let t={tipo:e.tipo,empresa_id:e.empresa_id,projeto_id:e.projeto_id||null,subprojeto_id:e.subprojeto_id||null,banco_conta_id:e.banco_conta_id||null,contraparte_id:e.contraparte_id||null,plano_conta_id:e.plano_conta_id,valor_bruto:ec,valor_liquido:eg,data_emissao:e.data_emissao||null,data_vencimento:e.data_vencimento,data_previsao_pagamento:e.data_previsao_pagamento||null,data_liquidacao:null,status:o,documento_tipo:e.documento_tipo||null,documento_numero:e.documento_numero||null,observacoes:e.observacoes||null};if(I){let{error:e}=await a.O.from("lancamentos").update(t).eq("id",I);if(e)throw e;if(await a.O.from("lancamento_retencoes").delete().eq("lancamento_id",I),es.length>0){let e=es.filter(e=>e.valor>0).map(e=>({lancamento_id:I,imposto:e.imposto,valor:e.valor,detalhe:e.detalhe||null}));if(e.length>0){let{error:o}=await a.O.from("lancamento_retencoes").insert(e);if(o)throw o}}eA("Lan\xe7amento atualizado com sucesso!","success")}else{let{data:e,error:o}=await a.O.from("lancamentos").insert([t]).select().single();if(o)throw o;if(es.length>0&&e){let o=es.filter(e=>e.valor>0).map(o=>({lancamento_id:e.id,imposto:o.imposto,valor:o.valor,detalhe:o.detalhe||null}));if(o.length>0){let{error:e}=await a.O.from("lancamento_retencoes").insert(o);if(e)throw e}}eA("Lan\xe7amento criado com sucesso!","success")}eZ(!0),eQ()}catch(e){console.error("Erro ao salvar lan\xe7amento:",e),eA(e.message||"Erro ao salvar lan\xe7amento","error")}},e$=async e=>{try{console.log("\uD83D\uDD0D [EDIT] Iniciando edi\xe7\xe3o:",{id:e.id,empresa_id:e.empresa_id,projeto_id:e.projeto_id,subprojeto_id:e.subprojeto_id}),q(e.id),P("PAGO_RECEBIDO"===e.status),e.empresa_id&&(await Promise.all([eP(e.empresa_id),eL(e.empresa_id)]),console.log("âœ… [EDIT] Projetos e contas carregados"),e.projeto_id&&(await eM(e.projeto_id),console.log("âœ… [EDIT] Subprojetos carregados")),await new Promise(e=>setTimeout(e,500))),console.log("\uD83D\uDD0D [EDIT] Populando formul\xe1rio com reset()"),ez({tipo:e.tipo,empresa_id:e.empresa_id,projeto_id:e.projeto_id||"",subprojeto_id:e.subprojeto_id||"",banco_conta_id:e.banco_conta_id||"",contraparte_id:e.contraparte_id||"",plano_conta_id:e.plano_conta_id,valor_bruto:e.valor_bruto,data_emissao:C(e.data_emissao),data_vencimento:C(e.data_vencimento),data_previsao_pagamento:C(e.data_previsao_pagamento),documento_tipo:e.documento_tipo||"",documento_numero:e.documento_numero||"",observacoes:e.observacoes||""}),console.log("âœ… [EDIT] Formul\xe1rio populado"),ep(e.valor_bruto);let o=Math.round(100*e.valor_bruto);eu(y(o.toString()));let t=(e.retencoes||[]).map(e=>{let o=Math.round(100*e.valor);return{...e,valorFormatado:y(o.toString())}});ed(t),A(!0)}catch(e){console.error("Erro ao editar lan\xe7amento:",e),eA("Erro ao carregar dados para edi\xe7\xe3o","error")}},eG=async e=>{try{await a.O.from("lancamento_retencoes").delete().eq("lancamento_id",e);let{error:o}=await a.O.from("lancamentos").delete().eq("id",e);if(o)throw o;eA("Lan\xe7amento exclu\xeddo com sucesso!","success"),eZ(!0),eC({show:!1,id:null})}catch(e){console.error("Erro ao excluir lan\xe7amento:",e),eA("Erro ao excluir lan\xe7amento","error")}},eV=async()=>{if(ev.id&&eS)try{let{error:e}=await a.O.from("lancamentos").update({status:"PAGO_RECEBIDO",data_liquidacao:eS}).eq("id",ev.id);if(e)throw e;eA("Lan\xe7amento liquidado com sucesso!","success"),eZ(!0),e_({show:!1,id:null}),ew("")}catch(e){console.error("Erro ao liquidar lan\xe7amento:",e),eA("Erro ao liquidar lan\xe7amento","error")}},eH=async e=>{try{let{error:o}=await a.O.from("lancamentos").update({status:"CANCELADO"}).eq("id",e);if(o)throw o;eA("Lan\xe7amento cancelado com sucesso!","success"),eZ(!0)}catch(e){console.error("Erro ao cancelar lan\xe7amento:",e),eA("Erro ao cancelar lan\xe7amento","error")}},eQ=()=>{A(!1),q(null),P(!1),ed([]),ep(0),eu(""),eb(0),k([]),w([]),D([]),ez()},eY=e=>{ed(es.filter((o,t)=>t!==e))},eK=(e,o,t)=>{let r=[...es];r[e]={...r[e],[o]:t},ed(r)},eX=(e,o)=>{let t=[...es];t[e]={...t[e],valorFormatado:o,valor:j(o)},ed(t)},eU=e.filter(e=>{let o=e.documento_numero?.toLowerCase().includes(V.toLowerCase())||e.observacoes?.toLowerCase().includes(V.toLowerCase())||e.contraparte_nome?.toLowerCase().includes(V.toLowerCase()),t=!Q||e.tipo===Q,r=!K||e.status===K,n=!U||e.empresa_id===U,a=!ee||e.projeto_id===ee,i=!et||e.contraparte_id===et,l=!0;if(en&&ei){let o=new Date(e.data_vencimento),t=new Date(en),r=new Date(ei);l=o>=t&&o<=r}return o&&t&&r&&n&&a&&i&&l}),eJ=e=>{switch(e){case"ABERTO":return{bg:"#fef3c7",color:"#92400e",label:"Aberto"};case"PAGO_RECEBIDO":return{bg:"#d1fae5",color:"#065f46",label:"Pago/Recebido"};case"CANCELADO":return{bg:"#fee2e2",color:"#991b1b",label:"Cancelado"};default:return{bg:"#f3f4f6",color:"#374151",label:e}}},e0=e=>"Entrada"===e?{bg:"#d1fae5",color:"#065f46",label:"Recebimento"}:{bg:"#fee2e2",color:"#991b1b",label:"Pagamento"};return(0,r.jsxs)("div",{style:{padding:"32px",maxWidth:"1600px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[r.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",color:"#1f2937",margin:0},children:"Lan\xe7amentos (AP/AR)"}),(0,r.jsxs)("button",{onClick:()=>{q(null),ed([]),ep(0),eu(""),eb(0),k([]),w([]),D([]),ez({tipo:"Saida",empresa_id:"",projeto_id:"",subprojeto_id:"",banco_conta_id:"",contraparte_id:"",plano_conta_id:"",valor_bruto:0,data_emissao:"",data_vencimento:"",data_previsao_pagamento:"",documento_tipo:"",documento_numero:"",observacoes:""}),A(!0)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#1555D6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1044b5",onMouseOut:e=>e.currentTarget.style.backgroundColor="#1555D6",children:[r.jsx(d.Z,{size:18}),"Novo Lan\xe7amento"]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1.5fr",gap:"12px",marginBottom:"12px"},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Vencimento (De)"}),r.jsx("input",{type:"date",value:en,onChange:e=>ea(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:e=>e.currentTarget.style.borderColor="#1555D6",onBlur:e=>e.currentTarget.style.borderColor="#e5e7eb"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Vencimento (At\xe9)"}),r.jsx("input",{type:"date",value:ei,onChange:e=>el(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:e=>e.currentTarget.style.borderColor="#1555D6",onBlur:e=>e.currentTarget.style.borderColor="#e5e7eb"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Tipo"}),(0,r.jsxs)("select",{value:Q,onChange:e=>Y(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer",backgroundColor:"white"},onFocus:e=>e.currentTarget.style.borderColor="#1555D6",onBlur:e=>e.currentTarget.style.borderColor="#e5e7eb",children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"Entrada",children:"Recebimento"}),r.jsx("option",{value:"Saida",children:"Pagamento"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Status"}),(0,r.jsxs)("select",{value:K,onChange:e=>X(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer",backgroundColor:"white"},onFocus:e=>e.currentTarget.style.borderColor="#1555D6",onBlur:e=>e.currentTarget.style.borderColor="#e5e7eb",children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"ABERTO",children:"Aberto"}),r.jsx("option",{value:"PAGO_RECEBIDO",children:"Pago/Recebido"}),r.jsx("option",{value:"CANCELADO",children:"Cancelado"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Empresa"}),(0,r.jsxs)("select",{value:U,onChange:e=>J(e.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",cursor:"pointer",backgroundColor:"white"},onFocus:e=>e.currentTarget.style.borderColor="#1555D6",onBlur:e=>e.currentTarget.style.borderColor="#e5e7eb",children:[r.jsx("option",{value:"",children:"Todas"}),t.map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id))]})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",marginBottom:"12px"},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Buscar"}),(0,r.jsxs)("div",{style:{position:"relative"},children:[r.jsx(c.Z,{size:16,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),r.jsx("input",{type:"text",placeholder:"Doc, obs, contraparte...",value:V,onChange:e=>H(e.target.value),style:{width:"100%",padding:"8px 10px 8px 34px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:e=>e.currentTarget.style.borderColor="#1555D6",onBlur:e=>e.currentTarget.style.borderColor="#e5e7eb"})]})]}),r.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,r.jsxs)("button",{onClick:()=>{L(0),N(!0),o([]),eZ(!0)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 20px",backgroundColor:"#1555D6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s",whiteSpace:"nowrap",height:"37px"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1044b5",onMouseOut:e=>e.currentTarget.style.backgroundColor="#1555D6",children:[r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M21 2v6h-6M3 12a9 9 0 0 1 15-6.7L21 8M3 22v-6h6M21 12a9 9 0 0 1-15 6.7L3 16"})}),"Atualizar"]})})]})]}),E&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px",overflowY:"auto",backdropFilter:"blur(4px)"},onClick:eQ,children:(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",width:"100%",maxWidth:"1200px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",margin:"20px 0"},onClick:e=>e.stopPropagation(),children:[r.jsx("div",{style:{position:"sticky",top:0,backgroundColor:"white",borderBottom:"1px solid #e5e7eb",padding:"16px 20px",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",zIndex:10},children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:I?"Editar Lan\xe7amento":"Novo Lan\xe7amento"}),r.jsx("button",{onClick:eQ,style:{background:"none",border:"none",fontSize:"24px",color:"#9ca3af",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#f3f4f6",e.currentTarget.style.color="#6b7280"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="#9ca3af"},children:"\xd7"})]})}),r.jsx("div",{style:{padding:"18px"},children:(0,r.jsxs)("form",{onSubmit:ek(eN,e=>{let o=[];Object.keys(e).forEach(t=>{e[t]?.message&&o.push(e[t].message)}),o.length>0&&eI(o.join(" â€¢ "),"warning")}),children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 120px 1fr 1fr",gap:"12px",marginBottom:"14px"},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Empresa *"}),(0,r.jsxs)("select",{...eT("empresa_id"),style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:"pointer"},onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"",children:"Selecione"}),t.map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Projeto *"}),(0,r.jsxs)("select",{...eT("projeto_id"),disabled:!eR,style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:eR?"pointer":"not-allowed",opacity:eR?1:.6},onFocus:e=>{eR&&(e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)")},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"",children:"Selecione"}),S.map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id))]},`projeto-${I||"new"}-${eR}`)]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Subprojeto"}),(0,r.jsxs)("select",{...eT("subprojeto_id"),disabled:!eW||0===T.length,style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:eW&&T.length>0?"pointer":"not-allowed",opacity:eW&&T.length>0?1:.6},onFocus:e=>{eW&&T.length>0&&(e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)")},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"",children:"Selecione"}),T.map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id))]},`subprojeto-${I||"new"}-${eW}`)]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Tipo *"}),(0,r.jsxs)("select",{...eT("tipo"),style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:"pointer"},onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"Entrada",children:"Recebimento"}),r.jsx("option",{value:"Saida",children:"Pagamento"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Conta Banc\xe1ria *"}),(0,r.jsxs)("select",{...eT("banco_conta_id"),disabled:!eR,style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:eR?"pointer":"not-allowed",opacity:eR?1:.6},onFocus:e=>{eR&&(e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)")},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"",children:"Selecione"}),z.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.nome_banco||"Banco"," - Ag: ",e.agencia," - Conta: ",e.numero_conta]},e.id))]},`banco-${I||"new"}-${eR}`)]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Contraparte *"}),(0,r.jsxs)("select",{...eT("contraparte_id"),style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",cursor:"pointer"},onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"},children:[r.jsx("option",{value:"",children:"Selecione"}),B.map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id))]})]})]}),r.jsx("div",{style:{borderTop:"1px solid #e5e7eb",margin:"16px 0",paddingTop:"16px"},children:r.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginTop:0,marginBottom:"14px"},children:"Plano de Contas"})}),r.jsx("div",{style:{marginBottom:"14px"},children:r.jsx(f,{value:eO("plano_conta_id"),onChange:e=>eB("plano_conta_id",e),sentidoFilter:eE,error:eD.plano_conta_id?.message},`plano-conta-${I||"new"}-${eO("plano_conta_id")}`)}),r.jsx("div",{style:{borderTop:"1px solid #e5e7eb",margin:"16px 0",paddingTop:"16px"},children:r.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginTop:0,marginBottom:"14px"},children:"Datas, Documentos e Valores"})}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 0.8fr 0.6fr",gap:"12px",marginBottom:"14px"},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Data Emiss\xe3o *"}),r.jsx("input",{...eT("data_emissao"),type:"date",disabled:F,style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",backgroundColor:F?"#f9fafb":"white",cursor:F?"not-allowed":"text",color:F?"#9ca3af":"#1f2937"},onFocus:e=>{F||(e.currentTarget.style.borderColor="#1555D6"),e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Data Vencimento *"}),r.jsx("input",{...eT("data_vencimento"),type:"date",disabled:F,style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",backgroundColor:F?"#f9fafb":"white",cursor:F?"not-allowed":"text",color:F?"#9ca3af":"#1f2937"},onFocus:e=>{F||(e.currentTarget.style.borderColor="#1555D6"),e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Previs\xe3o Pgto"}),r.jsx("input",{...eT("data_previsao_pagamento"),type:"date",disabled:F,style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",backgroundColor:F?"#f9fafb":"white",cursor:F?"not-allowed":"text",color:F?"#9ca3af":"#1f2937"},onFocus:e=>{F||(e.currentTarget.style.borderColor="#1555D6"),e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Valor Bruto *"}),(0,r.jsxs)("div",{style:{position:"relative"},children:[r.jsx("span",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",fontSize:"13px",color:"#6b7280",fontWeight:"500"},children:"R$"}),r.jsx("input",{type:"text",value:ex,disabled:F,onChange:e=>{let o=y(e.target.value);eu(o);let t=j(o);ep(t),eB("valor_bruto",t)},style:{width:"100%",padding:"9px 10px 9px 32px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none",textAlign:"right",backgroundColor:F?"#f9fafb":"white",cursor:F?"not-allowed":"text",color:F?"#9ca3af":"#1f2937"},placeholder:"0,00",onFocus:e=>{F||(e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)")},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Tipo Doc"}),r.jsx("input",{...eT("documento_tipo"),type:"text",placeholder:"NF, Boleto...",style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"N\xba Doc"}),r.jsx("input",{...eT("documento_numero"),type:"text",placeholder:"123456",style:{width:"100%",padding:"9px 10px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]})]}),(0,r.jsxs)("div",{style:{marginBottom:"14px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Reten\xe7\xf5es"}),(0,r.jsxs)("button",{type:"button",onClick:()=>{ed([...es,{imposto:"IRRF",valor:0,valorFormatado:"",detalhe:null}])},style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"13px",fontWeight:"500",color:"#374151",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#e5e7eb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#f3f4f6",children:[r.jsx(d.Z,{size:14}),"Adicionar"]})]}),es.length>0&&r.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:es.map((e,o)=>(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"140px 1fr 1fr 40px",gap:"10px",padding:"10px",borderBottom:o<es.length-1?"1px solid #e5e7eb":"none",alignItems:"center"},children:[r.jsx("select",{value:e.imposto,onChange:e=>eK(o,"imposto",e.target.value),style:{padding:"8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"13px",outline:"none"},children:_.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))}),r.jsx("input",{type:"text",value:e.valorFormatado||"",onChange:e=>{eX(o,y(e.target.value))},placeholder:"0,00",style:{padding:"8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"13px",outline:"none"}}),r.jsx("input",{type:"text",value:e.detalhe||"",onChange:e=>eK(o,"detalhe",e.target.value),placeholder:"Detalhe (opcional)",style:{padding:"8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"13px",outline:"none"}}),r.jsx("button",{type:"button",onClick:()=>eY(o),style:{padding:"6px",backgroundColor:"transparent",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#fef2f2",e.currentTarget.style.borderColor="#fecaca"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor="#e5e7eb"},children:r.jsx(p.Z,{size:14,color:"#ef4444"})})]},o))})]}),r.jsx("div",{style:{padding:"12px",backgroundColor:"#f0fdf4",border:"1px solid #86efac",borderRadius:"8px",marginBottom:"14px"},children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#065f46"},children:"Valor L\xedquido:"}),r.jsx("span",{style:{fontSize:"18px",fontWeight:"700",color:"#059669"},children:m(eg)})]})}),(0,r.jsxs)("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Observa\xe7\xf5es"}),r.jsx("textarea",{...eT("observacoes"),rows:3,placeholder:"Informa\xe7\xf5es adicionais...",style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",fontFamily:"inherit"},onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px",paddingTop:"4px"},children:[r.jsx("button",{type:"button",onClick:eQ,style:{flex:1,padding:"12px 24px",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f9fafb",onMouseOut:e=>e.currentTarget.style.backgroundColor="white",children:"Cancelar"}),r.jsx("button",{type:"submit",style:{flex:1,padding:"12px 24px",backgroundColor:"#1555D6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",color:"white",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1044b5",onMouseOut:e=>e.currentTarget.style.backgroundColor="#1555D6",children:I?"Atualizar":"Criar"})]})]})})]})}),r.jsx("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:R?(0,r.jsxs)("div",{style:{padding:"48px",textAlign:"center",color:"#6b7280"},children:[r.jsx("div",{style:{display:"inline-block",width:"32px",height:"32px",border:"3px solid #e5e7eb",borderTopColor:"#1555D6",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),r.jsx("p",{style:{marginTop:"16px",fontSize:"14px"},children:"Carregando lan\xe7amentos..."})]}):0===eU.length?r.jsx("div",{style:{padding:"48px",textAlign:"center",color:"#6b7280"},children:r.jsx("p",{style:{fontSize:"14px"},children:"Nenhum lan\xe7amento encontrado"})}):(0,r.jsxs)("div",{style:{overflowX:"auto"},children:[(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{style:{backgroundColor:"#f9fafb"},children:[r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",width:"100px"},children:"Vencimento"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",width:"90px"},children:"Tipo"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Empresa"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"C\xf3digo Financeiro"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Contraparte"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"right",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",width:"110px"},children:"Bruto"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"right",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",width:"110px"},children:"Reten\xe7\xf5es"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"right",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",width:"110px"},children:"L\xedquido"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",width:"120px"},children:"Status"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",width:"160px"},children:"A\xe7\xf5es"})]})}),r.jsx("tbody",{children:eU.map(e=>{let o=eJ(e.status),t=e0(e.tipo),n=(e.retencoes||[]).reduce((e,o)=>e+o.valor,0);return(0,r.jsxs)("tr",{style:{borderTop:"1px solid #e5e7eb",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f9fafb",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[r.jsx("td",{style:{padding:"12px 16px",color:"#374151",fontSize:"13px"},children:new Date(e.data_vencimento).toLocaleDateString("pt-BR")}),r.jsx("td",{style:{padding:"12px 16px"},children:r.jsx("span",{style:{display:"inline-block",padding:"3px 10px",fontSize:"11px",fontWeight:"500",borderRadius:"12px",backgroundColor:t.bg,color:t.color},children:t.label})}),r.jsx("td",{style:{padding:"12px 16px",color:"#374151",fontSize:"13px"},children:e.empresa_nome}),r.jsx("td",{style:{padding:"12px 16px",color:"#374151",fontSize:"13px"},children:e.plano_conta?(0,r.jsxs)("div",{children:[r.jsx("div",{style:{fontFamily:"monospace",fontWeight:"600",marginBottom:"4px"},children:e.plano_conta.codigo_conta}),r.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Plano Cont\xe1bil: 1.00.000.001 - Descri\xe7\xe3o: Em Desenvolvimento"})]}):"-"}),r.jsx("td",{style:{padding:"12px 16px",color:"#6b7280",fontSize:"13px"},children:e.contraparte_nome||"-"}),r.jsx("td",{style:{padding:"12px 16px",textAlign:"right",color:"#374151",fontWeight:"500",fontSize:"13px"},children:m(e.valor_bruto)}),r.jsx("td",{style:{padding:"12px 16px",textAlign:"right",color:"#ef4444",fontSize:"13px"},children:n>0?`-${m(n)}`:"-"}),r.jsx("td",{style:{padding:"12px 16px",textAlign:"right",color:"#059669",fontWeight:"600",fontSize:"13px"},children:m(e.valor_liquido)}),r.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:r.jsx("span",{style:{display:"inline-block",padding:"3px 10px",fontSize:"11px",fontWeight:"500",borderRadius:"12px",backgroundColor:o.bg,color:o.color},children:o.label})}),r.jsx("td",{style:{padding:"12px 16px"},children:(0,r.jsxs)("div",{style:{display:"flex",gap:"6px",justifyContent:"center",flexWrap:"wrap"},children:[r.jsx("button",{onClick:()=>e$(e),disabled:"CANCELADO"===e.status,style:{padding:"6px",backgroundColor:"transparent",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"CANCELADO"===e.status?"not-allowed":"pointer",opacity:"CANCELADO"===e.status?.5:1,transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:o=>{"CANCELADO"!==e.status&&(o.currentTarget.style.backgroundColor="#f3f4f6")},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent"},title:"Editar",children:r.jsx(x.Z,{size:14,color:"#6b7280"})}),"ABERTO"===e.status&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{onClick:()=>{e_({show:!0,id:e.id}),ew(new Date().toISOString().split("T")[0])},style:{padding:"6px",backgroundColor:"transparent",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#f0fdf4",e.currentTarget.style.borderColor="#86efac"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor="#e5e7eb"},title:"Liquidar",children:r.jsx(i.Z,{size:14,color:"#10b981"})}),r.jsx("button",{onClick:()=>{confirm("Tem certeza que deseja cancelar este lan\xe7amento?")&&eH(e.id)},style:{padding:"6px",backgroundColor:"transparent",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#fef3c7",e.currentTarget.style.borderColor="#fcd34d"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor="#e5e7eb"},title:"Cancelar",children:r.jsx(s.Z,{size:14,color:"#eab308"})}),r.jsx("button",{onClick:()=>eC({show:!0,id:e.id}),style:{padding:"6px",backgroundColor:"transparent",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#fef2f2",e.currentTarget.style.borderColor="#fecaca"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor="#e5e7eb"},title:"Excluir",children:r.jsx(u.Z,{size:14,color:"#ef4444"})})]})]})})]},e.id)})})]}),$&&(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"32px",backgroundColor:"#f9fafb"},children:[r.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid #f3f4f6",borderTop:"3px solid #1555D6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("span",{style:{marginLeft:"12px",fontSize:"14px",color:"#6b7280",fontWeight:"500"},children:"Carregando mais lan\xe7amentos..."})]}),!R&&!$&&!Z&&e.length>0&&r.jsx("div",{style:{padding:"24px",textAlign:"center",fontSize:"14px",color:"#9ca3af",backgroundColor:"#f9fafb",borderTop:"1px solid #e5e7eb"},children:"Todos os lan\xe7amentos foram carregados"})]})}),ej.show&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:()=>eC({show:!1,id:null}),children:(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",padding:"32px",width:"100%",maxWidth:"450px",margin:"16px",animation:"scaleIn 0.2s ease-out"},onClick:e=>e.stopPropagation(),children:[r.jsx("div",{style:{width:"56px",height:"56px",margin:"0 auto 20px",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(l.Z,{style:{width:"28px",height:"28px",color:"#dc2626"}})}),r.jsx("h2",{style:{fontSize:"20px",fontWeight:"700",color:"#111827",marginBottom:"12px",textAlign:"center"},children:"Excluir Lan\xe7amento"}),r.jsx("p",{style:{fontSize:"14px",color:"#6b7280",textAlign:"center",marginBottom:"8px",lineHeight:"1.5"},children:"Tem certeza que deseja excluir este lan\xe7amento?"}),r.jsx("p",{style:{fontSize:"13px",color:"#ef4444",textAlign:"center",marginBottom:"24px",fontWeight:"500"},children:"Esta a\xe7\xe3o n\xe3o pode ser desfeita."}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>eC({show:!1,id:null}),style:{flex:1,padding:"12px 24px",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f9fafb",onMouseOut:e=>e.currentTarget.style.backgroundColor="white",children:"Cancelar"}),r.jsx("button",{onClick:()=>ej.id&&eG(ej.id),style:{flex:1,padding:"12px 24px",backgroundColor:"#dc2626",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",color:"white",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#b91c1c",onMouseOut:e=>e.currentTarget.style.backgroundColor="#dc2626",children:"Sim, Excluir"})]})]})}),ev.show&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:()=>{e_({show:!1,id:null}),ew("")},children:(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",padding:"32px",width:"100%",maxWidth:"450px",margin:"16px",animation:"scaleIn 0.2s ease-out"},onClick:e=>e.stopPropagation(),children:[r.jsx("div",{style:{width:"56px",height:"56px",margin:"0 auto 20px",borderRadius:"50%",backgroundColor:"#d1fae5",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(i.Z,{style:{width:"28px",height:"28px",color:"#10b981"}})}),r.jsx("h2",{style:{fontSize:"20px",fontWeight:"700",color:"#111827",marginBottom:"12px",textAlign:"center"},children:"Liquidar Lan\xe7amento"}),r.jsx("p",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"20px",textAlign:"center",lineHeight:"1.5"},children:"Confirme a data de pagamento/recebimento:"}),(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Data de Liquida\xe7\xe3o *"}),r.jsx("input",{type:"date",value:eS,onChange:e=>ew(e.target.value),style:{width:"100%",padding:"12px 16px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#1555D6",e.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 85, 214, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.boxShadow="none"}})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>{e_({show:!1,id:null}),ew("")},style:{flex:1,padding:"12px 24px",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f9fafb",onMouseOut:e=>e.currentTarget.style.backgroundColor="white",children:"Cancelar"}),r.jsx("button",{onClick:eV,disabled:!eS,style:{flex:1,padding:"12px 24px",backgroundColor:eS?"#10b981":"#d1d5db",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",color:"white",cursor:eS?"pointer":"not-allowed",transition:"all 0.2s"},onMouseOver:e=>{eS&&(e.currentTarget.style.backgroundColor="#059669")},onMouseOut:e=>{eS&&(e.currentTarget.style.backgroundColor="#10b981")},children:"Confirmar Liquida\xe7\xe3o"})]})]})}),r.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999,display:"flex",flexDirection:"column",gap:"12px",pointerEvents:"none"},children:eh.map(e=>{let{borderColor:o,icon:t,iconColor:n}=eF(e.type);return(0,r.jsxs)("div",{style:{backgroundColor:"white",borderTop:`4px solid ${o}`,padding:e.requiresConfirmation?"20px":"16px 20px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:e.requiresConfirmation?"column":"row",alignItems:e.requiresConfirmation?"stretch":"center",gap:e.requiresConfirmation?"16px":"12px",minWidth:"400px",maxWidth:"600px",animation:"scaleIn 0.3s ease-out",pointerEvents:e.requiresConfirmation?"auto":"none"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(t,{style:{width:"24px",height:"24px",flexShrink:0,color:n}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"500",flex:1,color:"#374151",lineHeight:"1.5"},children:e.message})]}),e.requiresConfirmation&&r.jsx("button",{onClick:()=>eq(e.id),style:{padding:"10px 24px",backgroundColor:"#1555D6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:"white",cursor:"pointer",transition:"all 0.2s",alignSelf:"center",minWidth:"100px"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1044b5",onMouseOut:e=>e.currentTarget.style.backgroundColor="#1555D6",children:"OK"})]},e.id)})}),r.jsx("style",{children:`
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    @keyframes scaleIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }
  `})]})}},94019:(e,o,t)=>{"use strict";t.d(o,{Z:()=>r});let r=(0,t(62881).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},26609:(e,o,t)=>{"use strict";t.r(o),t.d(o,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});var r=t(68570);let n=(0,r.createProxy)(String.raw`C:\Projetos\app-sodcapital\app\financeiro\lancamentos\page.tsx`),{__esModule:a,$$typeof:i}=n;n.default;let l=(0,r.createProxy)(String.raw`C:\Projetos\app-sodcapital\app\financeiro\lancamentos\page.tsx#default`)}};var o=require("../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[948,550,312,93],()=>t(90504));module.exports=r})();